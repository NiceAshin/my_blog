---
title: è§†å›¾
date: 2026-02-27
tags:
  - Yii2
  - PHP
categories:
  - PHPæ¡†æ¶æ¢ç´¢
prev: 6.æ¨¡å‹
next: ./8.è¿‡æ»¤å™?md
---

# è§†å›¾

è§†å›¾æ˜?[MVC](https://zh.wikipedia.org/wiki/MVC) æ¨¡å¼ä¸­çš„ä¸€éƒ¨åˆ†ã€?å®ƒæ˜¯å±•ç¤ºæ•°æ®åˆ°ç»ˆç«¯ç”¨æˆ·çš„ä»£ç ï¼Œåœ¨ç½‘é¡µåº”ç”¨ä¸­ï¼Œ æ ¹æ®*è§†å›¾æ¨¡æ¿*æ¥åˆ›å»ºè§†å›¾ï¼Œè§†å›¾æ¨¡æ¿ä¸ºPHPè„šæœ¬æ–‡ä»¶ï¼?ä¸»è¦åŒ…å«HTMLä»£ç å’Œå±•ç¤ºç±»PHPä»£ç ï¼Œé€šè¿‡[view](https://www.yiiframework.com/doc/api/2.0/yii-web-view)åº”ç”¨ç»„ä»¶æ¥ç®¡ç†ï¼Œ è¯¥ç»„ä»¶ä¸»è¦æä¾›é€šç”¨æ–¹æ³•å¸®åŠ©è§†å›¾æ„é€ å’Œæ¸²æŸ“ï¼?ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç§°è§†å›¾æ¨¡æ¿æˆ–è§†å›¾æ¨¡æ¿æ–‡ä»¶ä¸ºè§†å›¾ã€?

## åˆ›å»ºè§†å›¾

å¦‚å‰æ‰€è¿°ï¼Œè§†å›¾ä¸ºåŒ…å«HTMLå’ŒPHPä»£ç çš„PHPè„šæœ¬ï¼Œå¦‚ä¸‹ä»£ç ä¸ºä¸€ä¸ªç™»å½•è¡¨å•çš„è§†å›¾ï¼?å¯çœ‹åˆ°PHPä»£ç ç”¨æ¥ç”ŸæˆåŠ¨æ€å†…å®¹å¦‚é¡µé¢æ ‡é¢˜å’Œè¡¨å•ï¼Œ HTMLä»£ç æŠŠå®ƒç»„ç»‡æˆä¸€ä¸ªæ¼‚äº®çš„HTMLé¡µé¢ã€?

```html
<?php
use yii\helpers\Html;
use yii\widgets\ActiveForm;

/**
 * @var \yii\web\View $this
 * @var \yii\widgets\ActiveForm $form
 * @var \app\models\LoginForm $model
 */

$this->title = 'Login';
?>
<h1><?= Html::encode($this->title) ?></h1>

<p>Please fill out the following fields to login:</p>

<?php $form = ActiveForm::begin(); ?>
    <?= $form->field($model, 'username') ?>
    <?= $form->field($model, 'password')->passwordInput() ?>
    <?= Html::submitButton('Login') ?>
<?php ActiveForm::end(); ?>
```

åœ¨è§†å›¾ä¸­ï¼Œå¯è®¿é—® `$this` æŒ‡å‘ [view component](https://www.yiiframework.com/doc/api/2.0/yii-web-view) æ¥ç®¡ç†å’Œæ¸²æŸ“è¿™ä¸ªè§†å›¾æ–‡ä»¶ã€?

é™¤äº† `$this`ä¹‹å¤–ï¼Œä¸Šè¿°ç¤ºä¾‹ä¸­çš„è§†å›¾æœ‰å…¶ä»–é¢„å®šä¹‰å˜é‡å¦‚ `$model`ï¼?è¿™äº›å˜é‡ä»£è¡¨ä»[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) æˆ–å…¶ä»–è§¦å‘[è§†å›¾æ¸²æŸ“](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#rendering-views)çš„å¯¹è±?*ä¼ å…¥* åˆ°è§†å›¾çš„æ•°æ®ã€?

> **æç¤ºï¼?* å°†é¢„å®šä¹‰å˜é‡åˆ—åˆ°è§†å›¾æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šå¤„ï¼Œ è¿™æ ·å¯è¢«IDEç¼–è¾‘å™¨è¯†åˆ«ï¼Œä¹Ÿæ˜¯ç”Ÿæˆè§†å›¾æ–‡æ¡£çš„å¥½æ–¹æ³•ã€?

### å®‰å…¨

å½“åˆ›å»ºç”ŸæˆHTMLé¡µé¢çš„è§†å›¾æ—¶ï¼Œåœ¨æ˜¾ç¤ºä¹‹å‰å°†ç”¨æˆ·è¾“å…¥æ•°æ®è¿›è¡Œè½¬ç å’Œè¿‡æ»¤éå¸¸é‡è¦ï¼?å¦åˆ™ï¼Œä½ çš„åº”ç”¨å¯èƒ½ä¼šè¢?[è·¨ç«™è„šæœ¬](https://zh.wikipedia.org/wiki/è·¨ç¶²ç«™æŒ‡ä»¤ç¢¼) æ”»å‡»ã€?

è¦æ˜¾ç¤ºçº¯æ–‡æœ¬ï¼Œå…ˆè°ƒç”¨ [yii\helpers\Html::encode()](https://www.yiiframework.com/doc/api/2.0/yii-helpers-basehtml#encode()-detail) è¿›è¡Œè½¬ç ï¼?ä¾‹å¦‚å¦‚ä¸‹ä»£ç å°†ç”¨æˆ·ååœ¨æ˜¾ç¤ºå‰å…ˆè½¬ç ï¼š

```html
<?php
use yii\helpers\Html;
?>

<div class="username">
    <?= Html::encode($user->name) ?>
</div>
```

è¦æ˜¾ç¤ºHTMLå†…å®¹ï¼Œå…ˆè°ƒç”¨ [yii\helpers\HtmlPurifier](https://www.yiiframework.com/doc/api/2.0/yii-helpers-htmlpurifier) è¿‡æ»¤å†…å®¹ï¼?ä¾‹å¦‚å¦‚ä¸‹ä»£ç å°†æäº¤å†…å®¹åœ¨æ˜¾ç¤ºå‰å…ˆè¿‡æ»¤ï¼?

```html
<?php
use yii\helpers\HtmlPurifier;
?>

<div class="post">
    <?= HtmlPurifier::process($post->text) ?>
</div>
```

> **æç¤ºï¼?* HTMLPurifieråœ¨ä¿è¯è¾“å‡ºæ•°æ®å®‰å…¨ä¸Šåšçš„ä¸é”™ï¼Œä½†æ€§èƒ½ä¸ä½³ï¼Œå¦‚æœä½ çš„åº”ç”¨éœ€è¦é«˜æ€§èƒ½å¯è€ƒè™‘ [ç¼“å­˜](https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-overview) è¿‡æ»¤åçš„ç»“æœã€?

### ç»„ç»‡è§†å›¾

ä¸?[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) å’?[æ¨¡å‹](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-models) ç±»ä¼¼ï¼Œåœ¨ç»„ç»‡è§†å›¾ä¸Šæœ‰ä¸€äº›çº¦å®šï¼š

- æ§åˆ¶å™¨æ¸²æŸ“çš„è§†å›¾æ–‡ä»¶é»˜è®¤æ”¾åœ¨ `@app/views/ControllerID` ç›®å½•ä¸‹ï¼Œ å…¶ä¸­ `ControllerID` å¯¹åº” [æ§åˆ¶å™?ID](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#routes), ä¾‹å¦‚æ§åˆ¶å™¨ç±»ä¸?`PostController`ï¼Œè§†å›¾æ–‡ä»¶ç›®å½•åº”ä¸?`@app/views/post`ï¼?æ§åˆ¶å™¨ç±» `PostCommentController`å¯¹åº”çš„ç›®å½•ä¸º `@app/views/post-comment`ï¼?å¦‚æœæ˜¯æ¨¡å—ä¸­çš„æ§åˆ¶å™¨ï¼Œç›®å½•åº”ä¸?[module directory](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail) æ¨¡å—ç›®å½•ä¸‹çš„ `views/ControllerID` ç›®å½•ï¼?
- å¯¹äº [å°éƒ¨ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets) æ¸²æŸ“çš„è§†å›¾æ–‡ä»¶é»˜è®¤æ”¾åœ?`WidgetPath/views` ç›®å½•ï¼?å…¶ä¸­ `WidgetPath` ä»£è¡¨å°éƒ¨ä»¶ç±»æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼?
- å¯¹äºå…¶ä»–å¯¹è±¡æ¸²æŸ“çš„è§†å›¾æ–‡ä»¶ï¼Œå»ºè®®éµå¾ªå’Œå°éƒ¨ä»¶ç›¸ä¼¼çš„è§„åˆ™ã€?

å¯è¦†ç›–æ§åˆ¶å™¨æˆ–å°éƒ¨ä»¶çš?[yii\base\ViewContextInterface::getViewPath()](https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface#getViewPath()-detail) æ–¹æ³•æ¥è‡ªå®šä¹‰è§†å›¾æ–‡ä»¶é»˜è®¤ç›®å½•ã€?

## æ¸²æŸ“è§†å›¾

å¯åœ¨ [æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers), [å°éƒ¨ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets), æˆ–å…¶ä»–åœ°æ–¹è°ƒç”¨æ¸²æŸ“è§†å›¾æ–¹æ³•æ¥æ¸²æŸ“è§†å›¾ï¼?è¯¥æ–¹æ³•ç±»ä¼¼ä»¥ä¸‹æ ¼å¼ï¼š

```
/**
 * @param string $view è§†å›¾åæˆ–æ–‡ä»¶è·¯å¾„ï¼Œç”±å®é™…çš„æ¸²æŸ“æ–¹æ³•å†³å®?
 * @param array $params ä¼ é€’ç»™è§†å›¾çš„æ•°æ?
 * @return string æ¸²æŸ“ç»“æœ
 */
methodName($view, $params = [])
```

### æ§åˆ¶å™¨ä¸­æ¸²æŸ“

åœ?[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) ä¸­ï¼Œå¯è°ƒç”¨ä»¥ä¸‹æ§åˆ¶å™¨æ–¹æ³•æ¥æ¸²æŸ“è§†å›¾ï¼š

- [render()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail): æ¸²æŸ“ä¸€ä¸?[è§†å›¾å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views) å¹¶ä½¿ç”¨ä¸€ä¸?[å¸ƒå±€](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts) è¿”å›åˆ°æ¸²æŸ“ç»“æœã€?
- [renderPartial()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderPartial()-detail): æ¸²æŸ“ä¸€ä¸?[è§†å›¾å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views) å¹¶ä¸”ä¸ä½¿ç”¨å¸ƒå±€ã€?
- [renderAjax()](https://www.yiiframework.com/doc/api/2.0/yii-web-controller#renderAjax()-detail): æ¸²æŸ“ä¸€ä¸?[è§†å›¾å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views) å¹¶ä¸”ä¸ä½¿ç”¨å¸ƒå±€ï¼?å¹¶æ³¨å…¥æ‰€æœ‰æ³¨å†Œçš„JS/CSSè„šæœ¬å’Œæ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨åœ¨å“åº”AJAXç½‘é¡µè¯·æ±‚çš„æƒ…å†µä¸‹ã€?
- [renderFile()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderFile()-detail): æ¸²æŸ“ä¸€ä¸ªè§†å›¾æ–‡ä»¶ç›®å½•æˆ– [åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ä¸‹çš„è§†å›¾æ–‡ä»¶ã€?
- [renderContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderContent()-detail): renders a static string by embedding it into the currently applicable [layout](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts). This method is available since version 2.0.1.

ä¾‹å¦‚ï¼?

```php
namespace app\controllers;

use Yii;
use app\models\Post;
use yii\web\Controller;
use yii\web\NotFoundHttpException;

class PostController extends Controller
{
    public function actionView($id)
    {
        $model = Post::findOne($id);
        if ($model === null) {
            throw new NotFoundHttpException;
        }

        // æ¸²æŸ“ä¸€ä¸ªåç§°ä¸º"view"çš„è§†å›¾å¹¶ä½¿ç”¨å¸ƒå±€
        return $this->render('view', [
            'model' => $model,
        ]);
    }
}
```

### å°éƒ¨ä»¶ä¸­æ¸²æŸ“

åœ?[å°éƒ¨ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets) ä¸­ï¼Œå¯è°ƒç”¨ä»¥ä¸‹å°éƒ¨ä»¶æ–¹æ³•æ¥æ¸²æŸ“è§†å›¾ï¼š

- [render()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#render()-detail): æ¸²æŸ“ä¸€ä¸?[è§†å›¾å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views).
- [renderFile()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#renderFile()-detail): æ¸²æŸ“ä¸€ä¸ªè§†å›¾æ–‡ä»¶ç›®å½•æˆ– [åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ä¸‹çš„è§†å›¾æ–‡ä»¶ã€?

ä¾‹å¦‚ï¼?

```php
namespace app\components;

use yii\base\Widget;
use yii\helpers\Html;

class ListWidget extends Widget
{
    public $items = [];

    public function run()
    {
        // æ¸²æŸ“ä¸€ä¸ªåä¸?"list" çš„è§†å›?
        return $this->render('list', [
            'items' => $this->items,
        ]);
    }
}
```

### è§†å›¾ä¸­æ¸²æŸ?

å¯ä»¥åœ¨è§†å›¾ä¸­æ¸²æŸ“å¦ä¸€ä¸ªè§†å›¾ï¼Œå¯ä»¥è°ƒç”¨[view component](https://www.yiiframework.com/doc/api/2.0/yii-base-view)è§†å›¾ç»„ä»¶æä¾›çš„ä»¥ä¸‹æ–¹æ³•ï¼š

- [render()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#render()-detail): æ¸²æŸ“ä¸€ä¸?[è§†å›¾å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views).

- renderAjax()

  : æ¸²æŸ“ä¸€ä¸?

   

  è§†å›¾å?

   

  å¹¶æ³¨å…¥æ‰€æœ‰æ³¨å†Œçš„JS/CSSè„šæœ¬å’Œæ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨åœ¨å“åº”AJAXç½‘é¡µè¯·æ±‚çš„æƒ…å†µä¸‹ã€?

  - [renderFile()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#renderFile()-detail): æ¸²æŸ“ä¸€ä¸ªè§†å›¾æ–‡ä»¶ç›®å½•æˆ– [åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ä¸‹çš„è§†å›¾æ–‡ä»¶ã€?

ä¾‹å¦‚ï¼Œè§†å›¾ä¸­çš„å¦‚ä¸‹ä»£ç ä¼šæ¸²æŸ“è¯¥è§†å›¾æ‰€åœ¨ç›®å½•ä¸‹çš?`_overview.php` è§†å›¾æ–‡ä»¶ï¼?è®°ä½è§†å›¾ä¸?`$this` å¯¹åº” [view](https://www.yiiframework.com/doc/api/2.0/yii-base-view) ç»„ä»¶:

```html
<?= $this->render('_overview') ?>
```

### å…¶ä»–åœ°æ–¹æ¸²æŸ“

åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡è¡¨è¾¾å¼?`Yii::$app->view` è®¿é—® [view](https://www.yiiframework.com/doc/api/2.0/yii-base-view) åº”ç”¨ç»„ä»¶ï¼?è°ƒç”¨å®ƒçš„å¦‚å‰æ‰€è¿°çš„æ–¹æ³•æ¸²æŸ“è§†å›¾ï¼Œä¾‹å¦‚ï¼š

```php
// æ˜¾ç¤ºè§†å›¾æ–‡ä»¶ "@app/views/site/license.php"
echo \Yii::$app->view->renderFile('@app/views/site/license.php');
```

### è§†å›¾å?

æ¸²æŸ“è§†å›¾æ—¶ï¼Œå¯æŒ‡å®šä¸€ä¸ªè§†å›¾åæˆ–è§†å›¾æ–‡ä»¶è·¯å¾?åˆ«åï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨å‰è€…å› ä¸ºå‰è€…ç®€æ´çµæ´»ï¼Œ æˆ‘ä»¬ç§°ç”¨åå­—çš„è§†å›¾ä¸º *è§†å›¾å?.

è§†å›¾åå¯ä»¥ä¾æ®ä»¥ä¸‹è§„åˆ™åˆ°å¯¹åº”çš„è§†å›¾æ–‡ä»¶è·¯å¾„ï¼š

- è§†å›¾åå¯çœç•¥æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”?`.php` ä½œä¸ºæ‰©å±•ï¼?è§†å›¾å?`about` å¯¹åº”åˆ?`about.php` æ–‡ä»¶åï¼›
- è§†å›¾åä»¥åŒæ–œæ?`//` å¼€å¤´ï¼Œå¯¹åº”çš„è§†å›¾æ–‡ä»¶è·¯å¾„ä¸º `@app/views/ViewName`ï¼?ä¹Ÿå°±æ˜¯è¯´è§†å›¾æ–‡ä»¶åœ?[application's view path](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail) è·¯å¾„ä¸‹æ‰¾ï¼?ä¾‹å¦‚ `//site/about` å¯¹åº”åˆ?`@app/views/site/about.php`ã€?
- è§†å›¾åä»¥å•æ–œæ `/`å¼€å§‹ï¼Œè§†å›¾æ–‡ä»¶è·¯å¾„ä»¥å½“å‰ä½¿ç”¨[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules) çš„[view path](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail)å¼€å§‹ï¼Œ å¦‚æœä¸å­˜åœ¨æ¨¡å—ï¼Œä½¿ç”¨`@app/views/ViewName`å¼€å§‹ï¼Œä¾‹å¦‚ï¼Œå¦‚æœå½“å‰æ¨¡å—ä¸º`user`ï¼?`/user/create` å¯¹åº”æˆ?`@app/modules/user/views/user/create.php`, å¦‚æœä¸åœ¨æ¨¡å—ä¸­ï¼Œ`/user/create`å¯¹åº”`@app/views/user/create.php`ã€?
- å¦‚æœ [context](https://www.yiiframework.com/doc/api/2.0/yii-base-view#$context-detail) æ¸²æŸ“è§†å›¾ å¹¶ä¸”ä¸Šä¸‹æ–‡å®ç°äº† [yii\base\ViewContextInterface](https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface), è§†å›¾æ–‡ä»¶è·¯å¾„ç”±ä¸Šä¸‹æ–‡çš?[view path](https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface#getViewPath()-detail) å¼€å§‹ï¼Œ è¿™ç§ä¸»è¦ç”¨åœ¨æ§åˆ¶å™¨å’Œå°éƒ¨ä»¶ä¸­æ¸²æŸ“è§†å›¾ï¼Œä¾‹å¦?å¦‚æœä¸Šä¸‹æ–‡ä¸ºæ§åˆ¶å™¨`SiteController`ï¼Œ`site/about` å¯¹åº”åˆ?`@app/views/site/about.php`ã€?
- å¦‚æœè§†å›¾æ¸²æŸ“å¦ä¸€ä¸ªè§†å›¾ï¼ŒåŒ…å«å¦ä¸€ä¸ªè§†å›¾æ–‡ä»¶çš„ç›®å½•ä»¥å½“å‰è§†å›¾çš„æ–‡ä»¶è·¯å¾„å¼€å§‹ï¼Œ ä¾‹å¦‚è¢«è§†å›¾`@app/views/post/index.php` æ¸²æŸ“çš?`item` å¯¹åº”åˆ?`@app/views/post/item`ã€?

æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼Œåœ¨æ§åˆ¶å™¨ä¸­ `app\controllers\PostController` è°ƒç”¨ `$this->render('view')`ï¼?å®é™…ä¸Šæ¸²æŸ?`@app/views/post/view.php` è§†å›¾æ–‡ä»¶ï¼Œå½“åœ¨è¯¥è§†å›¾æ–‡ä»¶ä¸­è°ƒç”?`$this->render('_overview')` ä¼šæ¸²æŸ?`@app/views/post/_overview.php` è§†å›¾æ–‡ä»¶ã€?

### è§†å›¾ä¸­è®¿é—®æ•°æ?

åœ¨è§†å›¾ä¸­æœ‰ä¸¤ç§æ–¹å¼è®¿é—®æ•°æ®ï¼šæ¨é€å’Œæ‹‰å–ã€?

æ¨é€æ–¹å¼æ˜¯é€šè¿‡è§†å›¾æ¸²æŸ“æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ•°æ®ï¼Œ æ•°æ®æ ¼å¼åº”ä¸ºåç§°-å€¼çš„æ•°ç»„ï¼?è§†å›¾æ¸²æŸ“æ—¶ï¼Œè°ƒç”¨PHP `extract()` æ–¹æ³•å°†è¯¥æ•°ç»„è½¬æ¢ä¸ºè§†å›¾å¯è®¿é—®çš„å˜é‡ã€?ä¾‹å¦‚ï¼Œå¦‚ä¸‹æ§åˆ¶å™¨çš„æ¸²æŸ“è§†å›¾ä»£ç æ¨é€?ä¸ªå˜é‡åˆ° `report` è§†å›¾ï¼š`$foo = 1` å’?`$bar = 2`ã€?

```php
echo $this->render('report', [
    'foo' => 1,
    'bar' => 2,
]);
```

æ‹‰å–æ–¹å¼å¯è®©è§†å›¾ä»[view component](https://www.yiiframework.com/doc/api/2.0/yii-base-view)è§†å›¾ç»„ä»¶æˆ–å…¶ä»–å¯¹è±¡ä¸­ä¸»åŠ¨è·å¾—æ•°æ®(å¦‚`Yii::$app`)ï¼?åœ¨è§†å›¾ä¸­ä½¿ç”¨å¦‚ä¸‹è¡¨è¾¾å¼`$this->context`å¯è·å–åˆ°æ§åˆ¶å™¨IDï¼?å¯è®©ä½ åœ¨`report`è§†å›¾ä¸­è·å–æ§åˆ¶å™¨çš„ä»»æ„å±æ€§æˆ–æ–¹æ³•ï¼?å¦‚ä»¥ä¸‹ä»£ç è·å–æ§åˆ¶å™¨IDã€?

```html
The controller ID is: <?= $this->context->id ?>
```

æ¨é€æ–¹å¼è®©è§†å›¾æ›´å°‘ä¾èµ–ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ˜¯è§†å›¾è·å–æ•°æ®ä¼˜å…ˆä½¿ç”¨æ–¹å¼ï¼Œ ç¼ºç‚¹æ˜¯éœ€è¦æ‰‹åŠ¨æ„å»ºæ•°ç»„ï¼Œæœ‰äº›ç¹çï¼?åœ¨ä¸åŒåœ°æ–¹æ¸²æŸ“æ—¶å®¹æ˜“å‡ºé”™ã€?

### è§†å›¾é—´å…±äº«æ•°æ?

[view component](https://www.yiiframework.com/doc/api/2.0/yii-base-view)è§†å›¾ç»„ä»¶æä¾›[params](https://www.yiiframework.com/doc/api/2.0/yii-base-view#$params-detail) å‚æ•°å±æ€§æ¥è®©ä¸åŒè§†å›¾å…±äº«æ•°æ®ã€?

ä¾‹å¦‚åœ¨`about`è§†å›¾ä¸­ï¼Œ å¯ä½¿ç”¨å¦‚ä¸‹ä»£ç æŒ‡å®šå½“å‰breadcrumbsçš„å½“å‰éƒ¨åˆ†ã€?

```php
$this->params['breadcrumbs'][] = 'About Us';
```

åœ¨[å¸ƒå±€](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts)æ–‡ä»¶ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªè§†å›¾ï¼‰ä¸­ï¼Œå¯ä½¿ç”¨ä¾æ¬¡åŠ å…¥åˆ°[params](https://www.yiiframework.com/doc/api/2.0/yii-base-view#$params-detail)æ•°ç»„çš„å€¼æ¥ ç”Ÿæˆæ˜¾ç¤ºbreadcrumbs:

```html
<?= yii\widgets\Breadcrumbs::widget([
    'links' => isset($this->params['breadcrumbs']) ? $this->params['breadcrumbs'] : [],
]) ?>
```

## å¸ƒå±€

å¸ƒå±€æ˜¯ä¸€ç§ç‰¹æ®Šçš„è§†å›¾ï¼Œä»£è¡¨å¤šä¸ªè§†å›¾çš„å…¬å…±éƒ¨åˆ†ï¼?ä¾‹å¦‚ï¼Œå¤§å¤šæ•°Webåº”ç”¨å…±äº«ç›¸åŒçš„é¡µå¤´å’Œé¡µå°¾ï¼?åœ¨æ¯ä¸ªè§†å›¾ä¸­é‡å¤ç›¸åŒçš„é¡µå¤´å’Œé¡µå°¾ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯å°†è¿™äº›å…¬å…±æ”¾åˆ°ä¸€ä¸ªå¸ƒå±€ä¸­ï¼Œ æ¸²æŸ“å†…å®¹è§†å›¾ååœ¨åˆé€‚çš„åœ°æ–¹åµŒå…¥åˆ°å¸ƒå±€ä¸­ã€?

### åˆ›å»ºå¸ƒå±€

ç”±äºå¸ƒå±€ä¹Ÿæ˜¯è§†å›¾ï¼Œå®ƒå¯åƒæ™®é€šè§†å›¾ä¸€æ ·åˆ›å»ºï¼Œå¸ƒå±€é»˜è®¤å­˜å‚¨åœ¨`@app/views/layouts`è·¯å¾„ä¸‹ï¼Œ [æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules)ä¸­ä½¿ç”¨çš„å¸ƒå±€åº”å­˜å‚¨åœ¨ [module directory](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail)æ¨¡å—ç›®å½• ä¸‹çš„`views/layouts`è·¯å¾„ä¸‹ï¼Œ å¯é…ç½®[yii\base\Module::$layoutPath](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail)æ¥è‡ªå®šä¹‰åº”ç”¨æˆ–æ¨¡å—çš„å¸ƒå±€é»˜è®¤è·¯å¾„ã€?

å¦‚ä¸‹ç¤ºä¾‹ä¸ºä¸€ä¸ªå¸ƒå±€å¤§è‡´å†…å®¹ï¼Œæ³¨æ„ä½œä¸ºç¤ºä¾‹ï¼Œç®€åŒ–äº†å¾ˆå¤šä»£ç ï¼?åœ¨å®é™…ä¸­ï¼Œä½ å¯èƒ½æƒ³æ·»åŠ æ›´å¤šå†…å®¹ï¼Œå¦‚å¤´éƒ¨æ ‡ç­¾ï¼Œä¸»èœå•ç­‰ã€?

```html
<?php
use yii\helpers\Html;

/**
 * @var \yii\web\View $this
 * @var string $content å­—ç¬¦ä¸?
 */
?>
<?php $this->beginPage() ?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <?= Html::csrfMetaTags() ?>
    <title><?= Html::encode($this->title) ?></title>
    <?php $this->head() ?>
</head>
<body>
<?php $this->beginBody() ?>
    <header>My Company</header>
    <?= $content ?>
    <footer>&copy; 2014 by My Company</footer>
<?php $this->endBody() ?>
</body>
</html>
<?php $this->endPage() ?>
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œå¸ƒå±€ç”Ÿæˆæ¯ä¸ªé¡µé¢é€šç”¨çš„HTMLæ ‡ç­¾ï¼Œåœ¨`<body>`æ ‡ç­¾ä¸­ï¼Œæ‰“å°`$content`å˜é‡ï¼?`$content`å˜é‡ä»£è¡¨å½“[yii\base\Controller::render()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail) æ§åˆ¶å™¨æ¸²æŸ“æ–¹æ³•è°ƒç”¨æ—¶ä¼ é€’åˆ°å¸ƒå±€çš„å†…å®¹è§†å›¾æ¸²æŸ“ç»“æœã€?

å¤§å¤šæ•°è§†å›¾åº”è°ƒç”¨ä¸Šè¿°ä»£ç ä¸­çš„å¦‚ä¸‹æ–¹æ³•ï¼?è¿™äº›æ–¹æ³•è§¦å‘å…³äºæ¸²æŸ“è¿‡ç¨‹çš„äº‹ä»¶ï¼Œ è¿™æ ·å…¶ä»–åœ°æ–¹æ³¨å†Œçš„è„šæœ¬å’Œæ ‡ç­¾ä¼šæ·»åŠ åˆ°è¿™äº›æ–¹æ³•è°ƒç”¨çš„åœ°æ–¹ã€?

- [beginPage()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginPage()-detail): è¯¥æ–¹æ³•åº”åœ¨å¸ƒå±€çš„å¼€å§‹å¤„è°ƒç”¨ï¼?å®ƒè§¦å‘è¡¨æ˜é¡µé¢å¼€å§‹çš„ [EVENT_BEGIN_PAGE](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEGIN_PAGE-detail) äº‹ä»¶ã€?
- [endPage()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#endPage()-detail): è¯¥æ–¹æ³•åº”åœ¨å¸ƒå±€çš„ç»“å°¾å¤„è°ƒç”¨ï¼?å®ƒè§¦å‘è¡¨æ˜é¡µé¢ç»“å°¾çš„ [EVENT_END_PAGE](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_END_PAGE-detail) äº‹ä»¶ã€?
- [head()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#head()-detail): è¯¥æ–¹æ³•åº”åœ¨HTMLé¡µé¢çš„`<head>`æ ‡ç­¾ä¸­è°ƒç”¨ï¼Œ å®ƒç”Ÿæˆä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨é¡µé¢æ¸²æŸ“ç»“æŸæ—¶ä¼šè¢«æ³¨å†Œçš„å¤´éƒ¨HTMLä»£ç  ï¼ˆå¦‚ï¼Œlinkæ ‡ç­¾, metaæ ‡ç­¾ï¼‰æ›¿æ¢ã€?
- [beginBody()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#beginBody()-detail): è¯¥æ–¹æ³•åº”åœ¨`<body>`æ ‡ç­¾çš„å¼€å§‹å¤„è°ƒç”¨ï¼?å®ƒè§¦å?[EVENT_BEGIN_BODY](https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_BEGIN_BODY-detail) äº‹ä»¶å¹¶ç”Ÿæˆä¸€ä¸ªå ä½ç¬¦ï¼?ä¼šè¢«æ³¨å†Œçš„HTMLä»£ç ï¼ˆå¦‚JavaScriptï¼‰åœ¨é¡µé¢ä¸»ä½“å¼€å§‹å¤„æ›¿æ¢ã€?
- [endBody()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#endBody()-detail): è¯¥æ–¹æ³•åº”åœ¨`<body>`æ ‡ç­¾çš„ç»“å°¾å¤„è°ƒç”¨ï¼?å®ƒè§¦å?[EVENT_END_BODY](https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_END_BODY-detail) äº‹ä»¶å¹¶ç”Ÿæˆä¸€ä¸ªå ä½ç¬¦ï¼?ä¼šè¢«æ³¨å†Œçš„HTMLä»£ç ï¼ˆå¦‚JavaScriptï¼‰åœ¨é¡µé¢ä¸»ä½“ç»“å°¾å¤„æ›¿æ¢ã€?

### å¸ƒå±€ä¸­è®¿é—®æ•°æ?

åœ¨å¸ƒå±€ä¸­å¯è®¿é—®ä¸¤ä¸ªé¢„å®šä¹‰å˜é‡ï¼š`$this` å’?`$content`ï¼?å‰è€…å¯¹åº”å’Œæ™®é€šè§†å›¾ç±»ä¼¼çš„[view](https://www.yiiframework.com/doc/api/2.0/yii-base-view) è§†å›¾ç»„ä»¶ åè€…åŒ…å«è°ƒç”¨[render()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail)æ–¹æ³•æ¸²æŸ“å†…å®¹è§†å›¾çš„ç»“æœã€?

å¦‚æœæƒ³åœ¨å¸ƒå±€ä¸­è®¿é—®å…¶ä»–æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨[è§†å›¾ä¸­è®¿é—®æ•°æ®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#accessing-data-in-views)ä¸€èŠ‚ä»‹ç»çš„æ‹‰å–æ–¹å¼ï¼?å¦‚æœæƒ³ä»å†…å®¹è§†å›¾ä¸­ä¼ é€’æ•°æ®åˆ°å¸ƒå±€ï¼?å¯ä½¿ç”¨[è§†å›¾é—´å…±äº«æ•°æ®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#sharing-data-among-views)ä¸€èŠ‚ä¸­çš„æ–¹æ³•ã€?

### ä½¿ç”¨å¸ƒå±€

å¦‚[æ§åˆ¶å™¨ä¸­æ¸²æŸ“](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#rendering-in-controllers)ä¸€èŠ‚æè¿°ï¼Œ å½“æ§åˆ¶å™¨è°ƒç”¨[render()](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail) æ–¹æ³•æ¸²æŸ“è§†å›¾æ—¶ï¼Œä¼šåŒæ—¶ä½¿ç”¨å¸ƒå±€åˆ°æ¸²æŸ“ç»“æœä¸­ï¼Œé»˜è®¤ä¼šä½¿ç”¨`@app/views/layouts/main.php`å¸ƒå±€æ–‡ä»¶ã€?

å¯é…ç½®[yii\base\Application::$layout](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$layout-detail) æˆ?[yii\base\Controller::$layout](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail) ä½¿ç”¨å…¶ä»–å¸ƒå±€æ–‡ä»¶ï¼?å‰è€…ç®¡ç†æ‰€æœ‰æ§åˆ¶å™¨çš„å¸ƒå±€ï¼Œåè€…è¦†ç›–å‰è€…æ¥æ§åˆ¶å•ä¸ªæ§åˆ¶å™¨å¸ƒå±€ã€?ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç ä½¿ `post` æ§åˆ¶å™¨æ¸²æŸ“è§†å›¾æ—¶ä½¿ç”¨ `@app/views/layouts/post.php` ä½œä¸ºå¸ƒå±€æ–‡ä»¶ï¼?å‡å¦‚ `layout` å±æ€§æ²¡æ”¹å˜ï¼?æ§åˆ¶å™¨é»˜è®¤ä½¿ç”?`@app/views/layouts/main.php` ä½œä¸ºå¸ƒå±€æ–‡ä»¶ã€?

```php
namespace app\controllers;

use yii\web\Controller;

class PostController extends Controller
{
    public $layout = 'post';
    
    // ...
}
```

å¯¹äºæ¨¡å—ä¸­çš„æ§åˆ¶å™¨ï¼Œå¯é…ç½®æ¨¡å—çš„ [layout](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail) å±æ€§æŒ‡å®šå¸ƒå±€æ–‡ä»¶åº”ç”¨åˆ°æ¨¡å—çš„æ‰€æœ‰æ§åˆ¶å™¨ã€?

ç”±äº`layout` å¯åœ¨ä¸åŒå±‚çº§ï¼ˆæ§åˆ¶å™¨ã€æ¨¡å—ï¼Œåº”ç”¨ï¼‰é…ç½®ï¼Œ åœ¨å¹•åYiiä½¿ç”¨ä¸¤æ­¥æ¥å†³å®šæ§åˆ¶å™¨å®é™…ä½¿ç”¨çš„å¸ƒå±€ã€?

ç¬¬ä¸€æ­¥ï¼Œå®ƒå†³å®šå¸ƒå±€çš„å€¼å’Œä¸Šä¸‹æ–‡æ¨¡å—ï¼š

- å¦‚æœæ§åˆ¶å™¨çš„ [yii\base\Controller::$layout](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail) å±æ€§ä¸ä¸ºç©ºnullï¼Œä½¿ç”¨å®ƒä½œä¸ºå¸ƒå±€çš„å€¼ï¼Œ æ§åˆ¶å™¨çš„ [module](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$module-detail)æ¨¡å— ä½œä¸ºä¸Šä¸‹æ–‡æ¨¡å—ã€?
- å¦‚æœ [layout](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail) ä¸ºç©ºï¼Œä»æ§åˆ¶å™¨çš„ç¥–å…ˆæ¨¡å—ï¼ˆåŒ…æ‹¬åº”ç”¨ï¼‰ å¼€å§‹æ‰¾ ç¬¬ä¸€ä¸ª[layout](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail) å±æ€§ä¸ä¸ºç©ºçš„æ¨¡å—ï¼Œä½¿ç”¨è¯¥æ¨¡å—ä½œä¸ºä¸Šä¸‹æ–‡æ¨¡å—ï¼?å¹¶å°†å®ƒçš„[layout](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail) çš„å€¼ä½œä¸ºå¸ƒå±€çš„å€¼ï¼Œ å¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œè¡¨ç¤ºä¸ä½¿ç”¨å¸ƒå±€ã€?

ç¬¬äºŒæ­¥ï¼Œå®ƒå†³å®šç¬¬ä¸€æ­¥ä¸­å¸ƒå±€çš„å€¼å’Œä¸Šä¸‹æ–‡æ¨¡å—å¯¹åº”åˆ°å®é™…çš„å¸ƒå±€æ–‡ä»¶ï¼?å¸ƒå±€çš„å€¼å¯ä¸ºï¼š

- è·¯å¾„åˆ«å (å¦?`@app/views/layouts/main`).
- ç»å¯¹è·¯å¾„ (å¦?`/main`): å¸ƒå±€çš„å€¼ä»¥æ–œæ å¼€å§‹ï¼Œ åœ¨åº”ç”¨çš„[layout path](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail) å¸ƒå±€è·¯å¾„ ä¸­æŸ¥æ‰¾å®é™…çš„å¸ƒå±€æ–‡ä»¶ï¼Œå¸ƒå±€è·¯å¾„é»˜è®¤ä¸?`@app/views/layouts`ã€?
- ç›¸å¯¹è·¯å¾„ (å¦?`main`): åœ¨ä¸Šä¸‹æ–‡æ¨¡å—çš„[layout path](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail)å¸ƒå±€è·¯å¾„ä¸­æŸ¥æ‰¾å®é™…çš„å¸ƒå±€æ–‡ä»¶ï¼?å¸ƒå±€è·¯å¾„é»˜è®¤ä¸º[module directory](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail) æ¨¡å—ç›®å½•ä¸‹çš„`views/layouts` ç›®å½•ã€?
- å¸ƒå°”å€?`false`: ä¸ä½¿ç”¨å¸ƒå±€ã€?

å¸ƒå±€çš„å€¼æ²¡æœ‰åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œé»˜è®¤ä½¿ç”?`.php`ä½œä¸ºæ‰©å±•åã€?

### åµŒå¥—å¸ƒå±€

æœ‰æ—¶å€™ä½ æƒ³åµŒå¥—ä¸€ä¸ªå¸ƒå±€åˆ°å¦ä¸€ä¸ªï¼Œä¾‹å¦‚ï¼Œåœ¨Webç«™ç‚¹ä¸åŒåœ°æ–¹ï¼Œæƒ³ä½¿ç”¨ä¸åŒçš„å¸ƒå±€ï¼?åŒæ—¶è¿™äº›å¸ƒå±€å…±äº«ç›¸åŒçš„ç”Ÿæˆå…¨å±€HTML5é¡µé¢ç»“æ„çš„åŸºæœ¬å¸ƒå±€ï¼Œå¯ä»¥åœ¨å­å¸ƒå±€ä¸­è°ƒç”?[beginContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail) å’Œ[endContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#endContent()-detail) æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```php
<?php $this->beginContent('@app/views/layouts/base.php'); ?>

...child layout content here...

<?php $this->endContent(); ?>
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œå­å¸ƒå±€å†…å®¹åº”åœ¨ [beginContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail) å’?[endContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#endContent()-detail) æ–¹æ³•ä¹‹é—´ï¼Œä¼ ç»?[beginContent()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail) çš„å‚æ•°æŒ‡å®šçˆ¶å¸ƒå±€ï¼Œçˆ¶å¸ƒå±€å¯ä¸ºå¸ƒå±€æ–‡ä»¶æˆ–åˆ«åã€?

ä½¿ç”¨ä»¥ä¸Šæ–¹å¼å¯å¤šå±‚åµŒå¥—å¸ƒå±€ã€?

### ä½¿ç”¨æ•°æ®å?

æ•°æ®å—å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹æŒ‡å®šè§†å›¾å†…å®¹åœ¨å¦ä¸€ä¸ªåœ°æ–¹æ˜¾ç¤ºï¼Œé€šå¸¸å’Œå¸ƒå±€ä¸€èµ·ä½¿ç”¨ï¼Œ ä¾‹å¦‚ï¼Œå¯åœ¨å†…å®¹è§†å›¾ä¸­å®šä¹‰æ•°æ®å—åœ¨å¸ƒå±€ä¸­æ˜¾ç¤ºå®ƒã€?

è°ƒç”¨ [beginBlock()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginBlock()-detail) å’?[endBlock()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#endBlock()-detail) æ¥å®šä¹‰æ•°æ®å—ï¼?ä½¿ç”¨ `$view->blocks[$blockID]` è®¿é—®è¯¥æ•°æ®å—ï¼?å…¶ä¸­ `$blockID` ä¸ºå®šä¹‰æ•°æ®å—æ—¶æŒ‡å®šçš„å”¯ä¸€æ ‡è¯†IDã€?

å¦‚ä¸‹å®ä¾‹æ˜¾ç¤ºå¦‚ä½•åœ¨å†…å®¹è§†å›¾ä¸­ä½¿ç”¨æ•°æ®å—è®©å¸ƒå±€ä½¿ç”¨ã€?

é¦–å…ˆï¼Œåœ¨å†…å®¹è§†å›¾ä¸­å®šä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—ï¼š

```php
...

<?php $this->beginBlock('block1'); ?>

...content of block1...

<?php $this->endBlock(); ?>

...

<?php $this->beginBlock('block3'); ?>

...content of block3...

<?php $this->endBlock(); ?>
```

ç„¶åï¼Œåœ¨å¸ƒå±€è§†å›¾ä¸­ï¼Œæ•°æ®å—å¯ç”¨çš„è¯ä¼šæ¸²æŸ“æ•°æ®å—ï¼Œ å¦‚æœæ•°æ®æœªå®šä¹‰åˆ™æ˜¾ç¤ºä¸€äº›é»˜è®¤å†…å®¹ã€?

```html
...
<?php if (isset($this->blocks['block1'])): ?>
    <?= $this->blocks['block1'] ?>
<?php else: ?>
    ... default content for block1 ...
<?php endif; ?>

...

<?php if (isset($this->blocks['block2'])): ?>
    <?= $this->blocks['block2'] ?>
<?php else: ?>
    ... default content for block2 ...
<?php endif; ?>

...

<?php if (isset($this->blocks['block3'])): ?>
    <?= $this->blocks['block3'] ?>
<?php else: ?>
    ... default content for block3 ...
<?php endif; ?>
...
```

## ä½¿ç”¨è§†å›¾ç»„ä»¶

[View components](https://www.yiiframework.com/doc/api/2.0/yii-base-view)è§†å›¾ç»„ä»¶æä¾›è®¸å¤šè§†å›¾ç›¸å…³ç‰¹æ€§ï¼Œ å¯åˆ›å»º[yii\base\View](https://www.yiiframework.com/doc/api/2.0/yii-base-view)æˆ–å®ƒçš„å­ç±»å®ä¾‹æ¥è·å–è§†å›¾ç»„ä»¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸»è¦ä½¿ç”?`view` åº”ç”¨ç»„ä»¶ï¼?å¯åœ¨[åº”ç”¨é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#application-configurations)ä¸­é…ç½®è¯¥ç»„ä»¶ï¼?å¦‚ä¸‹æ‰€ç¤ºï¼š

```php
[
    // ...
    'components' => [
        'view' => [
            'class' => 'app\components\View',
        ],
        // ...
    ],
]
```

è§†å›¾ç»„ä»¶æä¾›å¦‚ä¸‹å®ç”¨çš„è§†å›¾ç›¸å…³ç‰¹æ€§ï¼Œæ¯é¡¹è¯¦æƒ…ä¼šåœ¨ç‹¬ç«‹ç« èŠ‚ä¸­ä»‹ç»ï¼š

- [ä¸»é¢˜](https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-theming): å…è®¸ä¸ºä½ çš„Webç«™ç‚¹å¼€å‘å’Œä¿®æ”¹ä¸»é¢˜ï¼?
- [ç‰‡æ®µç¼“å­˜](https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-fragment): å…è®¸ä½ åœ¨Webé¡µé¢ä¸­ç¼“å­˜ç‰‡æ®µï¼›
- [å®¢æˆ·è„šæœ¬å¤„ç†](https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-client-scripts): æ”¯æŒCSS å’?JavaScript æ³¨å†Œå’Œæ¸²æŸ“ï¼›
- [èµ„æºåŒ…å¤„ç†](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-assets): æ”¯æŒ [èµ„æºåŒ…](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-assets)çš„æ³¨å†Œå’Œæ¸²æŸ“ï¼?
- [æ¨¡æ¿å¼•æ“](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-template-engines): å…è®¸ä½ ä½¿ç”¨å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œå¦?[Twig](https://twig.symfony.com/), [Smarty](https://www.smarty.net/)ã€?

å¼€å‘Webé¡µé¢æ—¶ï¼Œä¹Ÿå¯èƒ½é¢‘ç¹ä½¿ç”¨ä»¥ä¸‹å®ç”¨çš„å°ç‰¹æ€§ã€?

### è®¾ç½®é¡µé¢æ ‡é¢˜

æ¯ä¸ªWebé¡µé¢åº”æœ‰ä¸€ä¸ªæ ‡é¢˜ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ ‡é¢˜çš„æ ‡ç­¾æ˜¾ç¤ºåœ?[å¸ƒå±€](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts)ä¸­ï¼Œ ä½†æ˜¯å®é™…ä¸Šæ ‡é¢˜å¤§å¤šç”±å†…å®¹è§†å›¾è€Œä¸æ˜¯å¸ƒå±€æ¥å†³å®šï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ [yii\web\View](https://www.yiiframework.com/doc/api/2.0/yii-web-view) æä¾› [title](https://www.yiiframework.com/doc/api/2.0/yii-web-view#$title-detail) æ ‡é¢˜å±æ€§å¯è®©æ ‡é¢˜ä¿¡æ¯ä»å†…å®¹è§†å›¾ä¼ é€’åˆ°å¸ƒå±€ä¸­ã€?

ä¸ºåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨æ¯ä¸ªå†…å®¹è§†å›¾ä¸­è®¾ç½®é¡µé¢æ ‡é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```php
<?php
$this->title = 'My page title';
?>
```

ç„¶ååœ¨è§†å›¾ä¸­ï¼Œç¡®ä¿åœ¨ `<head>` æ®µä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š

```html
<title><?= Html::encode($this->title) ?></title>
```

### æ³¨å†ŒMetaå…ƒæ ‡ç­?

Webé¡µé¢é€šå¸¸éœ€è¦ç”Ÿæˆå„ç§å…ƒæ ‡ç­¾æä¾›ç»™ä¸åŒçš„æµè§ˆå™¨ï¼Œ å¦‚`<head>`ä¸­çš„é¡µé¢æ ‡é¢˜ï¼Œå…ƒæ ‡ç­¾é€šå¸¸åœ¨å¸ƒå±€ä¸­ç”Ÿæˆã€?

å¦‚æœæƒ³åœ¨å†…å®¹è§†å›¾ä¸­ç”Ÿæˆå…ƒæ ‡ç­¾ï¼Œå¯åœ¨å†…å®¹è§†å›¾ä¸­è°ƒç”¨[yii\web\View::registerMetaTag()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail)æ–¹æ³•ï¼?å¦‚ä¸‹æ‰€ç¤ºï¼š

```php
<?php
$this->registerMetaTag(['name' => 'keywords', 'content' => 'yii, framework, php']);
?>
```

ä»¥ä¸Šä»£ç ä¼šåœ¨è§†å›¾ç»„ä»¶ä¸­æ³¨å†Œä¸€ä¸?"keywords" å…ƒæ ‡ç­¾ï¼Œ åœ¨å¸ƒå±€æ¸²æŸ“åä¼šæ¸²æŸ“è¯¥æ³¨å†Œçš„å…ƒæ ‡ç­¾ï¼Œ ç„¶åï¼Œå¦‚ä¸‹HTMLä»£ç ä¼šæ’å…¥åˆ°å¸ƒå±€ä¸­è°ƒç”¨[yii\web\View::head()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#head()-detail)æ–¹æ³•å¤„ï¼š

```php
<meta name="keywords" content="yii, framework, php">
```

æ³¨æ„å¦‚æœå¤šæ¬¡è°ƒç”¨ [yii\web\View::registerMetaTag()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail) æ–¹æ³•ï¼?å®ƒä¼šæ³¨å†Œå¤šä¸ªå…ƒæ ‡ç­¾ï¼Œæ³¨å†Œæ—¶ä¸ä¼šæ£€æŸ¥æ˜¯å¦é‡å¤ã€?

ä¸ºç¡®ä¿æ¯ç§å…ƒæ ‡ç­¾åªæœ‰ä¸€ä¸ªï¼Œå¯åœ¨è°ƒç”¨æ–¹æ³•æ—¶æŒ‡å®šé”®ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œ ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç æ³¨å†Œä¸¤æ¬?"description" å…ƒæ ‡ç­¾ï¼Œä½†æ˜¯åªä¼šæ¸²æŸ“ç¬¬äºŒä¸ªã€?

```html
$this->registerMetaTag(['name' => 'description', 'content' => 'This is my cool website made with Yii!'], 'description');
$this->registerMetaTag(['name' => 'description', 'content' => 'This website is about funny raccoons.'], 'description');
```

### æ³¨å†Œé“¾æ¥æ ‡ç­¾

å’?[Metaæ ‡ç­¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#adding-meta-tags) ç±»ä¼¼ï¼Œé“¾æ¥æ ‡ç­¾æœ‰æ—¶å¾ˆå®ç”¨ï¼Œå¦‚è‡ªå®šä¹‰ç½‘ç«™å›¾æ ‡ï¼ŒæŒ‡å®šRssè®¢é˜…ï¼Œæˆ–æˆæƒOpenIDåˆ°å…¶ä»–æœåŠ¡å™¨ã€?å¯ä»¥å’Œå…ƒæ ‡ç­¾ç›¸ä¼¼çš„æ–¹å¼è°ƒç”¨[yii\web\View::registerLinkTag()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerLinkTag()-detail)ï¼?ä¾‹å¦‚ï¼Œåœ¨å†…å®¹è§†å›¾ä¸­æ³¨å†Œé“¾æ¥æ ‡ç­¾å¦‚ä¸‹æ‰€ç¤ºï¼š

```php
$this->registerLinkTag([
    'title' => 'Live News for Yii',
    'rel' => 'alternate',
    'type' => 'application/rss+xml',
    'href' => 'https://www.yiiframework.com/rss.xml/',
]);
```

ä¸Šè¿°ä»£ç ä¼šè½¬æ¢æˆ

```html
<link title="Live News for Yii" rel="alternate" type="application/rss+xml" href="https://www.yiiframework.com/rss.xml/">
```

å’?[registerMetaTags()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail) ç±»ä¼¼ï¼?è°ƒç”¨[registerLinkTag()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerLinkTag()-detail) æŒ‡å®šé”®æ¥é¿å…ç”Ÿæˆé‡å¤é“¾æ¥æ ‡ç­¾ã€?

## è§†å›¾äº‹ä»¶

[View components](https://www.yiiframework.com/doc/api/2.0/yii-base-view) è§†å›¾ç»„ä»¶ä¼šåœ¨è§†å›¾æ¸²æŸ“è¿‡ç¨‹ä¸­è§¦å‘å‡ ä¸ªäº‹ä»¶ï¼Œ å¯ä»¥åœ¨å†…å®¹å‘é€ç»™ç»ˆç«¯ç”¨æˆ·å‰ï¼Œå“åº”è¿™äº›äº‹ä»¶æ¥æ·»åŠ å†…å®¹åˆ°è§†å›¾ä¸­æˆ–è°ƒæ•´æ¸²æŸ“ç»“æœã€?

- [EVENT_BEFORE_RENDER](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEFORE_RENDER-detail): åœ¨æ§åˆ¶å™¨æ¸²æŸ“æ–‡ä»¶å¼€å§‹æ—¶è§¦å‘ï¼?è¯¥äº‹ä»¶å¯è®¾ç½® [yii\base\ViewEvent::$isValid](https://www.yiiframework.com/doc/api/2.0/yii-base-viewevent#$isValid-detail) ä¸?false å–æ¶ˆè§†å›¾æ¸²æŸ“ã€?
- [EVENT_AFTER_RENDER](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_AFTER_RENDER-detail): åœ¨å¸ƒå±€ä¸­è°ƒç”?[yii\base\View::afterRender()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#afterRender()-detail) æ—¶è§¦å‘ï¼Œ è¯¥äº‹ä»¶å¯è·å–[yii\base\ViewEvent::$output](https://www.yiiframework.com/doc/api/2.0/yii-base-viewevent#$output-detail)çš„æ¸²æŸ“ç»“æœï¼Œ å¯ä¿®æ”¹è¯¥å±æ€§æ¥ä¿®æ”¹æ¸²æŸ“ç»“æœã€?
- [EVENT_BEGIN_PAGE](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEGIN_PAGE-detail): åœ¨å¸ƒå±€è°ƒç”¨ [yii\base\View::beginPage()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginPage()-detail) æ—¶è§¦å‘ï¼›
- [EVENT_END_PAGE](https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_END_PAGE-detail): åœ¨å¸ƒå±€è°ƒç”¨ [yii\base\View::endPage()](https://www.yiiframework.com/doc/api/2.0/yii-base-view#endPage()-detail) æ˜¯è§¦å‘ï¼›
- [EVENT_BEGIN_BODY](https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_BEGIN_BODY-detail): åœ¨å¸ƒå±€è°ƒç”¨ [yii\web\View::beginBody()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#beginBody()-detail) æ—¶è§¦å‘ï¼›
- [EVENT_END_BODY](https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_END_BODY-detail): åœ¨å¸ƒå±€è°ƒç”¨ [yii\web\View::endBody()](https://www.yiiframework.com/doc/api/2.0/yii-web-view#endBody()-detail) æ—¶è§¦å‘ã€?

ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç å°†å½“å‰æ—¥æœŸæ·»åŠ åˆ°é¡µé¢ç»“å°¾å¤„ï¼?

```php
\Yii::$app->view->on(View::EVENT_END_BODY, function () {
    echo date('Y-m-d');
});
```

## æ¸²æŸ“é™æ€é¡µé?

é™æ€é¡µé¢æŒ‡çš„æ˜¯å¤§éƒ¨åˆ†å†…å®¹ä¸ºé™æ€çš„ä¸éœ€è¦æ§åˆ¶å™¨ä¼ é€?åŠ¨æ€æ•°æ®çš„Webé¡µé¢ã€?

å¯å°†HTMLä»£ç æ”¾ç½®åœ¨è§†å›¾ä¸­ï¼Œåœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ä»¥ä¸‹ä»£ç è¾“å‡ºé™æ€é¡µé¢ï¼š

```php
public function actionAbout()
{
    return $this->render('about');
}
```

å¦‚æœWebç«™ç‚¹åŒ…å«å¾ˆå¤šé™æ€é¡µé¢ï¼Œå¤šæ¬¡é‡å¤ç›¸ä¼¼çš„ä»£ç æ˜¾å¾—å¾ˆç¹çï¼?ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåœ¨æ§åˆ¶å™¨ä¸­ç§°ä¸º [yii\web\ViewAction](https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction) çš„[ç‹¬ç«‹åŠ¨ä½œ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#standalone-actions)ã€?ä¾‹å¦‚ï¼?

```php
namespace app\controllers;

use yii\web\Controller;

class SiteController extends Controller
{
    public function actions()
    {
        return [
            'page' => [
                'class' => 'yii\web\ViewAction',
            ],
        ];
    }
}
```

ç°åœ¨å¦‚æœä½ åœ¨`@app/views/site/pages`ç›®å½•ä¸‹åˆ›å»ºåä¸?`about` çš„è§†å›¾ï¼Œ å¯é€šè¿‡å¦‚ä¸‹urlæ˜¾ç¤ºè¯¥è§†å›¾ï¼š

```
http://localhost/index.php?r=site/page&view=about
```

`GET` ä¸?`view` å‚æ•°å‘ŠçŸ¥ [yii\web\ViewAction](https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction) åŠ¨ä½œè¯·æ±‚å“ªä¸ªè§†å›¾ï¼Œç„¶åæ“ä½œåœ¨ `@app/views/site/pages`ç›®å½•ä¸‹å¯»æ‰¾è¯¥è§†å›¾ï¼Œå¯é…ç½® [yii\web\ViewAction::$viewPrefix](https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction#$viewPrefix-detail) ä¿®æ”¹æœç´¢è§†å›¾çš„ç›®å½•ã€?

## æœ€ä½³å®è·?

è§†å›¾è´Ÿè´£å°†æ¨¡å‹çš„æ•°æ®å±•ç¤ºç”¨æˆ·æƒ³è¦çš„æ ¼å¼ï¼Œæ€»ä¹‹ï¼Œè§†å›?

- åº”ä¸»è¦åŒ…å«å±•ç¤ºä»£ç ï¼Œå¦‚HTML, å’Œç®€å•çš„PHPä»£ç æ¥æ§åˆ¶ã€æ ¼å¼åŒ–å’Œæ¸²æŸ“æ•°æ®ï¼›
- ä¸åº”åŒ…å«æ‰§è¡Œæ•°æ®æŸ¥è¯¢ä»£ç ï¼Œè¿™ç§ä»£ç æ”¾åœ¨æ¨¡å‹ä¸­ï¼?
- åº”é¿å…ç›´æ¥è®¿é—®è¯·æ±‚æ•°æ®ï¼Œå¦?`$_GET`, `$_POST`ï¼Œè¿™ç§åº”åœ¨æ§åˆ¶å™¨ä¸­æ‰§è¡Œï¼Œ å¦‚æœéœ€è¦è¯·æ±‚æ•°æ®ï¼Œåº”ç”±æ§åˆ¶å™¨æ¨é€åˆ°è§†å›¾ã€?
- å¯è¯»å–æ¨¡å‹å±æ€§ï¼Œä½†ä¸åº”ä¿®æ”¹å®ƒä»¬ã€?

ä¸ºä½¿æ¨¡å‹æ›´æ˜“äºç»´æŠ¤ï¼Œé¿å…åˆ›å»ºå¤ªå¤æ‚æˆ–åŒ…å«å¤ªå¤šå†—ä½™ä»£ç çš„è§†å›¾ï¼Œ å¯éµå¾ªä»¥ä¸‹æ–¹æ³•è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼š

- ä½¿ç”¨ [å¸ƒå±€](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts) æ¥å±•ç¤ºå…¬å…±ä»£ç ï¼ˆå¦‚ï¼Œé¡µé¢å¤´éƒ¨ã€å°¾éƒ¨ï¼‰ï¼?
- å°†å¤æ‚çš„è§†å›¾åˆ†æˆå‡ ä¸ªå°è§†å›¾ï¼Œå¯ä½¿ç”¨ä¸Šé¢æè¿°çš„æ¸²æŸ“æ–¹æ³•å°†è¿™äº?å°è§†å›¾æ¸²æŸ“å¹¶ç»„è£…æˆå¤§è§†å›¾ï¼?
- åˆ›å»ºå¹¶ä½¿ç”?[å°éƒ¨ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets) ä½œä¸ºè§†å›¾çš„æ•°æ®å—ï¼?
- åˆ›å»ºå¹¶ä½¿ç”¨åŠ©æ‰‹ç±»åœ¨è§†å›¾ä¸­è½¬æ¢å’Œæ ¼å¼åŒ–æ•°æ®ã€?
