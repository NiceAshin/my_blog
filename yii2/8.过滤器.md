---
title: è¿‡æ»¤å™?
date: 2026-02-27
tags:
  - Yii2
  - PHP
categories:
  - PHPæ¡†æ¶æ¢ç´¢
prev: 7.è§†å›¾
next: ./10.å°éƒ¨ä»?md
---

# è¿‡æ»¤å™?

è¿‡æ»¤å™¨æ˜¯ [æ§åˆ¶å™¨åŠ¨ä½œ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#actions) æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œçš„å¯¹è±¡ã€?ä¾‹å¦‚è®¿é—®æ§åˆ¶è¿‡æ»¤å™¨å¯åœ¨åŠ¨ä½œæ‰§è¡Œä¹‹å‰æ¥æ§åˆ¶ç‰¹æ®Šç»ˆç«¯ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒåŠ¨ä½œï¼Œ å†…å®¹å‹ç¼©è¿‡æ»¤å™¨å¯åœ¨åŠ¨ä½œæ‰§è¡Œä¹‹åå‘ç»™ç»ˆç«¯ç”¨æˆ·ä¹‹å‰å‹ç¼©å“åº”å†…å®¹ã€?

è¿‡æ»¤å™¨å¯åŒ…å«é¢„è¿‡æ»¤ï¼ˆè¿‡æ»¤é€»è¾‘åœ¨åŠ¨ä½?ä¹‹å‰*ï¼‰æˆ–åè¿‡æ»¤ï¼ˆè¿‡æ»¤é€»è¾‘åœ¨åŠ¨ä½?ä¹‹å*ï¼‰ï¼Œ ä¹Ÿå¯åŒæ—¶åŒ…å«ä¸¤è€…ã€?

## ä½¿ç”¨è¿‡æ»¤å™?

è¿‡æ»¤å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ç±»ç‰¹æ®Šçš„ [è¡Œä¸º](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-behaviors)ï¼?æ‰€ä»¥ä½¿ç”¨è¿‡æ»¤å™¨å’?[ä½¿ç”¨è¡Œä¸º](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-behaviors#attaching-behaviors)ä¸€æ ·ã€?å¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸­è¦†ç›–å®ƒçš„ [behaviors()](https://www.yiiframework.com/doc/api/2.0/yii-base-component#behaviors()-detail) æ–¹æ³•æ¥å£°æ˜è¿‡æ»¤å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```php
public function behaviors()
{
    return [
        [
            'class' => 'yii\filters\HttpCache',
            'only' => ['index', 'view'],
            'lastModified' => function ($action, $params) {
                $q = new \yii\db\Query();
                return $q->from('user')->max('updated_at');
            },
        ],
    ];
}
```

æ§åˆ¶å™¨ç±»çš„è¿‡æ»¤å™¨é»˜è®¤åº”ç”¨åˆ°è¯¥ç±»çš„ *æ‰€æœ? åŠ¨ä½œï¼?ä½ å¯ä»¥é…ç½?[only](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$only-detail) å±æ€§æ˜ç¡®æŒ‡å®šæ§åˆ¶å™¨åº”ç”¨åˆ°å“ªäº›åŠ¨ä½œã€?åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ`HttpCache` è¿‡æ»¤å™¨åªåº”ç”¨åˆ?`index` å’?`view` åŠ¨ä½œã€?ä¹Ÿå¯ä»¥é…ç½?[except](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$except-detail) å±æ€?ä½¿ä¸€äº›åŠ¨ä½œä¸æ‰§è¡Œè¿‡æ»¤å™¨ã€?

é™¤äº†æ§åˆ¶å™¨å¤–ï¼Œå¯åœ?[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules)æˆ–[åº”ç”¨ä¸»ä½“](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications) ä¸­ç”³æ˜è¿‡æ»¤å™¨ã€?ç”³æ˜ä¹‹åï¼Œè¿‡æ»¤å™¨ä¼šåº”ç”¨åˆ°æ‰€å±è¯¥æ¨¡å—æˆ–åº”ç”¨ä¸»ä½“çš„ *æ‰€æœ? æ§åˆ¶å™¨åŠ¨ä½œï¼Œ é™¤éåƒä¸Šè¿°ä¸€æ ·é…ç½®è¿‡æ»¤å™¨çš?[only](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$only-detail) å’?[except](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$except-detail) å±æ€§ã€?

> **æ³¨æ„ï¼?* åœ¨æ¨¡å—æˆ–åº”ç”¨ä¸»ä½“ä¸­ç”³æ˜è¿‡æ»¤å™¨ï¼Œåœ¨[only](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$only-detail) å’?[except](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#$except-detail) å±æ€§ä¸­ä½¿ç”¨[è·¯ç”±](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#routes) ä»£æ›¿åŠ¨ä½œ IDï¼?å› ä¸ºåœ¨æ¨¡å—æˆ–åº”ç”¨ä¸»ä½“ä¸­åªç”¨åŠ¨ä½œIDå¹¶ä¸èƒ½å”¯ä¸€æŒ‡å®šåˆ°å…·ä½“åŠ¨ä½œã€?

å½“ä¸€ä¸ªåŠ¨ä½œæœ‰å¤šä¸ªè¿‡æ»¤å™¨æ—¶ï¼Œæ ¹æ®ä»¥ä¸‹è§„åˆ™å…ˆåæ‰§è¡Œï¼š

- é¢„è¿‡æ»?
  - æŒ‰é¡ºåºæ‰§è¡Œåº”ç”¨ä¸»ä½“ä¸­ `behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?
  - æŒ‰é¡ºåºæ‰§è¡Œæ¨¡å—ä¸­ `behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?
  - æŒ‰é¡ºåºæ‰§è¡Œæ§åˆ¶å™¨ä¸?`behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?
  - å¦‚æœä»»æ„è¿‡æ»¤å™¨ç»ˆæ­¢åŠ¨ä½œæ‰§è¡Œï¼Œ åé¢çš„è¿‡æ»¤å™¨ï¼ˆåŒ…æ‹¬é¢„è¿‡æ»¤å’Œåè¿‡æ»¤ï¼‰ä¸å†æ‰§è¡Œã€?
- æˆåŠŸé€šè¿‡é¢„è¿‡æ»¤åæ‰§è¡ŒåŠ¨ä½œã€?
- åè¿‡æ»?
  - å€’åºæ‰§è¡Œæ§åˆ¶å™¨ä¸­ `behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?
  - å€’åºæ‰§è¡Œæ¨¡å—ä¸?`behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?
  - å€’åºæ‰§è¡Œåº”ç”¨ä¸»ä½“ä¸?`behaviors()` åˆ—å‡ºçš„è¿‡æ»¤å™¨ã€?

## åˆ›å»ºè¿‡æ»¤å™?

ç»§æ‰¿ [yii\base\ActionFilter](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter) ç±»å¹¶è¦†ç›– [beforeAction()](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#beforeAction()-detail) æˆ?[afterAction()](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#afterAction()-detail) æ–¹æ³•æ¥åˆ›å»ºåŠ¨ä½œçš„è¿‡æ»¤å™¨ï¼Œå‰è€…åœ¨åŠ¨ä½œæ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œåè€…åœ¨åŠ¨ä½œæ‰§è¡Œä¹‹åæ‰§è¡Œã€?[beforeAction()](https://www.yiiframework.com/doc/api/2.0/yii-base-actionfilter#beforeAction()-detail) è¿”å›å€¼å†³å®šåŠ¨ä½œæ˜¯å¦åº”è¯¥æ‰§è¡Œï¼Œ å¦‚æœä¸?falseï¼Œä¹‹åçš„è¿‡æ»¤å™¨å’ŒåŠ¨ä½œä¸ä¼šç»§ç»­æ‰§è¡Œã€?

ä¸‹é¢çš„ä¾‹å­ç”³æ˜ä¸€ä¸ªè®°å½•åŠ¨ä½œæ‰§è¡Œæ—¶é—´æ—¥å¿—çš„è¿‡æ»¤å™¨ã€?

```php
namespace app\components;

use Yii;
use yii\base\ActionFilter;

class ActionTimeFilter extends ActionFilter
{
    private $_startTime;

    public function beforeAction($action)
    {
        $this->_startTime = microtime(true);
        return parent::beforeAction($action);
    }

    public function afterAction($action, $result)
    {
        $time = microtime(true) - $this->_startTime;
        Yii::debug("Action '{$action->uniqueId}' spent $time second.");
        return parent::afterAction($action, $result);
    }
}
```

## æ ¸å¿ƒè¿‡æ»¤å™?

Yii æä¾›äº†ä¸€ç»„å¸¸ç”¨è¿‡æ»¤å™¨ï¼Œåœ¨ `yii\filters` å‘½åç©ºé—´ä¸‹ï¼Œ æ¥ä¸‹æ¥æˆ‘ä»¬ç®€è¦ä»‹ç»è¿™äº›è¿‡æ»¤å™¨ã€?

### [AccessControl](https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol)

AccessControl æä¾›åŸºäº [rules](https://www.yiiframework.com/doc/api/2.0/yii-filters-accesscontrol#$rules-detail) è§„åˆ™çš„è®¿é—®æ§åˆ¶ã€?ç‰¹åˆ«æ˜¯åœ¨åŠ¨ä½œæ‰§è¡Œä¹‹å‰ï¼Œè®¿é—®æ§åˆ¶ä¼šæ£€æµ‹æ‰€æœ‰è§„åˆ?å¹¶æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆä¸Šä¸‹æ–‡çš„å˜é‡ï¼ˆæ¯”å¦‚ç”¨æˆ· IP åœ°å€ã€ç™»å½•çŠ¶æ€ç­‰ç­‰ï¼‰çš„è§„åˆ™ï¼Œ æ¥å†³å®šå…è®¸è¿˜æ˜¯æ‹’ç»è¯·æ±‚åŠ¨ä½œçš„æ‰§è¡Œï¼?å¦‚æœæ²¡æœ‰è§„åˆ™ç¬¦åˆï¼Œè®¿é—®å°±ä¼šè¢«æ‹’ç»ã€?

å¦‚ä¸‹ç¤ºä¾‹è¡¨ç¤ºè¡¨ç¤ºå…è®¸å·²è®¤è¯ç”¨æˆ·è®¿é—?`create` å’?`update` åŠ¨ä½œï¼?æ‹’ç»å…¶ä»–ç”¨æˆ·è®¿é—®è¿™ä¸¤ä¸ªåŠ¨ä½œã€?

```php
use yii\filters\AccessControl;

public function behaviors()
{
    return [
        'access' => [
            'class' => AccessControl::class,
            'only' => ['create', 'update'],
            'rules' => [
                // å…è®¸è®¤è¯ç”¨æˆ·
                [
                    'allow' => true,
                    'roles' => ['@'],
                ],
                // é»˜è®¤ç¦æ­¢å…¶ä»–ç”¨æˆ·
            ],
        ],
    ];
}
```

æ›´å¤šå…³äºè®¿é—®æ§åˆ¶çš„è¯¦æƒ…è¯·å‚é˜… [æˆæƒ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/security-authorization) ä¸€èŠ‚ã€?

### è®¤è¯æ–¹æ³•è¿‡æ»¤å™?

è®¤è¯æ–¹æ³•è¿‡æ»¤å™¨é€šè¿‡ [HTTP Basic Auth](https://zh.wikipedia.org/wiki/HTTPåŸºæœ¬è®¤è¯) æˆ?[OAuth 2](https://oauth.net/2/) æ¥è®¤è¯ä¸€ä¸ªç”¨æˆ·ï¼Œè®¤è¯æ–¹æ³•è¿‡æ»¤å™¨ç±»åœ?`yii\filters\auth` å‘½åç©ºé—´ä¸‹ã€?

å¦‚ä¸‹ç¤ºä¾‹è¡¨ç¤ºå¯ä½¿ç”?[yii\filters\auth\HttpBasicAuth](https://www.yiiframework.com/doc/api/2.0/yii-filters-auth-httpbasicauth) æ¥è®¤è¯ä¸€ä¸ªç”¨æˆ·ï¼Œ å®ƒä½¿ç”¨åŸºäº?HTTP åŸºç¡€è®¤è¯æ–¹æ³•çš„ä»¤ç‰Œã€?æ³¨æ„ä¸ºäº†å¯è¿è¡Œï¼Œ[user identity class](https://www.yiiframework.com/doc/api/2.0/yii-web-user#$identityClass-detail) ç±»å¿…é¡?å®ç° [findIdentityByAccessToken()](https://www.yiiframework.com/doc/api/2.0/yii-web-identityinterface#findIdentityByAccessToken()-detail) æ–¹æ³•ã€?

```php
use yii\filters\auth\HttpBasicAuth;

public function behaviors()
{
    return [
        'basicAuth' => [
            'class' => HttpBasicAuth::class,
        ],
    ];
}
```

è®¤è¯æ–¹æ³•è¿‡æ»¤å™¨é€šå¸¸åœ¨å®ç?RESTful APIä¸­ä½¿ç”¨ï¼Œ æ›´å¤šå…³äºè®¿é—®æ§åˆ¶çš„è¯¦æƒ…è¯·å‚é˜… RESTful [è®¤è¯](https://www.yiiframework.com/doc/guide/2.0/zh-cn/rest-authentication) ä¸€èŠ‚ã€?

### [ContentNegotiator](https://www.yiiframework.com/doc/api/2.0/yii-filters-contentnegotiator)

ContentNegotiator æ”¯æŒå“åº”å†…å®¹æ ¼å¼å¤„ç†å’Œè¯­è¨€å¤„ç†ã€?é€šè¿‡æ£€æŸ?`GET` å‚æ•°å’?`Accept` HTTP å¤´éƒ¨æ¥å†³å®šå“åº”å†…å®¹æ ¼å¼å’Œè¯­è¨€ã€?

å¦‚ä¸‹ç¤ºä¾‹ï¼Œé…ç½?ContentNegotiator æ”¯æŒ JSON å’?XML å“åº”æ ¼å¼å’Œè‹±è¯­ï¼ˆç¾å›½ï¼‰å’Œå¾·è¯­ã€?

```php
use yii\filters\ContentNegotiator;
use yii\web\Response;

public function behaviors()
{
    return [
        [
            'class' => ContentNegotiator::class,
            'formats' => [
                'application/json' => Response::FORMAT_JSON,
                'application/xml' => Response::FORMAT_XML,
            ],
            'languages' => [
                'en-US',
                'de',
            ],
        ],
    ];
}
```

åœ¨[åº”ç”¨ä¸»ä½“ç”Ÿå‘½å‘¨æœŸ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#application-lifecycle)è¿‡ç¨‹ä¸­æ£€æµ‹å“åº”æ ¼å¼å’Œè¯­è¨€ç®€å•å¾ˆå¤šï¼Œ å› æ­¤ ContentNegotiator è®¾è®¡å¯è¢« [å¼•å¯¼å¯åŠ¨ç»„ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#bootstrap)è°ƒç”¨çš„è¿‡æ»¤å™¨ã€?å¦‚ä¸‹ä¾‹æ‰€ç¤ºå¯ä»¥å°†å®ƒé…ç½®åœ¨ [åº”ç”¨ä¸»ä½“é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#application-configurations)ã€?

```php
use yii\filters\ContentNegotiator;
use yii\web\Response;

[
    'bootstrap' => [
        [
            'class' => ContentNegotiator::class,
            'formats' => [
                'application/json' => Response::FORMAT_JSON,
                'application/xml' => Response::FORMAT_XML,
            ],
            'languages' => [
                'en-US',
                'de',
            ],
        ],
    ],
];
```

> **ä¿¡æ¯ï¼?* å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰æ£€æµ‹åˆ°å†…å®¹æ ¼å¼å’Œè¯­è¨€ï¼?ä½¿ç”¨ formats å’?languages ç¬¬ä¸€ä¸ªé…ç½®é¡¹ã€?

### [HttpCache](https://www.yiiframework.com/doc/api/2.0/yii-filters-httpcache)

HttpCache åˆ©ç”¨ `Last-Modified` å’?`Etag` HTTP å¤´å®ç°å®¢æˆ·ç«¯ç¼“å­˜ã€?ä¾‹å¦‚ï¼?

```php
use yii\filters\HttpCache;

public function behaviors()
{
    return [
        [
            'class' => HttpCache::class,
            'only' => ['index'],
            'lastModified' => function ($action, $params) {
                $q = new \yii\db\Query();
                return $q->from('user')->max('updated_at');
            },
        ],
    ];
}
```

æ›´å¤šå…³äºä½¿ç”¨ HttpCache è¯¦æƒ…è¯·å‚é˜?[HTTP ç¼“å­˜](https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-http) ä¸€èŠ‚ã€?

### [PageCache](https://www.yiiframework.com/doc/api/2.0/yii-filters-pagecache)

PageCache å®ç°æœåŠ¡å™¨ç«¯æ•´ä¸ªé¡µé¢çš„ç¼“å­˜ã€‚å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼ŒPageCache åº”ç”¨åœ?`index` åŠ¨ä½œï¼?ç¼“å­˜æ•´ä¸ªé¡µé¢ 60 ç§’æˆ– `post` è¡¨çš„è®°å½•æ•°å‘ç”Ÿå˜åŒ–ã€?å®ƒä¹Ÿä¼šæ ¹æ®ä¸åŒåº”ç”¨è¯­è¨€ä¿å­˜ä¸åŒçš„é¡µé¢ç‰ˆæœ¬ã€?

```php
use yii\filters\PageCache;
use yii\caching\DbDependency;

public function behaviors()
{
    return [
        'pageCache' => [
            'class' => PageCache::class,
            'only' => ['index'],
            'duration' => 60,
            'dependency' => [
                'class' => DbDependency::class,
                'sql' => 'SELECT COUNT(*) FROM post',
            ],
            'variations' => [
                \Yii::$app->language,
            ]
        ],
    ];
}
```

æ›´å¤šå…³äºä½¿ç”¨ PageCache è¯¦æƒ…è¯·å‚é˜?[é¡µé¢ç¼“å­˜](https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-page) ä¸€èŠ‚ã€?

### [RateLimiter](https://www.yiiframework.com/doc/api/2.0/yii-filters-ratelimiter)

RateLimiter æ ¹æ® [æ¼æ¡¶ç®—æ³•](https://en.wikipedia.org/wiki/Leaky_bucket) æ¥å®ç°é€Ÿç‡é™åˆ¶ã€?ä¸»è¦ç”¨åœ¨å®ç° RESTful APIsï¼Œæ›´å¤šå…³äºè¯¥è¿‡æ»¤å™¨è¯¦æƒ…è¯·å‚é˜… [Rate Limiting](https://www.yiiframework.com/doc/guide/2.0/zh-cn/rest-rate-limiting) ä¸€èŠ‚ã€?

### [VerbFilter](https://www.yiiframework.com/doc/api/2.0/yii-filters-verbfilter)

VerbFilter æ£€æŸ¥è¯·æ±‚åŠ¨ä½œçš„ HTTP è¯·æ±‚æ–¹å¼æ˜¯å¦å…è®¸æ‰§è¡Œï¼?å¦‚æœä¸å…è®¸ï¼Œä¼šæŠ›å‡?HTTP 405å¼‚å¸¸ã€?å¦‚ä¸‹ç¤ºä¾‹ï¼ŒVerbFilter æŒ‡å®š CRUD åŠ¨ä½œæ‰€å…è®¸çš„è¯·æ±‚æ–¹å¼ã€?

```php
use yii\filters\VerbFilter;

public function behaviors()
{
    return [
        'verbs' => [
            'class' => VerbFilter::class,
            'actions' => [
                'index'  => ['get'],
                'view'   => ['get'],
                'create' => ['get', 'post'],
                'update' => ['get', 'put', 'post'],
                'delete' => ['post', 'delete'],
            ],
        ],
    ];
}
```

### [Cors](https://www.yiiframework.com/doc/api/2.0/yii-filters-cors)

è·¨åŸŸèµ„æºå…±äº« [CORS](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS) æœºåˆ¶å…è®¸ä¸€ä¸ªç½‘é¡µçš„è®¸å¤šèµ„æºï¼ˆä¾‹å¦‚å­—ä½“ã€JavaScriptç­‰ï¼‰ è¿™äº›èµ„æºå¯ä»¥é€šè¿‡å…¶ä»–åŸŸåè®¿é—®è·å–ã€?ç‰¹åˆ«æ˜?JavaScript çš?AJAX è°ƒç”¨å¯ä½¿ç”?XMLHttpRequest æœºåˆ¶ï¼?ç”±äºåŒæºå®‰å…¨ç­–ç•¥è¯¥è·¨åŸŸè¯·æ±‚ä¼šè¢«ç½‘é¡µæµè§ˆå™¨ç¦æ­¢ã€‚CORS å®šä¹‰æµè§ˆå™¨å’ŒæœåŠ¡å™¨äº¤äº’æ—¶å“ªäº›è·¨åŸŸè¯·æ±‚å…è®¸å’Œç¦æ­¢ã€?

[Cors filter](https://www.yiiframework.com/doc/api/2.0/yii-filters-cors) åº”åœ¨æˆæƒ/è®¤è¯è¿‡æ»¤å™¨ä¹‹å‰å®šä¹‰ï¼Œ ä»¥ä¿è¯?CORS å¤´éƒ¨è¢«å‘é€ã€?

```php
use yii\filters\Cors;
use yii\helpers\ArrayHelper;

public function behaviors()
{
    return ArrayHelper::merge([
        [
            'class' => Cors::class,
        ],
    ], parent::behaviors());
}
```

å¦‚æœè¦å°†CORSè¿‡æ»¤å™¨æ·»åŠ åˆ°ä½ çš„ API ä¸­çš„ [yii\rest\ActiveController](https://www.yiiframework.com/doc/api/2.0/yii-rest-activecontroller) ç±»ï¼Œ è¿˜è¦æ£€æŸ?[REST Controllers](https://www.yiiframework.com/doc/guide/2.0/zh-cn/rest-controllers#cors) ä¸­çš„éƒ¨åˆ†ã€?

CROSè¿‡æ»¤å™¨å¯ä»¥é€šè¿‡ [$cors](https://www.yiiframework.com/doc/api/2.0/yii-filters-cors#$cors-detail) å±æ€§è¿›è¡Œè°ƒæ•´ã€?

- `cors['Origin']`ï¼šå®šä¹‰å…è®¸æ¥æºçš„æ•°ç»„ï¼Œå¯ä¸?`['*']`ï¼ˆä»»ä½•ç”¨æˆ·ï¼‰æˆ?`['https://www.myserver.net', 'https://www.myotherserver.com']`ã€?é»˜è®¤ä¸?`['*']`ã€?
- `cors['Access-Control-Request-Method']`ï¼šå…è®¸åŠ¨ä½œæ•°ç»„å¦‚ `['GET', 'OPTIONS', 'HEAD']`ã€‚é»˜è®¤ä¸º `['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS']`ã€?
- `cors['Access-Control-Request-Headers']`ï¼šå…è®¸è¯·æ±‚å¤´éƒ¨æ•°ç»„ï¼Œå¯ä¸º `['*']` æ‰€æœ‰ç±»å‹å¤´éƒ?æˆ?`['X-Request-With']` æŒ‡å®šç±»å‹å¤´éƒ¨ã€‚é»˜è®¤ä¸º `['*']`ã€?
- `cors['Access-Control-Allow-Credentials']`ï¼šå®šä¹‰å½“å‰è¯·æ±‚æ˜¯å¦ä½¿ç”¨è¯ä¹¦ï¼Œå¯ä¸º `true`ï¼Œ`false` æˆ?`null`ï¼ˆä¸è®¾ç½®ï¼‰ã€‚é»˜è®¤ä¸º `null`ã€?
- `cors['Access-Control-Max-Age']`: å®šä¹‰è¯·æ±‚çš„æœ‰æ•ˆæ—¶é—´ï¼Œé»˜è®¤ä¸?`86400`ã€?

ä¾‹å¦‚ï¼Œå…è®¸æ¥æºä¸º `https://www.myserver.net` å’Œæ–¹å¼ä¸º `GET`ï¼Œ`HEAD` å’?`OPTIONS` çš?CORS å¦‚ä¸‹ï¼?

```php
use yii\filters\Cors;
use yii\helpers\ArrayHelper;

public function behaviors()
{
    return ArrayHelper::merge([
        [
            'class' => Cors::class,
            'cors' => [
                'Origin' => ['https://www.myserver.net'],
                'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
            ],
        ],
    ], parent::behaviors());
}
```

å¯ä»¥è¦†ç›–é»˜è®¤å‚æ•°ä¸ºæ¯ä¸ªåŠ¨ä½œè°ƒæ•?CORS å¤´éƒ¨ã€‚ä¾‹å¦‚ï¼Œä¸?`login` åŠ¨ä½œ å¢åŠ  `Access-Control-Allow-Credentials` å‚æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š

```php
use yii\filters\Cors;
use yii\helpers\ArrayHelper;

public function behaviors()
{
    return ArrayHelper::merge([
        [
            'class' => Cors::class,
            'cors' => [
                'Origin' => ['https://www.myserver.net'],
                'Access-Control-Request-Method' => ['GET', 'HEAD', 'OPTIONS'],
            ],
            'actions' => [
                'login' => [
                    'Access-Control-Allow-Credentials' => true,
                ]
            ]
        ],
    ], parent::behaviors());
}
```
