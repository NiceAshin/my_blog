---
title: åº”ç”¨ä¸»ä½“
date: 2026-02-27
tags:
  - Yii2
  - PHP
categories:
  - PHPæ¡†æ¶æ¢ç´¢
prev: false
next: 4.åº”ç”¨ç»„ä»¶
---

# åº”ç”¨ä¸»ä½“

åº”ç”¨ä¸»ä½“æ˜¯ç®¡ç?Yii åº”ç”¨ç³»ç»Ÿæ•´ä½“ç»“æ„å’Œç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ã€?æ¯ä¸ª Yii åº”ç”¨ç³»ç»Ÿåªèƒ½åŒ…å«ä¸€ä¸ªåº”ç”¨ä¸»ä½“ï¼Œåº”ç”¨ä¸»ä½“åœ?[å…¥å£è„šæœ¬](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts) ä¸­åˆ›å»ºå¹¶èƒ½é€šè¿‡è¡¨è¾¾å¼?`\Yii::$app` å…¨å±€èŒƒå›´å†…è®¿é—®ã€?

> **ä¿¡æ¯ï¼?* å½“æˆ‘ä»¬è¯´â€œä¸€ä¸ªåº”ç”¨â€ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸»ä½“å¯¹è±¡ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ç³»ç»Ÿï¼Œ æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡æ¥å†³å®š[è¯‘ï¼šä¸­æ–‡ä¸ºé¿å…æ­§ä¹‰ï¼ŒApplication ç¿»è¯‘ä¸ºåº”ç”¨ä¸»ä½“]ã€?

Yiiæœ‰ä¸¤ç§åº”ç”¨ä¸»ä½? [ç½‘é¡µåº”ç”¨ä¸»ä½“](https://www.yiiframework.com/doc/api/2.0/yii-web-application) å’?[æ§åˆ¶å°åº”ç”¨ä¸»ä½“](https://www.yiiframework.com/doc/api/2.0/yii-console-application)ï¼?å¦‚åç§°æ‰€ç¤ºï¼Œå‰è€…ä¸»è¦å¤„ç†ç½‘é¡µè¯·æ±‚ï¼Œåè€…å¤„ç†æ§åˆ¶å°è¯·æ±‚ã€?

## åº”ç”¨ä¸»ä½“é…ç½®

å¦‚ä¸‹æ‰€ç¤ºï¼Œå½?[å…¥å£è„šæœ¬](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts) åˆ›å»ºäº†ä¸€ä¸ªåº”ç”¨ä¸»ä½“ï¼Œ å®ƒä¼šåŠ è½½ä¸€ä¸?[é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations) æ–‡ä»¶å¹¶ä¼ ç»™åº”ç”¨ä¸»ä½“ã€?

```php
require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/../vendor/yiisoft/yii2/Yii.php';

// åŠ è½½åº”ç”¨ä¸»ä½“é…ç½®
$config = require __DIR__ . '/../config/web.php';

// å®ä¾‹åŒ–åº”ç”¨ä¸»ä½“ã€é…ç½®åº”ç”¨ä¸»ä½?
(new yii\web\Application($config))->run();
```

ç±»ä¼¼å…¶ä»– [é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations) æ–‡ä»¶, åº”ç”¨ä¸»ä½“é…ç½®æ–‡ä»¶æ ‡æ˜å¦‚ä½•è®¾ç½®åº”ç”¨å¯¹è±¡åˆå§‹å±æ€§ã€?ç”±äºåº”ç”¨ä¸»ä½“é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œä¸€èˆ¬ä¿å­˜åœ¨å¤šä¸ªç±»ä¼¼å¦‚ä¸Šweb.phpçš?[é…ç½®æ–‡ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations#configuration-files) å½“ä¸­ã€?

## åº”ç”¨ä¸»ä½“å±æ€?

åº”ç”¨ä¸»ä½“é…ç½®æ–‡ä»¶ä¸­æœ‰è®¸å¤šé‡è¦çš„å±æ€§è¦é…ç½®ï¼Œè¿™äº›å±æ€§æŒ‡å®šåº”ç”¨ä¸»ä½“çš„è¿è¡Œç¯å¢ƒã€?æ¯”å¦‚ï¼Œåº”ç”¨ä¸»ä½“éœ€è¦çŸ¥é“å¦‚ä½•åŠ è½?[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) ï¼?ä¸´æ—¶æ–‡ä»¶ä¿å­˜åˆ°å“ªå„¿ç­‰ç­‰ã€?ä»¥ä¸‹æˆ‘ä»¬ç®€è¿?these å±æ€§ã€?

### å¿…è¦å±æ€?

åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œè‡³å°‘è¦é…ç½®2ä¸ªå±æ€? [id](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail) å’?[basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail)ã€?

#### [id](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail)

[id](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail) å±æ€§ç”¨æ¥åŒºåˆ†å…¶ä»–åº”ç”¨çš„å”¯ä¸€æ ‡è¯†IDã€‚ä¸»è¦ç»™ç¨‹åºä½¿ç”¨ã€?ä¸ºäº†æ–¹ä¾¿åä½œï¼Œæœ€å¥½ä½¿ç”¨æ•°å­—ä½œä¸ºåº”ç”¨ä¸»ä½“IDï¼?ä½†ä¸å¼ºåˆ¶è¦æ±‚ä¸ºæ•°å­—ã€?

#### [basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail)

[basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail) æŒ‡å®šè¯¥åº”ç”¨çš„æ ¹ç›®å½•ã€?æ ¹ç›®å½•åŒ…å«åº”ç”¨ç³»ç»Ÿæ‰€æœ‰å—ä¿æŠ¤çš„æºä»£ç ã€?åœ¨æ ¹ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å¯¹åº?MVC è®¾è®¡æ¨¡å¼çš„`models`ï¼?`views`ï¼Œ`controllers` ç­‰å­ç›®å½•ã€?

å¯ä»¥ä½¿ç”¨è·¯å¾„æˆ?[è·¯å¾„åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases) æ¥åœ¨é…ç½® [basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail) å±æ€§ã€?ä¸¤ç§æ ¼å¼æ‰€å¯¹åº”çš„ç›®å½•éƒ½å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ç³»ç»Ÿä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€?ç³»ç»Ÿä¼šä½¿ç”?`realpath()` å‡½æ•°è§„èŒƒåŒ–é…ç½®çš„è·¯å¾„ã€?

[basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail) å±æ€§ç»å¸¸ç”¨äºæ´¾ç”Ÿä¸€äº›å…¶ä»–é‡è¦è·¯å¾„ï¼ˆå¦?runtime è·¯å¾„ï¼‰ï¼Œ å› æ­¤ï¼Œç³»ç»Ÿé¢„å®šä¹‰ `@app` ä»£è¡¨è¿™ä¸ªè·¯å¾„ã€?æ´¾ç”Ÿè·¯å¾„å¯ä»¥é€šè¿‡è¿™ä¸ªåˆ«åç»„æˆï¼ˆå¦‚`@app/runtime`ä»£è¡¨runtimeçš„è·¯å¾„ï¼‰ã€?

### é‡è¦å±æ€?

æœ¬å°èŠ‚æ‰€æè¿°çš„å±æ€§é€šå¸¸éœ€è¦è®¾ç½®ï¼Œ å› ä¸ºä¸åŒçš„åº”ç”¨å±æ€§ä¸åŒã€?

#### [aliases](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$aliases-detail)

è¯¥å±æ€§å…è®¸ä½ ç”¨ä¸€ä¸ªæ•°ç»„å®šä¹‰å¤šä¸?[åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ã€?æ•°ç»„çš„keyä¸ºåˆ«ååç§°ï¼Œå€¼ä¸ºå¯¹åº”çš„è·¯å¾„ã€?ä¾‹å¦‚ï¼?

```php
[
    'aliases' => [
        '@name1' => 'path/to/path1',
        '@name2' => 'path/to/path2',
    ],
]
```

ä½¿ç”¨è¿™ä¸ªå±æ€§æ¥å®šä¹‰åˆ«åï¼?ä»£æ›¿ [Yii::setAlias()](https://www.yiiframework.com/doc/api/2.0/yii-baseyii#setAlias()-detail) æ–¹æ³•æ¥è®¾ç½®ã€?

#### [bootstrap](https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail)

è¿™ä¸ªå±æ€§å¾ˆå®ç”¨ï¼Œå®ƒå…è®¸ä½ ç”¨æ•°ç»„æŒ‡å®šå¯åŠ¨é˜¶æ®µ [bootstrapping process](https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail) éœ€è¦è¿è¡Œçš„ç»„ä»¶ã€?æ¯”å¦‚ï¼Œå¦‚æœä½ å¸Œæœ›ä¸€ä¸?[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules) è‡ªå®šä¹?[URL è§„åˆ™](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-url-handling)ï¼?ä½ å¯ä»¥å°†æ¨¡å—IDåŠ å…¥åˆ°bootstrapæ•°ç»„ä¸­ã€?

å±æ€§ä¸­çš„æ¯ä¸ªç»„ä»¶éœ€è¦æŒ‡å®šä»¥ä¸‹ä¸€é¡?

- åº”ç”¨ [ç»„ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#components) ID.
- [æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#modules) ID.
- ç±»å.
- é…ç½®æ•°ç»„.
- åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªç»„ä»¶çš„æ— åç§°å‡½æ•?

ä¾‹å¦‚ï¼?

```php
[
    'bootstrap' => [
        // åº”ç”¨ç»„ä»¶IDæˆ–æ¨¡å—ID
        'demo',

        // ç±»å
        'app\components\Profiler',

        // é…ç½®æ•°ç»„
        [
            'class' => 'app\components\Profiler',
            'level' => 3,
        ],

        // åŒ¿åå‡½æ•°
        function () {
            return new app\components\Profiler();
        }
    ],
]
```

> **ä¿¡æ¯ï¼?* å¦‚æœæ¨¡å— ID å’Œåº”ç”¨ç»„ä»?ID åŒåï¼Œä¼˜å…ˆä½¿ç”¨åº”ç”¨ç»„ä»?IDï¼?å¦‚æœä½ æƒ³ç”¨æ¨¡å?IDï¼?å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ— åç§°å‡½æ•°è¿”å›æ¨¡å?IDã€?
>
> ```php
> [
>     function () {
>         return Yii::$app->getModule('user');
>     },
> ]
> ```

åœ¨å¯åŠ¨é˜¶æ®µï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šå®ä¾‹åŒ–ã€‚å¦‚æœç»„ä»¶ç±»å®ç°æ¥å£ [yii\base\BootstrapInterface](https://www.yiiframework.com/doc/api/2.0/yii-base-bootstrapinterface)ï¼Œä¹Ÿä¼šè°ƒç”?[bootstrap()](https://www.yiiframework.com/doc/api/2.0/yii-base-bootstrapinterface#bootstrap()-detail) æ–¹æ³•ã€?

ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œ[Basic Application Template](https://www.yiiframework.com/doc/guide/2.0/zh-cn/start-installation) åº”ç”¨ä¸»ä½“é…ç½®ä¸­ï¼Œ å¼€å‘ç¯å¢ƒä¸‹ä¼šåœ¨å¯åŠ¨é˜¶æ®µè¿è¡Œ `debug` å’?`gii` æ¨¡å—ã€?

```php
if (YII_ENV_DEV) {
    // configuration adjustments for 'dev' environment
    $config['bootstrap'][] = 'debug';
    $config['modules']['debug'] = 'yii\debug\Module';

    $config['bootstrap'][] = 'gii';
    $config['modules']['gii'] = 'yii\gii\Module';
}
```

> **æ³¨æ„ï¼?* å¯åŠ¨å¤ªå¤šçš„ç»„ä»¶ä¼šé™ä½ç³»ç»Ÿæ€§èƒ½ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°è¿è¡Œå¯åŠ¨ç»„ä»¶ï¼Œ å› æ­¤è°¨æ…é…ç½®å¯åŠ¨ç»„ä»¶ã€?

#### [catchAll](https://www.yiiframework.com/doc/api/2.0/yii-web-application#$catchAll-detail)

è¯¥å±æ€§ä»… [Web applications](https://www.yiiframework.com/doc/api/2.0/yii-web-application) ç½‘é¡µåº”ç”¨æ”¯æŒã€?å®ƒæŒ‡å®šä¸€ä¸ªè¦å¤„ç†æ‰€æœ‰ç”¨æˆ·è¯·æ±‚çš„ [æ§åˆ¶å™¨æ–¹æ³•](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers)ï¼?é€šå¸¸åœ¨ç»´æŠ¤æ¨¡å¼ä¸‹ä½¿ç”¨ï¼ŒåŒä¸€ä¸ªæ–¹æ³•å¤„ç†æ‰€æœ‰ç”¨æˆ·è¯·æ±‚ã€?

è¯¥é…ç½®ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€é¡¹æŒ‡å®šåŠ¨ä½œçš„è·¯ç”±ï¼Œå‰©ä¸‹çš„æ•°ç»„é¡?key-value æˆå¯¹)æŒ‡å®šä¼ é€’ç»™åŠ¨ä½œçš„å‚æ•°ï¼Œ ä¾‹å¦‚ï¼?

```php
[
    'catchAll' => [
        'offline/notice',
        'param1' => 'value1',
        'param2' => 'value2',
    ],
]
```

> **ä¿¡æ¯ï¼?* å½“å¼€å¯è¿™ä¸ªå±æ€§æ—¶ï¼Œå¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•é¢æ¿å°†ä¸èƒ½å·¥ä½œã€?

#### [components](https://www.yiiframework.com/doc/api/2.0/yii-di-servicelocator#$components-detail)

è¿™æ˜¯æœ€é‡è¦çš„å±æ€§ï¼Œå®ƒå…è®¸ä½ æ³¨å†Œå¤šä¸ªåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨çš„ [åº”ç”¨ç»„ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/#structure-application-components)ã€?ä¾‹å¦‚

```php
[
    'components' => [
        'cache' => [
            'class' => 'yii\caching\FileCache',
        ],
        'user' => [
            'identityClass' => 'app\models\User',
            'enableAutoLogin' => true,
        ],
    ],
]
```

æ¯ä¸€ä¸ªåº”ç”¨ç»„ä»¶æŒ‡å®šä¸€ä¸ªkey-valueå¯¹çš„æ•°ç»„ï¼Œkeyä»£è¡¨ç»„ä»¶IDï¼?valueä»£è¡¨ç»„ä»¶ç±»åæˆ?[é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations)ã€?

åœ¨åº”ç”¨ä¸­å¯ä»¥ä»»æ„æ³¨å†Œç»„ä»¶ï¼Œå¹¶å¯ä»¥é€šè¿‡è¡¨è¾¾å¼?`\Yii::$app->ComponentID` å…¨å±€è®¿é—®ã€?

è¯¦æƒ…è¯·é˜…è¯?[åº”ç”¨ç»„ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-application-components) ä¸€èŠ?

#### [controllerMap](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$controllerMap-detail)

è¯¥å±æ€§å…è®¸ä½ æŒ‡å®šä¸€ä¸ªæ§åˆ¶å™¨ ID åˆ°ä»»æ„æ§åˆ¶å™¨ç±»ã€?Yii éµå¾ªä¸€ä¸ªé»˜è®¤çš„ [è§„åˆ™](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#controllerNamespace) æŒ‡å®šæ§åˆ¶å™?ID åˆ°ä»»æ„æ§åˆ¶å™¨ç±»ï¼ˆå¦?`post` å¯¹åº”`app\controllers\PostController`ï¼‰ã€?é€šè¿‡é…ç½®è¿™ä¸ªå±æ€§ï¼Œå¯ä»¥æ‰“ç ´è¿™ä¸ªé»˜è®¤è§„åˆ™ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼?`account`å¯¹åº”åˆ°`app\controllers\UserController`ï¼?`article` å¯¹åº”åˆ?`app\controllers\PostController`ã€?

```php
[
    'controllerMap' => [
        'account' => 'app\controllers\UserController',
        'article' => [
            'class' => 'app\controllers\PostController',
            'enableCsrfValidation' => false,
        ],
    ],
]
```

æ•°ç»„çš„é”®ä»£è¡¨æ§åˆ¶å™¨IDï¼?æ•°ç»„çš„å€¼ä»£è¡¨å¯¹åº”çš„ç±»åã€?

#### [controllerNamespace](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$controllerNamespace-detail)

è¯¥å±æ€§æŒ‡å®šæ§åˆ¶å™¨ç±»é»˜è®¤çš„å‘½åç©ºé—´ï¼Œé»˜è®¤ä¸º`app\controllers`ã€?æ¯”å¦‚æ§åˆ¶å™¨IDä¸?`post` é»˜è®¤å¯¹åº” `PostController`ï¼ˆä¸å¸¦å‘½åç©ºé—´ï¼‰ï¼?ç±»å…¨åä¸º `app\controllers\PostController`ã€?

æ§åˆ¶å™¨ç±»æ–‡ä»¶å¯èƒ½æ”¾åœ¨è¿™ä¸ªå‘½åç©ºé—´å¯¹åº”ç›®å½•çš„å­ç›®å½•ä¸‹ï¼Œ ä¾‹å¦‚ï¼Œæ§åˆ¶å™¨ ID `admin/post` å¯¹åº”çš„æ§åˆ¶å™¨ç±»å…¨åä¸º `app\controllers\admin\PostController`ã€?

æ§åˆ¶å™¨ç±»å…¨é¢èƒ½è¢« [è‡ªåŠ¨åŠ è½½](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-autoloading)ï¼?è¿™ç‚¹æ˜¯éå¸¸é‡è¦çš„ï¼Œæ§åˆ¶å™¨ç±»çš„å®é™…å‘½åç©ºé—´å¯¹åº”è¿™ä¸ªå±æ€§ï¼Œ å¦åˆ™ï¼Œè®¿é—®æ—¶ä½ ä¼šæ”¶åˆ°â€œPage Not Foundâ€ã€?

å¦‚æœä½ æƒ³æ‰“ç ´ä¸Šè¿°çš„è§„åˆ™ï¼Œ å¯ä»¥é…ç½® [controllerMap](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#controllerMap) å±æ€§ã€?

#### [language](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$language-detail)

è¯¥å±æ€§æŒ‡å®šåº”ç”¨å±•ç¤ºç»™ç»ˆç«¯ç”¨æˆ·çš„è¯­è¨€ï¼?é»˜è®¤ä¸?`en` æ ‡è¯†è‹±æ–‡ã€?å¦‚æœéœ€è¦ä¹‹å‰å…¶ä»–è¯­è¨€å¯ä»¥é…ç½®è¯¥å±æ€§ã€?

è¯¥å±æ€§å½±å“å„ç§?[å›½é™…åŒ–](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n) ï¼?åŒ…æ‹¬ä¿¡æ¯ç¿»è¯‘ã€æ—¥æœŸæ ¼å¼ã€æ•°å­—æ ¼å¼ç­‰ã€?ä¾‹å¦‚ yii\jui\DatePicker å°éƒ¨ä»¶ä¼šæ ¹æ®è¯¥å±æ€?å±•ç¤ºå¯¹åº”è¯­è¨€çš„æ—¥å†ä»¥åŠæ—¥æœŸæ ¼å¼ã€?

æ¨èéµå¾ª [IETF language tag](https://zh.wikipedia.org/wiki/IETFèªè¨€æ¨™ç±¤) æ¥è®¾ç½®è¯­è¨€ï¼?ä¾‹å¦‚ `en` ä»£è¡¨è‹±æ–‡ï¼?`en-US` ä»£è¡¨è‹±æ–‡(ç¾å›½).

è¯¥å±æ€§çš„æ›´å¤šä¿¡æ¯å¯å‚è€?[å›½é™…åŒ–](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n) ä¸€èŠ?

#### [modules](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$modules-detail)

è¯¥å±æ€§æŒ‡å®šåº”ç”¨æ‰€åŒ…å«çš?[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules)ã€?

è¯¥å±æ€§ä½¿ç”¨æ•°ç»„åŒ…å«å¤šä¸ªæ¨¡å—ç±» [é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations)ï¼Œæ•°ç»„çš„é”®ä¸ºæ¨¡å—IDï¼?ä¾‹ï¼š

```php
[
    'modules' => [
        // "booking" æ¨¡å—ä»¥åŠå¯¹åº”çš„ç±»
        'booking' => 'app\modules\booking\BookingModule',

        // "comment" æ¨¡å—ä»¥åŠå¯¹åº”çš„é…ç½®æ•°ç»?
        'comment' => [
            'class' => 'app\modules\comment\CommentModule',
            'db' => 'db',
        ],
    ],
]
```

æ›´å¤šè¯¦æƒ…è¯·å‚è€?[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules) ä¸€èŠ‚ã€?

#### [name](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$name-detail)

è¯¥å±æ€§æŒ‡å®šä½ å¯èƒ½æƒ³å±•ç¤ºç»™ç»ˆç«¯ç”¨æˆ·çš„åº”ç”¨åç§°ï¼Œ ä¸åŒäºéœ€è¦å”¯ä¸€æ€§çš„ [id](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail) å±æ€§ï¼Œ è¯¥å±æ€§å¯ä»¥ä¸å”¯ä¸€ï¼Œè¯¥å±æ€§ç”¨äºæ˜¾ç¤ºåº”ç”¨çš„ç”¨é€”ã€?

å¦‚æœå…¶ä»–åœ°æ–¹çš„ä»£ç æ²¡æœ‰ç”¨åˆ°ï¼Œå¯ä»¥ä¸é…ç½®è¯¥å±æ€§ã€?

#### [params](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$params-detail)

è¯¥å±æ€§ä¸ºä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡å®šå¯ä»¥å…¨å±€è®¿é—®çš„å‚æ•°ï¼Œ ä»£æ›¿ç¨‹åºä¸­ç¡¬ç¼–ç çš„æ•°å­—å’Œå­—ç¬¦ï¼?åº”ç”¨ä¸­çš„å‚æ•°å®šä¹‰åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶éšæ—¶å¯ä»¥è®¿é—®æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€?ä¾‹å¦‚ç”¨å‚æ•°å®šä¹‰ç¼©ç•¥å›¾çš„é•¿å®½å¦‚ä¸‹ï¼š

```php
[
    'params' => [
        'thumbnail.size' => [128, 128],
    ],
]
```

ç„¶åç®€å•çš„ä½¿ç”¨å¦‚ä¸‹ä»£ç å³å¯è·å–åˆ°ä½ éœ€è¦çš„é•¿å®½å‚æ•°ï¼?

```php
$size = \Yii::$app->params['thumbnail.size'];
$width = \Yii::$app->params['thumbnail.size'][0];
```

ä»¥åæƒ³ä¿®æ”¹ç¼©ç•¥å›¾é•¿å®½ï¼?åªéœ€è¦ä¿®æ”¹è¯¥å‚æ•°è€Œä¸éœ€è¦ç›¸å…³çš„ä»£ç ã€?

#### [sourceLanguage](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$sourceLanguage-detail)

è¯¥å±æ€§æŒ‡å®šåº”ç”¨ä»£ç çš„è¯­è¨€ï¼Œé»˜è®¤ä¸º `'en-US'` æ ‡è¯†è‹±æ–‡ï¼ˆç¾å›½ï¼‰ï¼?å¦‚æœåº”ç”¨ä¸æ˜¯è‹±æ–‡è¯·ä¿®æ”¹è¯¥å±æ€§ã€?

å’?[è¯­è¨€](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#language) å±æ€§ç±»ä¼¼ï¼Œé…ç½®è¯¥å±æ€§éœ€éµå¾ª [IETF language tag](https://zh.wikipedia.org/wiki/IETFèªè¨€æ¨™ç±¤). ä¾‹å¦‚ `en` ä»£è¡¨è‹±æ–‡ï¼?`en-US` ä»£è¡¨è‹±æ–‡(ç¾å›½)ã€?

è¯¥å±æ€§çš„æ›´å¤šä¿¡æ¯å¯å‚è€?[å›½é™…åŒ–](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n) ä¸€èŠ?

#### [timeZone](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$timeZone-detail)

è¯¥å±æ€§æä¾›ä¸€ç§æ–¹å¼ä¿®æ”?PHP è¿è¡Œç¯å¢ƒä¸­çš„é»˜è®¤æ—¶åŒºï¼Œé…ç½®è¯¥å±æ€§æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨ PHP å‡½æ•° [date_default_timezone_set()](https://www.php.net/manual/zh/function.date-default-timezone-set.php)ï¼?ä¾‹å¦‚ï¼?

```php
[
    'timeZone' => 'America/Los_Angeles',
]
```

æœ‰å…³è®¾ç½®æ—¶åŒºå«ä¹‰çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[å…³äºæ—¥æœŸæ ¼å¼çš„éƒ¨åˆ†](https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-formatting#time-zones)ã€?

#### [version](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$version-detail)

è¯¥å±æ€§æŒ‡å®šåº”ç”¨çš„ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º `'1.0'`ï¼?å…¶ä»–ä»£ç ä¸ä½¿ç”¨çš„è¯å¯ä»¥ä¸é…ç½®ã€?

### å®ç”¨å±æ€?

æœ¬å°èŠ‚æè¿°çš„å±æ€§ä¸ç»å¸¸è®¾ç½®ï¼Œé€šå¸¸ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å€¼ã€?å¦‚æœä½ æƒ³æ”¹å˜é»˜è®¤å€¼ï¼Œå¯ä»¥é…ç½®è¿™äº›å±æ€§ã€?

#### [charset](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$charset-detail)

è¯¥å±æ€§æŒ‡å®šåº”ç”¨ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œé»˜è®¤å€¼ä¸º `'UTF-8'`ï¼?ç»å¤§éƒ¨åˆ†åº”ç”¨éƒ½åœ¨ä½¿ç”¨ï¼Œé™¤éå·²æœ‰çš„ç³»ç»Ÿå¤§é‡ä½¿ç”¨éunicodeæ•°æ®æ‰éœ€è¦æ›´æ”¹è¯¥å±æ€§ã€?

#### [defaultRoute](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$defaultRoute-detail)

è¯¥å±æ€§æŒ‡å®šæœªé…ç½®çš„è¯·æ±‚çš„å“åº” [è·¯ç”±](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-routing) è§„åˆ™ï¼?è·¯ç”±è§„åˆ™å¯èƒ½åŒ…å«æ¨¡å— IDï¼Œæ§åˆ¶å™¨ IDï¼ŒåŠ¨ä½?IDã€?ä¾‹å¦‚ `help`ï¼Œ`post/create`ï¼Œ`admin/post/create`ï¼Œå¦‚æœåŠ¨ä½?ID æ²¡æœ‰æŒ‡å®šï¼?ä¼šä½¿ç”?[yii\base\Controller::$defaultAction](https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$defaultAction-detail) ä¸­æŒ‡å®šçš„é»˜è®¤å€¼ã€?

å¯¹äº [Web applications](https://www.yiiframework.com/doc/api/2.0/yii-web-application) ç½‘é¡µåº”ç”¨ï¼?é»˜è®¤å€¼ä¸º `'site'` å¯¹åº” `SiteController` æ§åˆ¶å™¨ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„åŠ¨ä½œã€?å› æ­¤ä½ ä¸å¸¦è·¯ç”±çš„è®¿é—®åº”ç”¨ï¼Œé»˜è®¤ä¼šæ˜¾ç¤º `app\controllers\SiteController::actionIndex()` çš„ç»“æœã€?

å¯¹äº [console applications](https://www.yiiframework.com/doc/api/2.0/yii-console-application) æ§åˆ¶å°åº”ç”¨ï¼Œ é»˜è®¤å€¼ä¸º `'help'` å¯¹åº” [yii\console\controllers\HelpController::actionIndex()](https://www.yiiframework.com/doc/api/2.0/yii-console-controllers-helpcontroller#actionIndex()-detail)ã€?å› æ­¤ï¼Œå¦‚æœæ‰§è¡Œçš„å‘½ä»¤ä¸å¸¦å‚æ•°ï¼Œé»˜è®¤ä¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€?

#### [extensions](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$extensions-detail)

è¯¥å±æ€§ç”¨æ•°ç»„åˆ—è¡¨æŒ‡å®šåº”ç”¨å®‰è£…å’Œä½¿ç”¨çš„ [æ‰©å±•](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-extensions)ï¼?é»˜è®¤ä½¿ç”¨ `@vendor/yiisoft/extensions.php` æ–‡ä»¶è¿”å›çš„æ•°ç»„ã€?å½“ä½ ä½¿ç”¨ [Composer](https://getcomposer.org/) å®‰è£…æ‰©å±•ï¼Œ`extensions.php` ä¼šè¢«è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤æ›´æ–°ã€?æ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸éœ€è¦é…ç½®è¯¥å±æ€§ã€?

ç‰¹æ®Šæƒ…å†µä¸‹ä½ æƒ³è‡ªå·±æ‰‹åŠ¨ç»´æŠ¤æ‰©å±•ï¼Œå¯ä»¥å‚ç…§å¦‚ä¸‹é…ç½®è¯¥å±æ€§ï¼š

```php
[
    'extensions' => [
        [
            'name' => 'extension name',
            'version' => 'version number',
            'bootstrap' => 'BootstrapClassName',  // å¯é€‰é…ï¼Œå¯ä¸ºé…ç½®æ•°ç»?
            'alias' => [  // å¯é€‰é…
                '@alias1' => 'to/path1',
                '@alias2' => 'to/path2',
            ],
        ],

        // ... æ›´å¤šåƒä¸Šé¢çš„æ‰©å±• ...

    ],
]
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œè¯¥å±æ€§åŒ…å«ä¸€ä¸ªæ‰©å±•å®šä¹‰æ•°ç»„ï¼Œæ¯ä¸ªæ‰©å±•ä¸ºä¸€ä¸ªåŒ…å?`name` å’?`version` é¡¹çš„æ•°ç»„ã€?å¦‚æœæ‰©å±•è¦åœ¨ [å¼•å¯¼å¯åŠ¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-bootstrapping) é˜¶æ®µè¿è¡Œï¼?éœ€è¦é…ç½?`bootstrap` ä»¥åŠå¯¹åº”çš„å¼•å¯¼å¯åŠ¨ç±»åæˆ– [configuration](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations) æ•°ç»„ã€?æ‰©å±•ä¹Ÿå¯ä»¥å®šä¹?[åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)

#### [layout](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$layout-detail)

è¯¥å±æ€§æŒ‡å®šæ¸²æŸ?[è§†å›¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views) é»˜è®¤ä½¿ç”¨çš„å¸ƒå±€åå­—ï¼?é»˜è®¤å€¼ä¸º `'main'` å¯¹åº”[å¸ƒå±€è·¯å¾„](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#layoutPath)ä¸‹çš„ `main.php` æ–‡ä»¶ï¼?å¦‚æœ [å¸ƒå±€è·¯å¾„](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#layoutPath) å’?[è§†å›¾è·¯å¾„](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath) éƒ½æ˜¯é»˜è®¤å€¼ï¼Œ é»˜è®¤å¸ƒå±€æ–‡ä»¶å¯ä»¥ä½¿ç”¨è·¯å¾„åˆ«å `@app/views/layouts/main.php`

å¦‚æœä¸æƒ³è®¾ç½®é»˜è®¤å¸ƒå±€æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½®è¯¥å±æ€§ä¸º `false`ï¼Œè¿™ç§åšæ³•æ¯”è¾ƒç½•è§ã€?

#### [layoutPath](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail)

è¯¥å±æ€§æŒ‡å®šæŸ¥æ‰¾å¸ƒå±€æ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º [è§†å›¾è·¯å¾„](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath) ä¸‹çš„ `layouts` å­ç›®å½•ã€?å¦‚æœ [è§†å›¾è·¯å¾„](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath) ä½¿ç”¨é»˜è®¤å€¼ï¼Œ é»˜è®¤çš„å¸ƒå±€è·¯å¾„åˆ«åä¸º`@app/views/layouts`ã€?

è¯¥å±æ€§éœ€è¦é…ç½®æˆä¸€ä¸ªç›®å½•æˆ– è·¯å¾„ [åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ã€?

#### [runtimePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$runtimePath-detail)

è¯¥å±æ€§æŒ‡å®šä¸´æ—¶æ–‡ä»¶å¦‚æ—¥å¿—æ–‡ä»¶ã€ç¼“å­˜æ–‡ä»¶ç­‰ä¿å­˜è·¯å¾„ï¼?é»˜è®¤å€¼ä¸ºå¸¦åˆ«åçš„ `@app/runtime`ã€?

å¯ä»¥é…ç½®è¯¥å±æ€§ä¸ºä¸€ä¸ªç›®å½•æˆ–è€…è·¯å¾?[åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ï¼?æ³¨æ„åº”ç”¨è¿è¡Œæ—¶æœ‰å¯¹è¯¥è·¯å¾„çš„å†™å…¥æƒé™ï¼Œ ä»¥åŠç»ˆç«¯ç”¨æˆ·ä¸èƒ½è®¿é—®è¯¥è·¯å¾„å› ä¸ºä¸´æ—¶æ–‡ä»¶å¯èƒ½åŒ…å«ä¸€äº›æ•æ„Ÿä¿¡æ¯ã€?

ä¸ºäº†ç®€åŒ–è®¿é—®è¯¥è·¯å¾„ï¼ŒYii é¢„å®šä¹‰åˆ«å?`@runtime` ä»£è¡¨è¯¥è·¯å¾„ã€?

#### [viewPath](https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail)

è¯¥è·¯å¾„æŒ‡å®šè§†å›¾æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œé»˜è®¤å€¼ä¸ºå¸¦åˆ«åçš„ `@app/views`ï¼?å¯ä»¥é…ç½®å®ƒä¸ºä¸€ä¸ªç›®å½•æˆ–è€…è·¯å¾?[åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases).

#### [vendorPath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$vendorPath-detail)

è¯¥å±æ€§æŒ‡å®?[Composer](https://getcomposer.org/) ç®¡ç†çš„ä¾›åº”å•†è·¯å¾„ï¼?è¯¥è·¯å¾„åŒ…å«åº”ç”¨ä½¿ç”¨çš„åŒ…æ‹¬Yiiæ¡†æ¶åœ¨å†…çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ã€?é»˜è®¤å€¼ä¸ºå¸¦åˆ«åçš„ `@app/vendor` ã€?

å¯ä»¥é…ç½®å®ƒä¸ºä¸€ä¸ªç›®å½•æˆ–è€…è·¯å¾?[åˆ«å](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases)ï¼?å½“ä½ ä¿®æ”¹æ—¶ï¼ŒåŠ¡å¿…ä¿®æ”¹å¯¹åº”çš?Composer é…ç½®ã€?

ä¸ºäº†ç®€åŒ–è®¿é—®è¯¥è·¯å¾„ï¼ŒYii é¢„å®šä¹‰åˆ«å?`@vendor` ä»£è¡¨è¯¥è·¯å¾„ã€?

#### [enableCoreCommands](https://www.yiiframework.com/doc/api/2.0/yii-console-application#$enableCoreCommands-detail)

è¯¥å±æ€§ä»… [console applications](https://www.yiiframework.com/doc/api/2.0/yii-console-application) æ§åˆ¶å°åº”ç”¨æ”¯æŒï¼Œ ç”¨æ¥æŒ‡å®šæ˜¯å¦å¯ç”¨ Yii ä¸­çš„æ ¸å¿ƒå‘½ä»¤ï¼Œé»˜è®¤å€¼ä¸º `true`ã€?

## åº”ç”¨äº‹ä»¶

åº”ç”¨åœ¨å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­ä¼šè§¦å‘äº‹ä»¶ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶é…ç½®äº‹ä»¶å¤„ç†ä»£ç ï¼Œ å¦‚ä¸‹æ‰€ç¤ºï¼š

```php
[
    'on beforeRequest' => function ($event) {
        // ...
    },
]
```

`on eventName` è¯­æ³•çš„ç”¨æ³•åœ¨ [Configurations](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations#configuration-format) ä¸€èŠ‚æœ‰è¯¦ç»†æè¿°.

å¦å¤–ï¼Œåœ¨åº”ç”¨ä¸»ä½“å®ä¾‹åŒ–åï¼Œä½ å¯ä»¥åœ?[å¼•å¯¼å¯åŠ¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-bootstrapping) é˜¶æ®µé™„åŠ äº‹ä»¶å¤„ç†ä»£ç ï¼?ä¾‹å¦‚ï¼?

```php
\Yii::$app->on(\yii\base\Application::EVENT_BEFORE_REQUEST, function ($event) {
    // ...
});
```

### [EVENT_BEFORE_REQUEST](https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_BEFORE_REQUEST-detail)

è¯¥äº‹ä»¶åœ¨åº”ç”¨å¤„ç†è¯·æ±‚ *before* ä¹‹å‰ï¼Œå®é™…çš„äº‹ä»¶åä¸º `beforeRequest`ã€?

åœ¨äº‹ä»¶è§¦å‘å‰ï¼Œåº”ç”¨ä¸»ä½“å·²ç»å®ä¾‹åŒ–å¹¶é…ç½®å¥½äº†ï¼Œ æ‰€ä»¥é€šè¿‡äº‹ä»¶æœºåˆ¶å°†ä½ çš„ä»£ç åµŒå…¥åˆ°è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­éå¸¸ä¸é”™ã€?ä¾‹å¦‚åœ¨äº‹ä»¶å¤„ç†ä¸­æ ¹æ®æŸäº›å‚æ•°åŠ¨æ€è®¾ç½?[yii\base\Application::$language](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$language-detail) è¯­è¨€å±æ€§ã€?

### [EVENT_AFTER_REQUEST](https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_AFTER_REQUEST-detail)

è¯¥äº‹ä»¶åœ¨åº”ç”¨å¤„ç†è¯·æ±‚ *after* ä¹‹åä½†åœ¨è¿”å›å“åº” *before* ä¹‹å‰è§¦å‘ï¼?å®é™…çš„äº‹ä»¶åä¸?`afterRequest`ã€?

è¯¥äº‹ä»¶è§¦å‘æ—¶ï¼Œè¯·æ±‚å·²ç»è¢«å¤„ç†å®Œï¼Œ å¯ä»¥åšä¸€äº›è¯·æ±‚åå¤„ç†æˆ–è‡ªå®šä¹‰å“åº”ã€?

æ³¨æ„ [response](https://www.yiiframework.com/doc/api/2.0/yii-web-response) ç»„ä»¶åœ¨å‘é€å“åº”ç»™ç»ˆç«¯ç”¨æˆ·æ—¶ä¹Ÿä¼šè§¦å‘ä¸€äº›äº‹ä»¶ï¼Œ è¿™äº›äº‹ä»¶éƒ½åœ¨æœ¬äº‹ä»?*after* ä¹‹åè§¦å‘ã€?

### [EVENT_BEFORE_ACTION](https://www.yiiframework.com/doc/api/2.0/yii-base-module#EVENT_BEFORE_ACTION-detail)

è¯¥äº‹ä»¶åœ¨æ¯ä¸ª [æ§åˆ¶å™¨åŠ¨ä½œ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) è¿è¡Œ*before*ä¹‹å‰ä¼šè¢«è§¦å‘ï¼?å®é™…çš„äº‹ä»¶åä¸?`beforeAction`.

äº‹ä»¶çš„å‚æ•°ä¸ºä¸€ä¸?[yii\base\ActionEvent](https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent) å®ä¾‹ï¼?äº‹ä»¶å¤„ç†ä¸­å¯ä»¥è®¾ç½®[yii\base\ActionEvent::$isValid](https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$isValid-detail) ä¸?`false` åœæ­¢è¿è¡Œåç»­åŠ¨ä½œï¼?ä¾‹å¦‚ï¼?

```php
[
    'on beforeAction' => function ($event) {
        if (some condition) {
            $event->isValid = false;
        } else {
        }
    },
]
```

æ³¨æ„ [æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules) å’?[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) éƒ½ä¼šè§¦å‘ `beforeAction` äº‹ä»¶ã€?åº”ç”¨ä¸»ä½“å¯¹è±¡é¦–å…ˆè§¦å‘è¯¥äº‹ä»¶ï¼Œç„¶åæ¨¡å—è§¦å‘ï¼ˆå¦‚æœå­˜åœ¨æ¨¡å—ï¼‰ï¼Œæœ€åæ§åˆ¶å™¨è§¦å‘ã€?ä»»ä½•ä¸€ä¸ªäº‹ä»¶å¤„ç†ä¸­è®¾ç½® [yii\base\ActionEvent::$isValid](https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$isValid-detail) è®¾ç½®ä¸?`false` ä¼šåœæ­¢è§¦å‘åé¢çš„äº‹ä»¶ã€?

### [EVENT_AFTER_ACTION](https://www.yiiframework.com/doc/api/2.0/yii-base-module#EVENT_AFTER_ACTION-detail)

è¯¥äº‹ä»¶åœ¨æ¯ä¸ª [æ§åˆ¶å™¨åŠ¨ä½œ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) è¿è¡Œ *after* ä¹‹åä¼šè¢«è§¦å‘ï¼?å®é™…çš„äº‹ä»¶åä¸?`afterAction`ã€?

è¯¥äº‹ä»¶çš„å‚æ•°ä¸?[yii\base\ActionEvent](https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent) å®ä¾‹ï¼?é€šè¿‡ [yii\base\ActionEvent::$result](https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$result-detail) å±æ€§ï¼Œ äº‹ä»¶å¤„ç†å¯ä»¥è®¿é—®å’Œä¿®æ”¹åŠ¨ä½œçš„ç»“æœã€‚ä¾‹å¦‚ï¼š

```php
[
    'on afterAction' => function ($event) {
        if (some condition) {
            // ä¿®æ”¹ $event->result
        } else {
        }
    },
]
```

æ³¨æ„ [æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules) å’?[æ§åˆ¶å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers) éƒ½ä¼šè§¦å‘ `afterAction` äº‹ä»¶ã€?è¿™äº›å¯¹è±¡çš„è§¦å‘é¡ºåºå’Œ `beforeAction` ç›¸åï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ æ§åˆ¶å™¨æœ€å…ˆè§¦å‘ï¼Œç„¶åæ˜¯æ¨¡å—ï¼ˆå¦‚æœæœ‰æ¨¡å—ï¼‰ï¼Œæœ€åä¸ºåº”ç”¨ä¸»ä½“ã€?

## åº”ç”¨ä¸»ä½“ç”Ÿå‘½å‘¨æœŸ

![Application Lifecycle](https://www.yiiframework.com/doc/guide/2.0/zh-cn/images/application-lifecycle.png)

å½“è¿è¡?[å…¥å£è„šæœ¬](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts) å¤„ç†è¯·æ±‚æ—¶ï¼Œ åº”ç”¨ä¸»ä½“ä¼šç»å†ä»¥ä¸‹ç”Ÿå‘½å‘¨æœ?

1. å…¥å£è„šæœ¬åŠ è½½åº”ç”¨ä¸»ä½“é…ç½®æ•°ç»„ã€?

2. å…¥å£è„šæœ¬åˆ›å»ºä¸€ä¸ªåº”ç”¨ä¸»ä½“å®ä¾‹ï¼š

   - è°ƒç”¨ [preInit()](https://www.yiiframework.com/doc/api/2.0/yii-base-application#preInit()-detail) é…ç½®å‡ ä¸ªé«˜çº§åˆ«åº”ç”¨ä¸»ä½“å±æ€§ï¼Œ æ¯”å¦‚ [basePath](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail)ã€?
   - æ³¨å†Œ [error handler](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$errorHandler-detail) é”™è¯¯å¤„ç†æ–¹æ³•ã€?
   - é…ç½®åº”ç”¨ä¸»ä½“å±æ€§ã€?
   - è°ƒç”¨ [init()](https://www.yiiframework.com/doc/api/2.0/yii-base-application#init()-detail) åˆå§‹åŒ–ï¼Œè¯¥å‡½æ•°ä¼šè°ƒç”¨ [bootstrap()](https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail) è¿è¡Œå¼•å¯¼å¯åŠ¨ç»„ä»¶ã€?

3. å…¥å£è„šæœ¬è°ƒç”¨

    

   yii\base\Application::run()

    

   è¿è¡Œåº”ç”¨ä¸»ä½“:

   - è§¦å‘ [EVENT_BEFORE_REQUEST](https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_BEFORE_REQUEST-detail) äº‹ä»¶ã€?
   - å¤„ç†è¯·æ±‚ï¼šè§£æè¯·æ±?[è·¯ç”±](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-routing) å’Œç›¸å…³å‚æ•°ï¼› åˆ›å»ºè·¯ç”±æŒ‡å®šçš„æ¨¡å—ã€æ§åˆ¶å™¨å’ŒåŠ¨ä½œå¯¹åº”çš„ç±»ï¼Œå¹¶è¿è¡ŒåŠ¨ä½œã€?
   - è§¦å‘ [EVENT_AFTER_REQUEST](https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_AFTER_REQUEST-detail) äº‹ä»¶ã€?
   - å‘é€å“åº”åˆ°ç»ˆç«¯ç”¨æˆ·ã€?

4. å…¥å£è„šæœ¬æ¥æ”¶åº”ç”¨ä¸»ä½“ä¼ æ¥çš„é€€å‡ºçŠ¶æ€å¹¶å®Œæˆè¯·æ±‚çš„å¤„ç†ã€?
