---
title: åº”ç”¨ç»„ä»¶
date: 2026-02-27
tags:
  - Yii2
  - PHP
categories:
  - PHPæ¡†æ¶æ¢ç´¢
prev: 3.åº”ç”¨ä¸»ä½“
next: ./5.æ§åˆ¶å™?md
---

# åº”ç”¨ç»„ä»¶

åº”ç”¨ä¸»ä½“æ˜¯[æœåŠ¡å®šä½å™¨](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-service-locator)ï¼?å®ƒéƒ¨ç½²ä¸€ç»„æä¾›å„ç§ä¸åŒåŠŸèƒ½çš„ *åº”ç”¨ç»„ä»¶* æ¥å¤„ç†è¯·æ±‚ã€?ä¾‹å¦‚ï¼Œ`urlManager`ç»„ä»¶è´Ÿè´£å¤„ç†ç½‘é¡µè¯·æ±‚è·¯ç”±åˆ°å¯¹åº”çš„æ§åˆ¶å™¨ã€?`db`ç»„ä»¶æä¾›æ•°æ®åº“ç›¸å…³æœåŠ¡ç­‰ç­‰ã€?

åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ï¼Œæ¯ä¸ªåº”ç”¨ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš?ID ç”¨æ¥åŒºåˆ†å…¶ä»–åº”ç”¨ç»„ä»¶ï¼?ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹è¡¨è¾¾å¼è®¿é—®åº”ç”¨ç»„ä»¶ã€?

```php
\Yii::$app->componentID
```

ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”?`\Yii::$app->db` æ¥è·å–åˆ°å·²æ³¨å†Œåˆ°åº”ç”¨çš?[DB connection](https://www.yiiframework.com/doc/api/2.0/yii-db-connection)ï¼?ä½¿ç”¨ `\Yii::$app->cache` æ¥è·å–åˆ°å·²æ³¨å†Œåˆ°åº”ç”¨çš?[primary cache](https://www.yiiframework.com/doc/api/2.0/yii-caching-cache)ã€?

ç¬¬ä¸€æ¬¡ä½¿ç”¨ä»¥ä¸Šè¡¨è¾¾å¼æ—¶å€™ä¼šåˆ›å»ºåº”ç”¨ç»„ä»¶å®ä¾‹ï¼?åç»­å†è®¿é—®ä¼šè¿”å›æ­¤å®ä¾‹ï¼Œæ— éœ€å†æ¬¡åˆ›å»ºã€?

åº”ç”¨ç»„ä»¶å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ï¼Œå¯ä»¥åœ?[åº”ç”¨ä¸»ä½“é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#application-configurations)é…ç½® [yii\base\Application::$components](https://www.yiiframework.com/doc/api/2.0/yii-di-servicelocator#$components-detail) å±æ€§ã€?ä¾‹å¦‚ï¼?

```php
[
    'components' => [
        // ä½¿ç”¨ç±»åæ³¨å†Œ "cache" ç»„ä»¶
        'cache' => 'yii\caching\ApcCache',

        // ä½¿ç”¨é…ç½®æ•°ç»„æ³¨å†Œ "db" ç»„ä»¶
        'db' => [
            'class' => 'yii\db\Connection',
            'dsn' => 'mysql:host=localhost;dbname=demo',
            'username' => 'root',
            'password' => '',
        ],

        // ä½¿ç”¨å‡½æ•°æ³¨å†Œ"search" ç»„ä»¶
        'search' => function () {
            return new app\components\SolrService;
        },
    ],
]
```

> **ä¿¡æ¯ï¼?* è¯·è°¨æ…æ³¨å†Œå¤ªå¤šåº”ç”¨ç»„ä»¶ï¼Œ åº”ç”¨ç»„ä»¶å°±åƒå…¨å±€å˜é‡ï¼?ä½¿ç”¨å¤ªå¤šå¯èƒ½åŠ å¤§æµ‹è¯•å’Œç»´æŠ¤çš„éš¾åº¦ã€?ä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥åœ¨éœ€è¦æ—¶å†åˆ›å»ºæœ¬åœ°ç»„ä»¶ã€?

## å¼•å¯¼å¯åŠ¨ç»„ä»¶

ä¸Šé¢æåˆ°ä¸€ä¸ªåº”ç”¨ç»„ä»¶åªä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶å®ä¾‹åŒ–ï¼Œ å¦‚æœå¤„ç†è¯·æ±‚è¿‡ç¨‹æ²¡æœ‰è®¿é—®çš„è¯å°±ä¸å®ä¾‹åŒ–ã€?æœ‰æ—¶ä½ æƒ³åœ¨æ¯ä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹éƒ½å®ä¾‹åŒ–æŸä¸ªç»„ä»¶å³ä¾¿å®ƒä¸ä¼šè¢«è®¿é—®ï¼Œ å¯ä»¥å°†è¯¥ç»„ä»¶IDåŠ å…¥åˆ°åº”ç”¨ä¸»ä½“çš„ [bootstrap](https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail) å±æ€§ä¸­ã€?

ä½ è¿˜å¯ä»¥ä½¿ç”¨é—­åŒ…æ¥å¼•å¯¼å¯åŠ¨è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚ä¸éœ€è¦ç›´æ¥è¿”å›ä¸€ä¸ªå®ä¾‹åŒ–çš„ç»„ä»¶ã€?åœ¨åº”ç”¨ä¸»ä½?[yii\base\Application](https://www.yiiframework.com/doc/api/2.0/yii-base-application) å®ä¾‹åŒ–åï¼Œé—­åŒ…ä¹Ÿä¼šè¢«è°ƒç”¨ã€?

ä¾‹å¦‚, å¦‚ä¸‹çš„åº”ç”¨ä¸»ä½“é…ç½®ä¿è¯äº† `log` ç»„ä»¶ä¸€ç›´è¢«åŠ è½½ã€?

```php
[
    'bootstrap' => [
        'log',
        function($app){
            return new ComponentX();
        },
        function($app){
            // å¯ä»¥å†™è‡ªå®šä¹‰çš„ä»£ç ?
           return;
        }
    ],
    'components' => [
        'log' => [
            // "log" ç»„ä»¶çš„é…ç½?
        ],
    ],
]
```

## æ ¸å¿ƒåº”ç”¨ç»„ä»¶

Yii å®šä¹‰äº†ä¸€ç»„å›ºå®šIDå’Œé»˜è®¤é…ç½®çš„ *æ ¸å¿ƒ* ç»„ä»¶ï¼?ä¾‹å¦‚ [request](https://www.yiiframework.com/doc/api/2.0/yii-web-application#$request-detail) ç»„ä»¶ ç”¨æ¥æ”¶é›†ç”¨æˆ·è¯·æ±‚å¹¶è§£æ?[è·¯ç”±](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-routing)ï¼?[db](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$db-detail) ä»£è¡¨ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æ•°æ®åº“è¿æ¥ã€?é€šè¿‡è¿™äº›ç»„ä»¶ï¼ŒYiiåº”ç”¨ä¸»ä½“èƒ½å¤„ç†ç”¨æˆ·è¯·æ±‚ã€?

ä¸‹é¢æ˜¯é¢„å®šä¹‰çš„æ ¸å¿ƒåº”ç”¨ç»„ä»¶åˆ—è¡¨ï¼Œ å¯ä»¥å’Œæ™®é€šåº”ç”¨ç»„ä»¶ä¸€æ ·é…ç½®å’Œè‡ªå®šä¹‰å®ƒä»¬ã€?å½“ä½ é…ç½®ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œä¸æŒ‡å®šå®ƒçš„ç±»åçš„è¯å°±ä¼šä½¿ç”¨Yiié»˜è®¤æŒ‡å®šçš„ç±»ã€?

- [assetManager](https://www.yiiframework.com/doc/api/2.0/yii-web-assetmanager): ç®¡ç†èµ„æºåŒ…å’Œèµ„æºå‘å¸ƒï¼?è¯¦æƒ…è¯·å‚è€?[ç®¡ç†èµ„æº](https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-assets) ä¸€èŠ‚ã€?
- [db](https://www.yiiframework.com/doc/api/2.0/yii-db-connection): ä»£è¡¨ä¸€ä¸ªå¯ä»¥æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æ•°æ®åº“è¿æ¥ï¼?æ³¨æ„é…ç½®è¯¥ç»„ä»¶æ—¶å¿…é¡»æŒ‡å®šç»„ä»¶ç±»åå’Œå…¶ä»–ç›¸å…³ç»„ä»¶å±æ€§ï¼Œ å¦‚[yii\db\Connection::$dsn](https://www.yiiframework.com/doc/api/2.0/yii-db-connection#$dsn-detail)ã€?è¯¦æƒ…è¯·å‚è€?[æ•°æ®è®¿é—®å¯¹è±¡](https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-dao) ä¸€èŠ‚ã€?
- [errorHandler](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$errorHandler-detail): å¤„ç† PHP é”™è¯¯å’Œå¼‚å¸¸ï¼Œ è¯¦æƒ…è¯·å‚è€?[é”™è¯¯å¤„ç†](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-handling-errors) ä¸€èŠ‚ã€?
- [formatter](https://www.yiiframework.com/doc/api/2.0/yii-i18n-formatter): æ ¼å¼åŒ–è¾“å‡ºæ˜¾ç¤ºç»™ç»ˆç«¯ç”¨æˆ·çš„æ•°æ®ï¼Œä¾‹å¦‚æ•°å­—å¯èƒ½è¦å¸¦åˆ†éš”ç¬¦ï¼Œ æ—¥æœŸä½¿ç”¨é•¿æ ¼å¼ã€?è¯¦æƒ…è¯·å‚è€?[æ ¼å¼åŒ–è¾“å‡ºæ•°æ®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-formatting) ä¸€èŠ‚ã€?
- [i18n](https://www.yiiframework.com/doc/api/2.0/yii-i18n-i18n): æ”¯æŒä¿¡æ¯ç¿»è¯‘å’Œæ ¼å¼åŒ–ã€?è¯¦æƒ…è¯·å‚è€?[å›½é™…åŒ–](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n) ä¸€èŠ‚ã€?
- [log](https://www.yiiframework.com/doc/api/2.0/yii-log-dispatcher): ç®¡ç†æ—¥å¿—å¯¹è±¡ã€?è¯¦æƒ…è¯·å‚è€?[æ—¥å¿—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-logging) ä¸€èŠ‚ã€?
- yii\swiftmailer\Mailer: æ”¯æŒç”Ÿæˆé‚®ä»¶ç»“æ„å¹¶å‘é€ï¼Œ è¯¦æƒ…è¯·å‚è€?[é‚®ä»¶](https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-mailing) ä¸€èŠ‚ã€?
- [response](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$response-detail): ä»£è¡¨å‘é€ç»™ç”¨æˆ·çš„å“åº”ï¼Œ è¯¦æƒ…è¯·å‚è€?[å“åº”](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-responses) ä¸€èŠ‚ã€?
- [request](https://www.yiiframework.com/doc/api/2.0/yii-base-application#$request-detail): ä»£è¡¨ä»ç»ˆç«¯ç”¨æˆ·å¤„æ¥æ”¶åˆ°çš„è¯·æ±‚ï¼?è¯¦æƒ…è¯·å‚è€?[è¯·æ±‚](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-requests) ä¸€èŠ‚ã€?
- [session](https://www.yiiframework.com/doc/api/2.0/yii-web-session): ä»£è¡¨ä¼šè¯ä¿¡æ¯ï¼?ä»…åœ¨[Web applications](https://www.yiiframework.com/doc/api/2.0/yii-web-application) ç½‘é¡µåº”ç”¨ä¸­å¯ç”¨ï¼Œ è¯¦æƒ…è¯·å‚è€?[Sessions (ä¼šè¯) and Cookies](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-sessions-cookies) ä¸€èŠ‚ã€?
- [urlManager](https://www.yiiframework.com/doc/api/2.0/yii-web-urlmanager): æ”¯æŒURLåœ°å€è§£æå’Œåˆ›å»ºï¼Œ è¯¦æƒ…è¯·å‚è€?[URL è§£æå’Œç”Ÿæˆ](https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-url-handling) ä¸€èŠ‚ã€?
- [user](https://www.yiiframework.com/doc/api/2.0/yii-web-user): ä»£è¡¨è®¤è¯ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼?ä»…åœ¨[Web applications](https://www.yiiframework.com/doc/api/2.0/yii-web-application) ç½‘é¡µåº”ç”¨ä¸­å¯ç”¨ï¼Œ è¯¦æƒ…è¯·å‚è€?[è®¤è¯](https://www.yiiframework.com/doc/guide/2.0/zh-cn/security-authentication) ä¸€èŠ‚ã€?
- [view](https://www.yiiframework.com/doc/api/2.0/yii-web-view): æ”¯æŒæ¸²æŸ“è§†å›¾ï¼?è¯¦æƒ…è¯·å‚è€?[Views](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views) ä¸€èŠ‚ã€?
