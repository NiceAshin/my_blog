---
title: å°éƒ¨ä»?
date: 2026-02-27
tags:
  - Yii2
  - PHP
categories:
  - PHPæ¡†æ¶æ¢ç´¢
prev: ./8.è¿‡æ»¤å™?md
next: false
---

# å°éƒ¨ä»?

å°éƒ¨ä»¶æ˜¯åœ¨[è§†å›¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views)ä¸­ä½¿ç”¨çš„å¯é‡ç”¨å•å…ƒï¼Œ ä½¿ç”¨é¢å‘å¯¹è±¡æ–¹å¼åˆ›å»ºå¤æ‚å’Œå¯é…ç½®ç”¨æˆ·ç•Œé¢å•å…ƒã€?ä¾‹å¦‚ï¼Œæ—¥æœŸé€‰æ‹©å™¨å°éƒ¨ä»¶å¯ç”Ÿæˆä¸€ä¸ªç²¾è‡´çš„å…è®¸ç”¨æˆ·é€‰æ‹©æ—¥æœŸçš„æ—¥æœŸé€‰æ‹©å™¨ï¼Œ ä½ åªéœ€è¦åœ¨è§†å›¾ä¸­æ’å…¥å¦‚ä¸‹ä»£ç ï¼š

```html
<?php
use yii\jui\DatePicker;
?>
<?= DatePicker::widget(['name' => 'date']) ?>
```

Yiiæä¾›è®¸å¤šä¼˜ç§€çš„å°éƒ¨ä»¶ï¼Œæ¯”å¦?[active form](https://www.yiiframework.com/doc/api/2.0/yii-widgets-activeform)ï¼Œ[menu](https://www.yiiframework.com/doc/api/2.0/yii-widgets-menu)ï¼?[jQuery UI widgets](https://www.yiiframework.com/doc/guide/2.0/zh-cn/widget-jui)ï¼?[Twitter Bootstrap widgets](https://www.yiiframework.com/doc/guide/2.0/zh-cn/widget-bootstrap)ã€?æ¥ä¸‹æ¥ä»‹ç»å°éƒ¨ä»¶çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¦‚æœä½ æƒ³äº†è§£æŸä¸ªå°éƒ¨ä»?please refer to å¯¹åº”çš„ç±» API æ–‡æ¡£ã€?

## ä½¿ç”¨å°éƒ¨ä»?

å°éƒ¨ä»¶åŸºæœ¬ä¸Šåœ?[views](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views) ä¸­ä½¿ç”¨ï¼Œ åœ¨è§†å›¾ä¸­å¯è°ƒç”?[yii\base\Widget::widget()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#widget()-detail) æ–¹æ³•ä½¿ç”¨å°éƒ¨ä»¶ã€?è¯¥æ–¹æ³•ä½¿ç”?[é…ç½®](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations) æ•°ç»„åˆå§‹åŒ–å°éƒ¨ä»¶å¹¶è¿”å›å°éƒ¨ä»¶æ¸²æŸ“åçš„ç»“æœã€?ä¾‹å¦‚å¦‚ä¸‹ä»£ç æ’å…¥ä¸€ä¸ªæ—¥æœŸé€‰æ‹©å™¨å°éƒ¨ä»¶ï¼Œå®ƒé…ç½®ä¸ºä½¿ç”¨ä¿„ç½—æ–¯è¯­ï¼Œ è¾“å…¥æ¡†å†…å®¹ä¸º `$model` çš?`from_date` å±æ€§å€¼ã€?

```html
<?php
use yii\jui\DatePicker;
?>
<?= DatePicker::widget([
    'model' => $model,
    'attribute' => 'from_date',
    'language' => 'ru',
    'dateFormat' => 'php:Y-m-d',
]) ?>
```

ä¸€äº›å°éƒ¨ä»¶å¯åœ¨ [yii\base\Widget::begin()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#begin()-detail) å’?[yii\base\Widget::end()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#end()-detail) è°ƒç”¨ä¸­ä½¿ç”¨æ•°æ®å†…å®¹ã€?ä¾‹å¦‚å¦‚ä¸‹ä»£ç ä½¿ç”¨ [yii\widgets\ActiveForm](https://www.yiiframework.com/doc/api/2.0/yii-widgets-activeform) å°éƒ¨ä»¶ç”Ÿæˆä¸€ä¸ªç™»å½•è¡¨å•ï¼Œ å°éƒ¨ä»¶ä¼šåœ?`begin()` å’?`end()` æ‰§è¡Œå¤„åˆ†åˆ«ç”Ÿæˆ?`<form>` çš„å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ï¼?ä¸­é—´çš„ä»»ä½•ä»£ç ä¹Ÿä¼šè¢«æ¸²æŸ“ã€?

```html
<?php
use yii\widgets\ActiveForm;
use yii\helpers\Html;
?>

<?php $form = ActiveForm::begin(['id' => 'login-form']); ?>

    <?= $form->field($model, 'username') ?>

    <?= $form->field($model, 'password')->passwordInput() ?>

    <div class="form-group">
        <?= Html::submitButton('Login') ?>
    </div>

<?php ActiveForm::end(); ?>
```

æ³¨æ„å’Œè°ƒç”?[yii\base\Widget::widget()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#widget()-detail) è¿”å›æ¸²æŸ“ç»“æœä¸åŒï¼?è°ƒç”¨ [yii\base\Widget::begin()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#begin()-detail) æ–¹æ³•è¿”å›ä¸€ä¸ªå¯ç»„å»ºå°éƒ¨ä»¶å†…å®¹çš„å°éƒ¨ä»¶å®ä¾‹ã€?

> **æ³¨æ„ï¼?* å½“è°ƒç”?[yii\base\Widget::end()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#end()-detail) çš„æ—¶å€™ï¼Œä¸€äº›å°éƒ¨ä»¶å°†ä½¿ç”?[è¾“å‡ºç¼“å†²](https://www.php.net/manual/zh/book.outcontrol.php) æ¥è°ƒæ•´å°é—­çš„å†…å®¹ã€‚å› æ­¤ï¼Œå½“è°ƒç”?[yii\base\Widget::begin()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#begin()-detail) å’?[yii\base\Widget::end()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#end()-detail) æ—¶ï¼Œæœ€å¥½åœ¨åŒä¸€ä¸ªè§†å›¾æ–‡ä»¶é‡Œã€?ä¸éµå¾ªè¿™ä¸ªè§„åˆ™å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„è¾“å‡ºã€?

### é…ç½®å…¨å±€é»˜è®¤å€?

å°éƒ¨ä»¶çš„å…¨å±€é»˜è®¤å€¼å¯ä»¥é€šè¿‡ DI å®¹å™¨é…ç½®ï¼?

```php
\Yii::$container->set('yii\widgets\LinkPager', ['maxButtonCount' => 5]);
```

æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [ä¾èµ–æ³¨å…¥å®¹å™¨â€œå®è·µä¸­çš„åº”ç”¨â€ä¸€èŠ‚](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-di-container#practical-usage) ã€?

## åˆ›å»ºå°éƒ¨ä»?

å¯ä»¥æ ¹æ®éœ€è¦ä»¥ä¸¤ç§ä¸åŒæ–¹å¼åˆ›å»ºå°éƒ¨ä»¶ã€?

### 1: ä½¿ç”¨ `widget()` æ–¹æ³•

ç»§æ‰¿ [yii\base\Widget](https://www.yiiframework.com/doc/api/2.0/yii-base-widget) ç±»å¹¶è¦†ç›– [yii\base\Widget::init()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#init()-detail) å’?æˆ?[yii\base\Widget::run()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#run()-detail) æ–¹æ³•å¯åˆ›å»ºå°éƒ¨ä»¶ã€‚é€šå¸¸ `init()` æ–¹æ³•å¤„ç†å°éƒ¨ä»¶å±æ€§ï¼Œ `run()` æ–¹æ³•åŒ…å«å°éƒ¨ä»¶ç”Ÿæˆæ¸²æŸ“ç»“æœçš„ä»£ç ã€?æ¸²æŸ“ç»“æœå¯ä»¥ç›´æ¥â€œè¾“å‡ºâ€æˆ–é€šè¿‡ `run()` æ–¹æ³•ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€?

å¦‚ä¸‹ä»£ç ä¸?`HelloWidget` ç¼–ç å¹¶æ˜¾ç¤ºèµ‹ç»?`message` å±æ€§çš„å€¼ï¼Œ å¦‚æœå±æ€§æ²¡æœ‰è¢«èµ‹å€¼ï¼Œé»˜è®¤ä¼šæ˜¾ç¤?"Hello World"ã€?

```php
namespace app\components;

use yii\base\Widget;
use yii\helpers\Html;

class HelloWidget extends Widget
{
    public $message;

    public function init()
    {
        parent::init();
        if ($this->message === null) {
            $this->message = 'Hello World';
        }
    }

    public function run()
    {
        return Html::encode($this->message);
    }
}
```

ä½¿ç”¨è¿™ä¸ªå°éƒ¨ä»¶åªéœ€åœ¨è§†å›¾ä¸­ç®€å•ä½¿ç”¨å¦‚ä¸‹ä»£ç ?

```html
<?php
use app\components\HelloWidget;
?>
<?= HelloWidget::widget(['message' => 'Good morning']) ?>
```

æœ‰æ—¶å°éƒ¨ä»¶éœ€è¦æ¸²æŸ“å¾ˆå¤šå†…å®¹ï¼Œè™½ç„¶ä½ å¯ä»¥åœ¨ `run()` æ–¹æ³•ä¸­åµŒå…¥å†…å®¹ï¼Œä½†æ›´å¥½çš„æ–¹æ³•æ˜¯å°†å†…å®¹æ”¾å…¥ä¸€ä¸ª[è§†å›¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views)æ–‡ä»¶ï¼?ç„¶åè°ƒç”¨ [yii\base\Widget::render()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#render()-detail) æ–¹æ³•æ¸²æŸ“è¯¥è§†å›¾æ–‡ä»¶ï¼Œ ä¾‹å¦‚ï¼?

```php
public function run()
{
    return $this->render('hello');
}
```

### 2: ä½¿ç”¨ `begin()` å’?`end()` æ–¹æ³•

è¿™ç±»ä¼¼äºä¸Šé¢çš„æœ‰ç»†å¾®å·®åˆ«ã€?ä»¥ä¸‹æ˜¯å¦ä¸€ç§å¯åœ?`begin()` å’?`end()` è°ƒç”¨ä¸­ä½¿ç”¨çš„ `HelloWidget`ï¼?HTML ç¼–ç å†…å®¹ç„¶åæ˜¾ç¤ºã€?

```php
namespace app\components;

use yii\base\Widget;
use yii\helpers\Html;

class HelloWidget extends Widget
{
    public function init()
    {
        parent::init();
        ob_start();
    }

    public function run()
    {
        $content = ob_get_clean();
        return Html::encode($content);
    }
}
```

å¦‚ä¸Šæ‰€ç¤ºï¼ŒPHP è¾“å‡ºç¼“å†²åœ?`init()` å¯åŠ¨ï¼Œæ‰€æœ‰åœ¨ `init()` å’?`run()` æ–¹æ³•ä¹‹é—´çš„è¾“å‡ºå†…å®¹éƒ½ä¼šè¢«è·å–ï¼Œå¹¶åœ?`run()` å¤„ç†å’Œè¿”å›ã€?

> **ä¿¡æ¯ï¼?* å½“ä½ è°ƒç”¨ [yii\base\Widget::begin()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#begin()-detail) æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å°éƒ¨ä»¶ å®ä¾‹å¹¶åœ¨æ„é€ ç»“æŸæ—¶è°ƒç”¨ `init()` æ–¹æ³•ï¼?åœ?`end()` æ—¶ä¼šè°ƒç”¨ `run()` æ–¹æ³•å¹¶è¾“å‡ºè¿”å›ç»“æœã€?

å¦‚ä¸‹ä»£ç æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ç§ `HelloWidget`ï¼?

```php
<?php
use app\components\HelloWidget;
?>
<?php HelloWidget::begin(); ?>

    sample content that may contain one or more <strong>HTML</strong> <pre>tags</pre>

    If this content grows too big, use sub views

    For e.g.

    <?php echo $this->render('viewfile'); // Note: here render() method is of class \yii\base\View as this part of code is within view file and not in Widget class file ?>

<?php HelloWidget::end(); ?>
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå°éƒ¨ä»¶çš„è§†å›¾åº”å­˜å‚¨åœ¨ `WidgetPath/views` ç›®å½•ï¼Œ`WidgetPath` ä»£è¡¨å°éƒ¨ä»¶ç±»æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€?å‡å¦‚å°éƒ¨ä»¶ç±»æ–‡ä»¶åœ?`@app/components` ä¸‹ï¼Œ ä¸Šè¿°ç¤ºä¾‹ä¼šæ¸²æŸ?`@app/components/views/hello.php` è§†å›¾æ–‡ä»¶ã€?æ‚¨å¯ä»¥è¦†ç›?[yii\base\Widget::getViewPath()](https://www.yiiframework.com/doc/api/2.0/yii-base-widget#getViewPath()-detail) æ–¹æ³•è‡ªå®šä¹‰è§†å›¾æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€?

## æœ€ä½³å®è·?

å°éƒ¨ä»¶æ˜¯é¢å‘å¯¹è±¡æ–¹å¼æ¥é‡ç”¨è§†å›¾ä»£ç ã€?

åˆ›å»ºå°éƒ¨ä»¶æ—¶ä»éœ€è¦éµå¾ªMVCæ¨¡å¼ï¼Œé€šå¸¸é€»è¾‘ä»£ç åœ¨å°éƒ¨ä»¶ç±»ï¼Œ å±•ç¤ºå†…å®¹åœ¨[è§†å›¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views)ä¸­ã€?

å°éƒ¨ä»¶è®¾è®¡æ—¶åº”æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ä¸€ä¸ªå°éƒ¨ä»¶æ—¶å€™ï¼Œ å¯ä»¥ç›´æ¥ä¸¢å¼ƒå®ƒè€Œä¸éœ€è¦é¢å¤–çš„å¤„ç†ã€?ä½†æ˜¯å½“å°éƒ¨ä»¶éœ€è¦å¤–éƒ¨èµ„æºå¦‚ CSSï¼ŒJavaScriptï¼Œå›¾ç‰‡ç­‰ä¼šæ¯”è¾ƒæ£˜æ‰‹ï¼Œ å¹¸è¿çš„æ—¶å€™Yiiæä¾› [èµ„æºåŒ…](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-asset-bundles) æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€?

å½“ä¸€ä¸ªå°éƒ¨ä»¶åªåŒ…å«è§†å›¾ä»£ç ï¼Œå®ƒå’Œ[è§†å›¾](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views)å¾ˆç›¸ä¼¼ï¼Œ å®é™…ä¸Šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å°éƒ¨ä»¶æ˜¯å¯ä»¥é‡ç”¨ç±»ï¼Œ è§†å›¾åªæ˜¯åº”ç”¨ä¸­ä½¿ç”¨çš„æ™®é€?PHP è„šæœ¬ã€?
