(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{491:function(s,a,e){"use strict";e.r(a);var t=e(2),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jvm配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm配置"}},[s._v("#")]),s._v(" JVM配置")]),s._v(" "),a("h2",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),a("p",[s._v("JVM配置参数的第一位都是"),a("strong",[s._v("X")]),s._v(", 表示对JVM的配置")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("-Xss: 设置线程的最大栈空间, 决定了栈的深度, 默认都是1024KB")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   -Xss256k \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-Xms: 设置堆空间的起始内存大小, 默认大小是物理内存/64")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -Xms10m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-Xmx: 设置堆空间的最大内存大小, 默认大小是物理内存/4")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -Xmx10m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"},[s._v("Tip")]),a("p",[s._v("-Xms与-Xmx最好设置为相同的值, 避免扩容操作")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:+PrintGCDetails: 控制台打印GC日志")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:+PrintGCDetails\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:NewRatio=2: 修改新生代与老年代在堆空间的占比, 后面的数字表示老年代是新生代的几倍")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:NewRatio=2 // 新生代占1, 老年代占2, 新生代占1/3\n    -XX:NewRatio=4 // 新生代占1, 老年代占5, 新生代占1/5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:SurvivorRatio=8: 修改新生代中Eden与From和To的比例")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:SurvivorRatio=8 // Eden占1, From占2, To占1/3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-Xmn: 设置新生代内存大小, 当与-XX:NewRatio配置冲突时, 以-Xmn为准.")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -Xmn200m //设置新生代大小为200m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:"),a("strong",[s._v("-")]),s._v(" UseAdaptiveSizePolicy: 关闭自适应内存分配策略, 默认是打开的, "),a("strong",[s._v("-")]),s._v(" 号改为 "),a("strong",[s._v("+")]),s._v(" 号为开启")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:-UseAdaptiveSizePolicy // 关闭自适应内存分配策略\n    -XX:+UseAdaptiveSizePolicy // 开启自适应内存分配策略\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:MaxTenuringThreshold: 设置GC多少次后新生代对象晋升到老年代, 默认15次")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:MaxTenuringThreshold=20  //GC20次晋升到老年代\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:HandlePromotionFailure: 设置空间分配担保, "),a("strong",[s._v("JDK7之后不再使用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:HandlePromotionFailure=true  //空间分配担保\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:+UseTLAB: 开启关闭TLAB, 默认是开启的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:+UseTLAB  //开启TLAB\n    -XX:-UseTLAB  //关闭TLAB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:TLABWasteTargetPercent: 修改TLAB占Eden空间的百分比, 默认1%")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:TLABWasteTargetPercent=5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:MetaspaceSize: 修改元空间大小")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:MetaspaceSize=50m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:MaxMetaspaceSize: 修改最大元空间大小")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:MaxMetaspaceSize=200m \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:MaxDirectMemorySize: 修改直接内存占用上限")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:MaxDirectMemorySize=20m \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:+PrintFlagsInitial: 查看所有JVM参数的默认初始值")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:+PrintFlagsInitial\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("-XX:+PrintFlagsFinal: 查看所有参数的最终值(可能是默认值, 也可能修改过)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    -XX:+PrintFlagsFinal\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("jps: 查看java进程")])]),s._v(" "),a("li",[a("p",[s._v("jstat:")]),s._v(" "),a("ul",[a("li",[s._v("-gc: 查看GC信息"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    jstat -gc java进程pid \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("jinfo")]),s._v(" "),a("ul",[a("li",[s._v("-flag: 查看运行中的jvm进程的参数配置"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    jinfo -flag UseTLAB java进程pid\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);