(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{554:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"应用主体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用主体"}},[t._v("#")]),t._v(" 应用主体")]),t._v(" "),a("p",[t._v("应用主体是管理 Yii 应用系统整体结构和生命周期的对象。 每个 Yii 应用系统只能包含一个应用主体，应用主体在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("入口脚本"),a("OutboundLink")],1),t._v(" 中创建并能通过表达式 "),a("code",[t._v("\\Yii::$app")]),t._v(" 全局范围内访问。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("信息：")]),t._v(" 当我们说“一个应用”，它可能是一个应用主体对象，也可能是一个应用系统， 是根据上下文来决定[译：中文为避免歧义，Application 翻译为应用主体]。")])]),t._v(" "),a("p",[t._v("Yii有两种应用主体: "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("网页应用主体"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-console-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制台应用主体"),a("OutboundLink")],1),t._v("， 如名称所示，前者主要处理网页请求，后者处理控制台请求。")]),t._v(" "),a("h2",{attrs:{id:"应用主体配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用主体配置"}},[t._v("#")]),t._v(" 应用主体配置")]),t._v(" "),a("p",[t._v("如下所示，当 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("入口脚本"),a("OutboundLink")],1),t._v(" 创建了一个应用主体， 它会加载一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),a("OutboundLink")],1),t._v(" 文件并传给应用主体。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'/../vendor/autoload.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'/../vendor/yiisoft/yii2/Yii.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加载应用主体配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("__DIR__")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'/../config/web.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化应用主体、配置应用主体")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("类似其他 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),a("OutboundLink")],1),t._v(" 文件, 应用主体配置文件标明如何设置应用对象初始属性。 由于应用主体配置比较复杂，一般保存在多个类似如上web.php的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations#configuration-files",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件"),a("OutboundLink")],1),t._v(" 当中。")]),t._v(" "),a("h2",{attrs:{id:"应用主体属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用主体属性"}},[t._v("#")]),t._v(" 应用主体属性")]),t._v(" "),a("p",[t._v("应用主体配置文件中有许多重要的属性要配置，这些属性指定应用主体的运行环境。 比如，应用主体需要知道如何加载 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" ， 临时文件保存到哪儿等等。 以下我们简述 these 属性。")]),t._v(" "),a("h3",{attrs:{id:"必要属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#必要属性"}},[t._v("#")]),t._v(" 必要属性")]),t._v(" "),a("p",[t._v("在一个应用中，至少要配置2个属性: "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("id"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("id"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("id"),a("OutboundLink")],1),t._v(" 属性用来区分其他应用的唯一标识ID。主要给程序使用。 为了方便协作，最好使用数字作为应用主体ID， 但不强制要求为数字。")]),t._v(" "),a("h4",{attrs:{id:"basepath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basepath"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1),t._v(" 指定该应用的根目录。 根目录包含应用系统所有受保护的源代码。 在根目录下可以看到对应 MVC 设计模式的"),a("code",[t._v("models")]),t._v("， "),a("code",[t._v("views")]),t._v("，"),a("code",[t._v("controllers")]),t._v(" 等子目录。")]),t._v(" "),a("p",[t._v("可以使用路径或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("路径别名"),a("OutboundLink")],1),t._v(" 来在配置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1),t._v(" 属性。 两种格式所对应的目录都必须存在，否则系统会抛出一个异常。 系统会使用 "),a("code",[t._v("realpath()")]),t._v(" 函数规范化配置的路径。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1),t._v(" 属性经常用于派生一些其他重要路径（如 runtime 路径）， 因此，系统预定义 "),a("code",[t._v("@app")]),t._v(" 代表这个路径。 派生路径可以通过这个别名组成（如"),a("code",[t._v("@app/runtime")]),t._v("代表runtime的路径）。")]),t._v(" "),a("h3",{attrs:{id:"重要属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重要属性"}},[t._v("#")]),t._v(" 重要属性")]),t._v(" "),a("p",[t._v("本小节所描述的属性通常需要设置， 因为不同的应用属性不同。")]),t._v(" "),a("h4",{attrs:{id:"aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliases"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$aliases-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("aliases"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性允许你用一个数组定义多个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("。 数组的key为别名名称，值为对应的路径。 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'aliases'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@name1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path/to/path1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@name2'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'path/to/path2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("使用这个属性来定义别名， 代替 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-baseyii#setAlias()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yii::setAlias()"),a("OutboundLink")],1),t._v(" 方法来设置。")]),t._v(" "),a("h4",{attrs:{id:"bootstrap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrap"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("这个属性很实用，它允许你用数组指定启动阶段 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrapping process"),a("OutboundLink")],1),t._v(" 需要运行的组件。 比如，如果你希望一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" 自定义 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-url-handling",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL 规则"),a("OutboundLink")],1),t._v("， 你可以将模块ID加入到bootstrap数组中。")]),t._v(" "),a("p",[t._v("属性中的每个组件需要指定以下一项:")]),t._v(" "),a("ul",[a("li",[t._v("应用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#components",target:"_blank",rel:"noopener noreferrer"}},[t._v("组件"),a("OutboundLink")],1),t._v(" ID.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" ID.")]),t._v(" "),a("li",[t._v("类名.")]),t._v(" "),a("li",[t._v("配置数组.")]),t._v(" "),a("li",[t._v("创建并返回一个组件的无名称函数.")])]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'bootstrap'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 应用组件ID或模块ID")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'demo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类名")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\components\\Profiler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置数组")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\components\\Profiler'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'level'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 匿名函数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("components"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Profiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("blockquote",[a("p",[a("strong",[t._v("信息：")]),t._v(" 如果模块 ID 和应用组件 ID 同名，优先使用应用组件 ID， 如果你想用模块 ID， 可以使用如下无名称函数返回模块 ID。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])]),t._v(" "),a("p",[t._v("在启动阶段，每个组件都会实例化。如果组件类实现接口 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-bootstrapinterface",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\BootstrapInterface"),a("OutboundLink")],1),t._v("，也会调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-bootstrapinterface#bootstrap()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrap()"),a("OutboundLink")],1),t._v(" 方法。")]),t._v(" "),a("p",[t._v("举一个实际的例子，"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/start-installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("Basic Application Template"),a("OutboundLink")],1),t._v(" 应用主体配置中， 开发环境下会在启动阶段运行 "),a("code",[t._v("debug")]),t._v(" 和 "),a("code",[t._v("gii")]),t._v(" 模块。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("YII_ENV_DEV")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// configuration adjustments for 'dev' environment")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'bootstrap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'debug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'debug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yii\\debug\\Module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'bootstrap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'gii'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'gii'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yii\\gii\\Module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("blockquote",[a("p",[a("strong",[t._v("注意：")]),t._v(" 启动太多的组件会降低系统性能，因为每次请求都需要重新运行启动组件， 因此谨慎配置启动组件。")])]),t._v(" "),a("h4",{attrs:{id:"catchall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#catchall"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-application#$catchAll-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("catchAll"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性仅 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web applications"),a("OutboundLink")],1),t._v(" 网页应用支持。 它指定一个要处理所有用户请求的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器方法"),a("OutboundLink")],1),t._v("， 通常在维护模式下使用，同一个方法处理所有用户请求。")]),t._v(" "),a("p",[t._v("该配置为一个数组，第一项指定动作的路由，剩下的数组项(key-value 成对)指定传递给动作的参数， 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'catchAll'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'offline/notice'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'param1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'value1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'param2'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'value2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("blockquote",[a("p",[a("strong",[t._v("信息：")]),t._v(" 当开启这个属性时，开发环境下的调试面板将不能工作。")])]),t._v(" "),a("h4",{attrs:{id:"components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#components"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-di-servicelocator#$components-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("components"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("这是最重要的属性，它允许你注册多个在其他地方使用的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/#structure-application-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("应用组件"),a("OutboundLink")],1),t._v("。 例如")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'components'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'cache'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yii\\caching\\FileCache'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'user'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'identityClass'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\models\\User'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'enableAutoLogin'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("每一个应用组件指定一个key-value对的数组，key代表组件ID， value代表组件类名或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("在应用中可以任意注册组件，并可以通过表达式 "),a("code",[t._v("\\Yii::$app->ComponentID")]),t._v(" 全局访问。")]),t._v(" "),a("p",[t._v("详情请阅读 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-application-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("应用组件"),a("OutboundLink")],1),t._v(" 一节.")]),t._v(" "),a("h4",{attrs:{id:"controllermap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controllermap"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$controllerMap-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("controllerMap"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性允许你指定一个控制器 ID 到任意控制器类。 Yii 遵循一个默认的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#controllerNamespace",target:"_blank",rel:"noopener noreferrer"}},[t._v("规则"),a("OutboundLink")],1),t._v(" 指定控制器 ID 到任意控制器类（如 "),a("code",[t._v("post")]),t._v(" 对应"),a("code",[t._v("app\\controllers\\PostController")]),t._v("）。 通过配置这个属性，可以打破这个默认规则，在下面的例子中， "),a("code",[t._v("account")]),t._v("对应到"),a("code",[t._v("app\\controllers\\UserController")]),t._v("， "),a("code",[t._v("article")]),t._v(" 对应到 "),a("code",[t._v("app\\controllers\\PostController")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'controllerMap'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'account'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\controllers\\UserController'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'article'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\controllers\\PostController'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'enableCsrfValidation'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("数组的键代表控制器ID， 数组的值代表对应的类名。")]),t._v(" "),a("h4",{attrs:{id:"controllernamespace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controllernamespace"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$controllerNamespace-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("controllerNamespace"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定控制器类默认的命名空间，默认为"),a("code",[t._v("app\\controllers")]),t._v("。 比如控制器ID为 "),a("code",[t._v("post")]),t._v(" 默认对应 "),a("code",[t._v("PostController")]),t._v("（不带命名空间）， 类全名为 "),a("code",[t._v("app\\controllers\\PostController")]),t._v("。")]),t._v(" "),a("p",[t._v("控制器类文件可能放在这个命名空间对应目录的子目录下， 例如，控制器 ID "),a("code",[t._v("admin/post")]),t._v(" 对应的控制器类全名为 "),a("code",[t._v("app\\controllers\\admin\\PostController")]),t._v("。")]),t._v(" "),a("p",[t._v("控制器类全面能被 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-autoloading",target:"_blank",rel:"noopener noreferrer"}},[t._v("自动加载"),a("OutboundLink")],1),t._v("， 这点是非常重要的，控制器类的实际命名空间对应这个属性， 否则，访问时你会收到“Page Not Found”。")]),t._v(" "),a("p",[t._v("如果你想打破上述的规则， 可以配置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#controllerMap",target:"_blank",rel:"noopener noreferrer"}},[t._v("controllerMap"),a("OutboundLink")],1),t._v(" 属性。")]),t._v(" "),a("h4",{attrs:{id:"language"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#language"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$language-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("language"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定应用展示给终端用户的语言， 默认为 "),a("code",[t._v("en")]),t._v(" 标识英文。 如果需要之前其他语言可以配置该属性。")]),t._v(" "),a("p",[t._v("该属性影响各种 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("国际化"),a("OutboundLink")],1),t._v(" ， 包括信息翻译、日期格式、数字格式等。 例如 yii\\jui\\DatePicker 小部件会根据该属性 展示对应语言的日历以及日期格式。")]),t._v(" "),a("p",[t._v("推荐遵循 "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/IETF%E8%AA%9E%E8%A8%80%E6%A8%99%E7%B1%A4",target:"_blank",rel:"noopener noreferrer"}},[t._v("IETF language tag"),a("OutboundLink")],1),t._v(" 来设置语言， 例如 "),a("code",[t._v("en")]),t._v(" 代表英文， "),a("code",[t._v("en-US")]),t._v(" 代表英文(美国).")]),t._v(" "),a("p",[t._v("该属性的更多信息可参考 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("国际化"),a("OutboundLink")],1),t._v(" 一节.")]),t._v(" "),a("h4",{attrs:{id:"modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modules"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$modules-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("modules"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定应用所包含的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("该属性使用数组包含多个模块类 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),a("OutboundLink")],1),t._v("，数组的键为模块ID， 例：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'modules'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "booking" 模块以及对应的类')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'booking'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\modules\\booking\\BookingModule'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "comment" 模块以及对应的配置数组')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'comment'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\modules\\comment\\CommentModule'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'db'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("更多详情请参考 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" 一节。")]),t._v(" "),a("h4",{attrs:{id:"name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$name-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("name"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定你可能想展示给终端用户的应用名称， 不同于需要唯一性的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$id-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("id"),a("OutboundLink")],1),t._v(" 属性， 该属性可以不唯一，该属性用于显示应用的用途。")]),t._v(" "),a("p",[t._v("如果其他地方的代码没有用到，可以不配置该属性。")]),t._v(" "),a("h4",{attrs:{id:"params"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#params"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$params-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("params"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性为一个数组，指定可以全局访问的参数， 代替程序中硬编码的数字和字符， 应用中的参数定义到一个单独的文件并随时可以访问是一个好习惯。 例如用参数定义缩略图的长宽如下：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'params'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'thumbnail.size'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("然后简单的使用如下代码即可获取到你需要的长宽参数：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$size")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'thumbnail.size'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$width")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'thumbnail.size'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("以后想修改缩略图长宽， 只需要修改该参数而不需要相关的代码。")]),t._v(" "),a("h4",{attrs:{id:"sourcelanguage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sourcelanguage"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$sourceLanguage-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("sourceLanguage"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定应用代码的语言，默认为 "),a("code",[t._v("'en-US'")]),t._v(" 标识英文（美国）， 如果应用不是英文请修改该属性。")]),t._v(" "),a("p",[t._v("和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#language",target:"_blank",rel:"noopener noreferrer"}},[t._v("语言"),a("OutboundLink")],1),t._v(" 属性类似，配置该属性需遵循 "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/IETF%E8%AA%9E%E8%A8%80%E6%A8%99%E7%B1%A4",target:"_blank",rel:"noopener noreferrer"}},[t._v("IETF language tag"),a("OutboundLink")],1),t._v(". 例如 "),a("code",[t._v("en")]),t._v(" 代表英文， "),a("code",[t._v("en-US")]),t._v(" 代表英文(美国)。")]),t._v(" "),a("p",[t._v("该属性的更多信息可参考 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("国际化"),a("OutboundLink")],1),t._v(" 一节.")]),t._v(" "),a("h4",{attrs:{id:"timezone"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timezone"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$timeZone-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("timeZone"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性提供一种方式修改 PHP 运行环境中的默认时区，配置该属性本质上就是调用 PHP 函数 "),a("a",{attrs:{href:"https://www.php.net/manual/zh/function.date-default-timezone-set.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("date_default_timezone_set()"),a("OutboundLink")],1),t._v("， 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'timeZone'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'America/Los_Angeles'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("有关设置时区含义的更多详细信息，请查看"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-formatting#time-zones",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于日期格式的部分"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$version-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("version"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定应用的版本，默认为 "),a("code",[t._v("'1.0'")]),t._v("， 其他代码不使用的话可以不配置。")]),t._v(" "),a("h3",{attrs:{id:"实用属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实用属性"}},[t._v("#")]),t._v(" 实用属性")]),t._v(" "),a("p",[t._v("本小节描述的属性不经常设置，通常使用系统默认值。 如果你想改变默认值，可以配置这些属性。")]),t._v(" "),a("h4",{attrs:{id:"charset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charset"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$charset-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("charset"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定应用使用的字符集，默认值为 "),a("code",[t._v("'UTF-8'")]),t._v("， 绝大部分应用都在使用，除非已有的系统大量使用非unicode数据才需要更改该属性。")]),t._v(" "),a("h4",{attrs:{id:"defaultroute"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defaultroute"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$defaultRoute-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("defaultRoute"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定未配置的请求的响应 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由"),a("OutboundLink")],1),t._v(" 规则， 路由规则可能包含模块 ID，控制器 ID，动作 ID。 例如 "),a("code",[t._v("help")]),t._v("，"),a("code",[t._v("post/create")]),t._v("，"),a("code",[t._v("admin/post/create")]),t._v("，如果动作 ID 没有指定， 会使用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$defaultAction-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Controller::$defaultAction"),a("OutboundLink")],1),t._v(" 中指定的默认值。")]),t._v(" "),a("p",[t._v("对于 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web applications"),a("OutboundLink")],1),t._v(" 网页应用， 默认值为 "),a("code",[t._v("'site'")]),t._v(" 对应 "),a("code",[t._v("SiteController")]),t._v(" 控制器，并使用默认的动作。 因此你不带路由的访问应用，默认会显示 "),a("code",[t._v("app\\controllers\\SiteController::actionIndex()")]),t._v(" 的结果。")]),t._v(" "),a("p",[t._v("对于 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-console-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("console applications"),a("OutboundLink")],1),t._v(" 控制台应用， 默认值为 "),a("code",[t._v("'help'")]),t._v(" 对应 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-console-controllers-helpcontroller#actionIndex()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\console\\controllers\\HelpController::actionIndex()"),a("OutboundLink")],1),t._v("。 因此，如果执行的命令不带参数，默认会显示帮助信息。")]),t._v(" "),a("h4",{attrs:{id:"extensions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extensions"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$extensions-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("extensions"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性用数组列表指定应用安装和使用的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-extensions",target:"_blank",rel:"noopener noreferrer"}},[t._v("扩展"),a("OutboundLink")],1),t._v("， 默认使用 "),a("code",[t._v("@vendor/yiisoft/extensions.php")]),t._v(" 文件返回的数组。 当你使用 "),a("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Composer"),a("OutboundLink")],1),t._v(" 安装扩展，"),a("code",[t._v("extensions.php")]),t._v(" 会被自动生成和维护更新。 所以大多数情况下，不需要配置该属性。")]),t._v(" "),a("p",[t._v("特殊情况下你想自己手动维护扩展，可以参照如下配置该属性：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'extensions'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'extension name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'version'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'version number'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'bootstrap'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'BootstrapClassName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可选配，可为配置数组")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'alias'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可选配")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@alias1'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'to/path1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@alias2'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'to/path2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 更多像上面的扩展 ...")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[t._v("如上所示，该属性包含一个扩展定义数组，每个扩展为一个包含 "),a("code",[t._v("name")]),t._v(" 和 "),a("code",[t._v("version")]),t._v(" 项的数组。 如果扩展要在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-bootstrapping",target:"_blank",rel:"noopener noreferrer"}},[t._v("引导启动"),a("OutboundLink")],1),t._v(" 阶段运行， 需要配置 "),a("code",[t._v("bootstrap")]),t._v(" 以及对应的引导启动类名或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("configuration"),a("OutboundLink")],1),t._v(" 数组。 扩展也可以定义 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"layout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#layout"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定渲染 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图"),a("OutboundLink")],1),t._v(" 默认使用的布局名字， 默认值为 "),a("code",[t._v("'main'")]),t._v(" 对应"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#layoutPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局路径"),a("OutboundLink")],1),t._v("下的 "),a("code",[t._v("main.php")]),t._v(" 文件， 如果 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#layoutPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局路径"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图路径"),a("OutboundLink")],1),t._v(" 都是默认值， 默认布局文件可以使用路径别名 "),a("code",[t._v("@app/views/layouts/main.php")])]),t._v(" "),a("p",[t._v("如果不想设置默认布局文件，可以设置该属性为 "),a("code",[t._v("false")]),t._v("，这种做法比较罕见。")]),t._v(" "),a("h4",{attrs:{id:"layoutpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#layoutpath"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layoutPath"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定查找布局文件的路径，默认值为 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图路径"),a("OutboundLink")],1),t._v(" 下的 "),a("code",[t._v("layouts")]),t._v(" 子目录。 如果 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#viewPath",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图路径"),a("OutboundLink")],1),t._v(" 使用默认值， 默认的布局路径别名为"),a("code",[t._v("@app/views/layouts")]),t._v("。")]),t._v(" "),a("p",[t._v("该属性需要配置成一个目录或 路径 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"runtimepath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runtimepath"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$runtimePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("runtimePath"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定临时文件如日志文件、缓存文件等保存路径， 默认值为带别名的 "),a("code",[t._v("@app/runtime")]),t._v("。")]),t._v(" "),a("p",[t._v("可以配置该属性为一个目录或者路径 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("， 注意应用运行时有对该路径的写入权限， 以及终端用户不能访问该路径因为临时文件可能包含一些敏感信息。")]),t._v(" "),a("p",[t._v("为了简化访问该路径，Yii 预定义别名 "),a("code",[t._v("@runtime")]),t._v(" 代表该路径。")]),t._v(" "),a("h4",{attrs:{id:"viewpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewpath"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("viewPath"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该路径指定视图文件的根目录，默认值为带别名的 "),a("code",[t._v("@app/views")]),t._v("， 可以配置它为一个目录或者路径 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"vendorpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vendorpath"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$vendorPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("vendorPath"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性指定 "),a("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Composer"),a("OutboundLink")],1),t._v(" 管理的供应商路径， 该路径包含应用使用的包括Yii框架在内的所有第三方库。 默认值为带别名的 "),a("code",[t._v("@app/vendor")]),t._v(" 。")]),t._v(" "),a("p",[t._v("可以配置它为一个目录或者路径 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("， 当你修改时，务必修改对应的 Composer 配置。")]),t._v(" "),a("p",[t._v("为了简化访问该路径，Yii 预定义别名 "),a("code",[t._v("@vendor")]),t._v(" 代表该路径。")]),t._v(" "),a("h4",{attrs:{id:"enablecorecommands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enablecorecommands"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-console-application#$enableCoreCommands-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("enableCoreCommands"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该属性仅 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-console-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("console applications"),a("OutboundLink")],1),t._v(" 控制台应用支持， 用来指定是否启用 Yii 中的核心命令，默认值为 "),a("code",[t._v("true")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"应用事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用事件"}},[t._v("#")]),t._v(" 应用事件")]),t._v(" "),a("p",[t._v("应用在处理请求过程中会触发事件，可以在配置文件配置事件处理代码， 如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'on beforeRequest'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("code",[t._v("on eventName")]),t._v(" 语法的用法在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations#configuration-format",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configurations"),a("OutboundLink")],1),t._v(" 一节有详细描述.")]),t._v(" "),a("p",[t._v("另外，在应用主体实例化后，你可以在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-bootstrapping",target:"_blank",rel:"noopener noreferrer"}},[t._v("引导启动"),a("OutboundLink")],1),t._v(" 阶段附加事件处理代码， 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT_BEFORE_REQUEST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"event-before-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-before-request"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_BEFORE_REQUEST-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEFORE_REQUEST"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该事件在应用处理请求 "),a("em",[t._v("before")]),t._v(" 之前，实际的事件名为 "),a("code",[t._v("beforeRequest")]),t._v("。")]),t._v(" "),a("p",[t._v("在事件触发前，应用主体已经实例化并配置好了， 所以通过事件机制将你的代码嵌入到请求处理过程中非常不错。 例如在事件处理中根据某些参数动态设置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$language-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Application::$language"),a("OutboundLink")],1),t._v(" 语言属性。")]),t._v(" "),a("h3",{attrs:{id:"event-after-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-after-request"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_AFTER_REQUEST-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_AFTER_REQUEST"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该事件在应用处理请求 "),a("em",[t._v("after")]),t._v(" 之后但在返回响应 "),a("em",[t._v("before")]),t._v(" 之前触发， 实际的事件名为 "),a("code",[t._v("afterRequest")]),t._v("。")]),t._v(" "),a("p",[t._v("该事件触发时，请求已经被处理完， 可以做一些请求后处理或自定义响应。")]),t._v(" "),a("p",[t._v("注意 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-response",target:"_blank",rel:"noopener noreferrer"}},[t._v("response"),a("OutboundLink")],1),t._v(" 组件在发送响应给终端用户时也会触发一些事件， 这些事件都在本事件 "),a("em",[t._v("after")]),t._v(" 之后触发。")]),t._v(" "),a("h3",{attrs:{id:"event-before-action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-before-action"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#EVENT_BEFORE_ACTION-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEFORE_ACTION"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该事件在每个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器动作"),a("OutboundLink")],1),t._v(" 运行"),a("em",[t._v("before")]),t._v("之前会被触发， 实际的事件名为 "),a("code",[t._v("beforeAction")]),t._v(".")]),t._v(" "),a("p",[t._v("事件的参数为一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ActionEvent"),a("OutboundLink")],1),t._v(" 实例， 事件处理中可以设置"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$isValid-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ActionEvent::$isValid"),a("OutboundLink")],1),t._v(" 为 "),a("code",[t._v("false")]),t._v(" 停止运行后续动作， 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'on beforeAction'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("some condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("isValid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("注意 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" 都会触发 "),a("code",[t._v("beforeAction")]),t._v(" 事件。 应用主体对象首先触发该事件，然后模块触发（如果存在模块），最后控制器触发。 任何一个事件处理中设置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$isValid-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ActionEvent::$isValid"),a("OutboundLink")],1),t._v(" 设置为 "),a("code",[t._v("false")]),t._v(" 会停止触发后面的事件。")]),t._v(" "),a("h3",{attrs:{id:"event-after-action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-after-action"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#EVENT_AFTER_ACTION-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_AFTER_ACTION"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("该事件在每个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器动作"),a("OutboundLink")],1),t._v(" 运行 "),a("em",[t._v("after")]),t._v(" 之后会被触发， 实际的事件名为 "),a("code",[t._v("afterAction")]),t._v("。")]),t._v(" "),a("p",[t._v("该事件的参数为 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ActionEvent"),a("OutboundLink")],1),t._v(" 实例， 通过 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-actionevent#$result-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ActionEvent::$result"),a("OutboundLink")],1),t._v(" 属性， 事件处理可以访问和修改动作的结果。例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'on afterAction'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("some condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改 $event->result")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("注意 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" 都会触发 "),a("code",[t._v("afterAction")]),t._v(" 事件。 这些对象的触发顺序和 "),a("code",[t._v("beforeAction")]),t._v(" 相反，也就是说， 控制器最先触发，然后是模块（如果有模块），最后为应用主体。")]),t._v(" "),a("h2",{attrs:{id:"应用主体生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用主体生命周期"}},[t._v("#")]),t._v(" 应用主体生命周期")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/images/application-lifecycle.png",alt:"Application Lifecycle"}})]),t._v(" "),a("p",[t._v("当运行 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-entry-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("入口脚本"),a("OutboundLink")],1),t._v(" 处理请求时， 应用主体会经历以下生命周期:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("入口脚本加载应用主体配置数组。")])]),t._v(" "),a("li",[a("p",[t._v("入口脚本创建一个应用主体实例：")]),t._v(" "),a("ul",[a("li",[t._v("调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#preInit()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("preInit()"),a("OutboundLink")],1),t._v(" 配置几个高级别应用主体属性， 比如 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("basePath"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("li",[t._v("注册 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$errorHandler-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("error handler"),a("OutboundLink")],1),t._v(" 错误处理方法。")]),t._v(" "),a("li",[t._v("配置应用主体属性。")]),t._v(" "),a("li",[t._v("调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#init()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("init()"),a("OutboundLink")],1),t._v(" 初始化，该函数会调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#bootstrap()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("bootstrap()"),a("OutboundLink")],1),t._v(" 运行引导启动组件。")])])]),t._v(" "),a("li",[a("p",[t._v("入口脚本调用")]),t._v(" "),a("p",[t._v("yii\\base\\Application::run()")]),t._v(" "),a("p",[t._v("运行应用主体:")]),t._v(" "),a("ul",[a("li",[t._v("触发 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_BEFORE_REQUEST-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEFORE_REQUEST"),a("OutboundLink")],1),t._v(" 事件。")]),t._v(" "),a("li",[t._v("处理请求：解析请求 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/runtime-routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由"),a("OutboundLink")],1),t._v(" 和相关参数； 创建路由指定的模块、控制器和动作对应的类，并运行动作。")]),t._v(" "),a("li",[t._v("触发 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#EVENT_AFTER_REQUEST-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_AFTER_REQUEST"),a("OutboundLink")],1),t._v(" 事件。")]),t._v(" "),a("li",[t._v("发送响应到终端用户。")])])]),t._v(" "),a("li",[a("p",[t._v("入口脚本接收应用主体传来的退出状态并完成请求的处理。")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);