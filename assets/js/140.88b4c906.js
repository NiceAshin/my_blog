(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{556:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图"}},[t._v("#")]),t._v(" 视图")]),t._v(" "),a("p",[t._v("视图是 "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/MVC",target:"_blank",rel:"noopener noreferrer"}},[t._v("MVC"),a("OutboundLink")],1),t._v(" 模式中的一部分。 它是展示数据到终端用户的代码，在网页应用中， 根据"),a("em",[t._v("视图模板")]),t._v("来创建视图，视图模板为PHP脚本文件， 主要包含HTML代码和展示类PHP代码，通过"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view"),a("OutboundLink")],1),t._v("应用组件来管理， 该组件主要提供通用方法帮助视图构造和渲染， 简单起见，我们称视图模板或视图模板文件为视图。")]),t._v(" "),a("h2",{attrs:{id:"创建视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建视图"}},[t._v("#")]),t._v(" 创建视图")]),t._v(" "),a("p",[t._v("如前所述，视图为包含HTML和PHP代码的PHP脚本，如下代码为一个登录表单的视图， 可看到PHP代码用来生成动态内容如页面标题和表单， HTML代码把它组织成一个漂亮的HTML页面。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php\nuse yii\\helpers\\Html;\nuse yii\\widgets\\ActiveForm;\n\n/**\n * @var \\yii\\web\\View $this\n * @var \\yii\\widgets\\ActiveForm $form\n * @var \\app\\models\\LoginForm $model\n */\n\n$this->title = 'Login';\n?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::encode($this->title) ?>")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Please fill out the following fields to login:"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $form = ActiveForm::begin(); ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $form->field($model, 'username') ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $form->field($model, 'password')->passwordInput() ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::submitButton('Login') ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php ActiveForm::end(); ?>")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),a("p",[t._v("在视图中，可访问 "),a("code",[t._v("$this")]),t._v(" 指向 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view component"),a("OutboundLink")],1),t._v(" 来管理和渲染这个视图文件。")]),t._v(" "),a("p",[t._v("除了 "),a("code",[t._v("$this")]),t._v("之外，上述示例中的视图有其他预定义变量如 "),a("code",[t._v("$model")]),t._v("， 这些变量代表从"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" 或其他触发"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#rendering-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图渲染"),a("OutboundLink")],1),t._v("的对象 "),a("em",[t._v("传入")]),t._v(" 到视图的数据。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("提示：")]),t._v(" 将预定义变量列到视图文件头部注释处， 这样可被IDE编辑器识别，也是生成视图文档的好方法。")])]),t._v(" "),a("h3",{attrs:{id:"安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安全"}},[t._v("#")]),t._v(" 安全")]),t._v(" "),a("p",[t._v("当创建生成HTML页面的视图时，在显示之前将用户输入数据进行转码和过滤非常重要， 否则，你的应用可能会被 "),a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%B6%B2%E7%AB%99%E6%8C%87%E4%BB%A4%E7%A2%BC",target:"_blank",rel:"noopener noreferrer"}},[t._v("跨站脚本"),a("OutboundLink")],1),t._v(" 攻击。")]),t._v(" "),a("p",[t._v("要显示纯文本，先调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-helpers-basehtml#encode()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\helpers\\Html::encode()"),a("OutboundLink")],1),t._v(" 进行转码， 例如如下代码将用户名在显示前先转码：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php\nuse yii\\helpers\\Html;\n?>")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::encode($user->name) ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("要显示HTML内容，先调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-helpers-htmlpurifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\helpers\\HtmlPurifier"),a("OutboundLink")],1),t._v(" 过滤内容， 例如如下代码将提交内容在显示前先过滤：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php\nuse yii\\helpers\\HtmlPurifier;\n?>")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= HtmlPurifier::process($post->text) ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("blockquote",[a("p",[a("strong",[t._v("提示：")]),t._v(" HTMLPurifier在保证输出数据安全上做的不错，但性能不佳，如果你的应用需要高性能可考虑 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-overview",target:"_blank",rel:"noopener noreferrer"}},[t._v("缓存"),a("OutboundLink")],1),t._v(" 过滤后的结果。")])]),t._v(" "),a("h3",{attrs:{id:"组织视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组织视图"}},[t._v("#")]),t._v(" 组织视图")]),t._v(" "),a("p",[t._v("与 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-models",target:"_blank",rel:"noopener noreferrer"}},[t._v("模型"),a("OutboundLink")],1),t._v(" 类似，在组织视图上有一些约定：")]),t._v(" "),a("ul",[a("li",[t._v("控制器渲染的视图文件默认放在 "),a("code",[t._v("@app/views/ControllerID")]),t._v(" 目录下， 其中 "),a("code",[t._v("ControllerID")]),t._v(" 对应 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#routes",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器 ID"),a("OutboundLink")],1),t._v(", 例如控制器类为 "),a("code",[t._v("PostController")]),t._v("，视图文件目录应为 "),a("code",[t._v("@app/views/post")]),t._v("， 控制器类 "),a("code",[t._v("PostCommentController")]),t._v("对应的目录为 "),a("code",[t._v("@app/views/post-comment")]),t._v("， 如果是模块中的控制器，目录应为 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("module directory"),a("OutboundLink")],1),t._v(" 模块目录下的 "),a("code",[t._v("views/ControllerID")]),t._v(" 目录；")]),t._v(" "),a("li",[t._v("对于 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets",target:"_blank",rel:"noopener noreferrer"}},[t._v("小部件"),a("OutboundLink")],1),t._v(" 渲染的视图文件默认放在 "),a("code",[t._v("WidgetPath/views")]),t._v(" 目录， 其中 "),a("code",[t._v("WidgetPath")]),t._v(" 代表小部件类文件所在的目录；")]),t._v(" "),a("li",[t._v("对于其他对象渲染的视图文件，建议遵循和小部件相似的规则。")])]),t._v(" "),a("p",[t._v("可覆盖控制器或小部件的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface#getViewPath()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ViewContextInterface::getViewPath()"),a("OutboundLink")],1),t._v(" 方法来自定义视图文件默认目录。")]),t._v(" "),a("h2",{attrs:{id:"渲染视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#渲染视图"}},[t._v("#")]),t._v(" 渲染视图")]),t._v(" "),a("p",[t._v("可在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets",target:"_blank",rel:"noopener noreferrer"}},[t._v("小部件"),a("OutboundLink")],1),t._v(", 或其他地方调用渲染视图方法来渲染视图， 该方法类似以下格式：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/**\n * @param string $view 视图名或文件路径，由实际的渲染方法决定\n * @param array $params 传递给视图的数据\n * @return string 渲染结果\n */\nmethodName($view, $params = [])\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"控制器中渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#控制器中渲染"}},[t._v("#")]),t._v(" 控制器中渲染")]),t._v(" "),a("p",[t._v("在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器"),a("OutboundLink")],1),t._v(" 中，可调用以下控制器方法来渲染视图：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),a("OutboundLink")],1),t._v(": 渲染一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图名"),a("OutboundLink")],1),t._v(" 并使用一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局"),a("OutboundLink")],1),t._v(" 返回到渲染结果。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderPartial()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderPartial()"),a("OutboundLink")],1),t._v(": 渲染一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图名"),a("OutboundLink")],1),t._v(" 并且不使用布局。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-controller#renderAjax()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderAjax()"),a("OutboundLink")],1),t._v(": 渲染一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图名"),a("OutboundLink")],1),t._v(" 并且不使用布局， 并注入所有注册的JS/CSS脚本和文件，通常使用在响应AJAX网页请求的情况下。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderFile()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderFile()"),a("OutboundLink")],1),t._v(": 渲染一个视图文件目录或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("下的视图文件。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#renderContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderContent()"),a("OutboundLink")],1),t._v(": renders a static string by embedding it into the currently applicable "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1),t._v(". This method is available since version 2.0.1.")])]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("controllers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("NotFoundHttpException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("PostController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("actionView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$model")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Post")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$model")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NotFoundHttpException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 渲染一个名称为"view"的视图并使用布局')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'view'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'model'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("h3",{attrs:{id:"小部件中渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小部件中渲染"}},[t._v("#")]),t._v(" 小部件中渲染")]),t._v(" "),a("p",[t._v("在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets",target:"_blank",rel:"noopener noreferrer"}},[t._v("小部件"),a("OutboundLink")],1),t._v(" 中，可调用以下小部件方法来渲染视图：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-widget#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),a("OutboundLink")],1),t._v(": 渲染一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图名"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-widget#renderFile()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderFile()"),a("OutboundLink")],1),t._v(": 渲染一个视图文件目录或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("下的视图文件。")])]),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("components")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Widget")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("helpers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("ListWidget")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Widget")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$items")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 渲染一个名为 "list" 的视图')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'items'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("items")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("h3",{attrs:{id:"视图中渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图中渲染"}},[t._v("#")]),t._v(" 视图中渲染")]),t._v(" "),a("p",[t._v("可以在视图中渲染另一个视图，可以调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view component"),a("OutboundLink")],1),t._v("视图组件提供的以下方法：")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),a("OutboundLink")],1),t._v(": 渲染一个 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#named-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图名"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("renderAjax()")]),t._v(" "),a("p",[t._v(": 渲染一个")]),t._v(" "),a("p",[t._v("视图名")]),t._v(" "),a("p",[t._v("并注入所有注册的JS/CSS脚本和文件，通常使用在响应AJAX网页请求的情况下。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#renderFile()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("renderFile()"),a("OutboundLink")],1),t._v(": 渲染一个视图文件目录或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-aliases",target:"_blank",rel:"noopener noreferrer"}},[t._v("别名"),a("OutboundLink")],1),t._v("下的视图文件。")])])])]),t._v(" "),a("p",[t._v("例如，视图中的如下代码会渲染该视图所在目录下的 "),a("code",[t._v("_overview.php")]),t._v(" 视图文件， 记住视图中 "),a("code",[t._v("$this")]),t._v(" 对应 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view"),a("OutboundLink")],1),t._v(" 组件:")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $this->render('_overview') ?>")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"其他地方渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他地方渲染"}},[t._v("#")]),t._v(" 其他地方渲染")]),t._v(" "),a("p",[t._v("在任何地方都可以通过表达式 "),a("code",[t._v("Yii::$app->view")]),t._v(" 访问 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view"),a("OutboundLink")],1),t._v(" 应用组件， 调用它的如前所述的方法渲染视图，例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 显示视图文件 "@app/views/site/license.php"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("view")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@app/views/site/license.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"视图名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图名"}},[t._v("#")]),t._v(" 视图名")]),t._v(" "),a("p",[t._v("渲染视图时，可指定一个视图名或视图文件路径/别名，大多数情况下使用前者因为前者简洁灵活， 我们称用名字的视图为 "),a("em",[t._v("视图名")]),t._v(".")]),t._v(" "),a("p",[t._v("视图名可以依据以下规则到对应的视图文件路径：")]),t._v(" "),a("ul",[a("li",[t._v("视图名可省略文件扩展名，这种情况下使用 "),a("code",[t._v(".php")]),t._v(" 作为扩展， 视图名 "),a("code",[t._v("about")]),t._v(" 对应到 "),a("code",[t._v("about.php")]),t._v(" 文件名；")]),t._v(" "),a("li",[t._v("视图名以双斜杠 "),a("code",[t._v("//")]),t._v(" 开头，对应的视图文件路径为 "),a("code",[t._v("@app/views/ViewName")]),t._v("， 也就是说视图文件在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("application's view path"),a("OutboundLink")],1),t._v(" 路径下找， 例如 "),a("code",[t._v("//site/about")]),t._v(" 对应到 "),a("code",[t._v("@app/views/site/about.php")]),t._v("。")]),t._v(" "),a("li",[t._v("视图名以单斜杠"),a("code",[t._v("/")]),t._v("开始，视图文件路径以当前使用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v(" 的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$viewPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("view path"),a("OutboundLink")],1),t._v("开始， 如果不存在模块，使用"),a("code",[t._v("@app/views/ViewName")]),t._v("开始，例如，如果当前模块为"),a("code",[t._v("user")]),t._v("， "),a("code",[t._v("/user/create")]),t._v(" 对应成 "),a("code",[t._v("@app/modules/user/views/user/create.php")]),t._v(", 如果不在模块中，"),a("code",[t._v("/user/create")]),t._v("对应"),a("code",[t._v("@app/views/user/create.php")]),t._v("。")]),t._v(" "),a("li",[t._v("如果 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#$context-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("context"),a("OutboundLink")],1),t._v(" 渲染视图 并且上下文实现了 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ViewContextInterface"),a("OutboundLink")],1),t._v(", 视图文件路径由上下文的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-viewcontextinterface#getViewPath()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("view path"),a("OutboundLink")],1),t._v(" 开始， 这种主要用在控制器和小部件中渲染视图，例如 如果上下文为控制器"),a("code",[t._v("SiteController")]),t._v("，"),a("code",[t._v("site/about")]),t._v(" 对应到 "),a("code",[t._v("@app/views/site/about.php")]),t._v("。")]),t._v(" "),a("li",[t._v("如果视图渲染另一个视图，包含另一个视图文件的目录以当前视图的文件路径开始， 例如被视图"),a("code",[t._v("@app/views/post/index.php")]),t._v(" 渲染的 "),a("code",[t._v("item")]),t._v(" 对应到 "),a("code",[t._v("@app/views/post/item")]),t._v("。")])]),t._v(" "),a("p",[t._v("根据以上规则，在控制器中 "),a("code",[t._v("app\\controllers\\PostController")]),t._v(" 调用 "),a("code",[t._v("$this->render('view')")]),t._v("， 实际上渲染 "),a("code",[t._v("@app/views/post/view.php")]),t._v(" 视图文件，当在该视图文件中调用 "),a("code",[t._v("$this->render('_overview')")]),t._v(" 会渲染 "),a("code",[t._v("@app/views/post/_overview.php")]),t._v(" 视图文件。")]),t._v(" "),a("h3",{attrs:{id:"视图中访问数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图中访问数据"}},[t._v("#")]),t._v(" 视图中访问数据")]),t._v(" "),a("p",[t._v("在视图中有两种方式访问数据：推送和拉取。")]),t._v(" "),a("p",[t._v("推送方式是通过视图渲染方法的第二个参数传递数据， 数据格式应为名称-值的数组， 视图渲染时，调用PHP "),a("code",[t._v("extract()")]),t._v(" 方法将该数组转换为视图可访问的变量。 例如，如下控制器的渲染视图代码推送2个变量到 "),a("code",[t._v("report")]),t._v(" 视图："),a("code",[t._v("$foo = 1")]),t._v(" 和 "),a("code",[t._v("$bar = 2")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'report'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'foo'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'bar'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("拉取方式可让视图从"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view component"),a("OutboundLink")],1),t._v("视图组件或其他对象中主动获得数据(如"),a("code",[t._v("Yii::$app")]),t._v(")， 在视图中使用如下表达式"),a("code",[t._v("$this->context")]),t._v("可获取到控制器ID， 可让你在"),a("code",[t._v("report")]),t._v("视图中获取控制器的任意属性或方法， 如以下代码获取控制器ID。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("The controller ID is: "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $this->context->id ?>")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("推送方式让视图更少依赖上下文对象，是视图获取数据优先使用方式， 缺点是需要手动构建数组，有些繁琐， 在不同地方渲染时容易出错。")]),t._v(" "),a("h3",{attrs:{id:"视图间共享数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图间共享数据"}},[t._v("#")]),t._v(" 视图间共享数据")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view component"),a("OutboundLink")],1),t._v("视图组件提供"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#$params-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("params"),a("OutboundLink")],1),t._v(" 参数属性来让不同视图共享数据。")]),t._v(" "),a("p",[t._v("例如在"),a("code",[t._v("about")]),t._v("视图中， 可使用如下代码指定当前breadcrumbs的当前部分。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("params")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'breadcrumbs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'About Us'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局"),a("OutboundLink")],1),t._v("文件（也是一个视图）中，可使用依次加入到"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#$params-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("params"),a("OutboundLink")],1),t._v("数组的值来 生成显示breadcrumbs:")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= yii\\widgets\\Breadcrumbs::widget([\n    'links' => isset($this->params['breadcrumbs']) ? $this->params['breadcrumbs'] : [],\n]) ?>")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局"}},[t._v("#")]),t._v(" 布局")]),t._v(" "),a("p",[t._v("布局是一种特殊的视图，代表多个视图的公共部分， 例如，大多数Web应用共享相同的页头和页尾， 在每个视图中重复相同的页头和页尾，更好的方式是将这些公共放到一个布局中， 渲染内容视图后在合适的地方嵌入到布局中。")]),t._v(" "),a("h3",{attrs:{id:"创建布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建布局"}},[t._v("#")]),t._v(" 创建布局")]),t._v(" "),a("p",[t._v("由于布局也是视图，它可像普通视图一样创建，布局默认存储在"),a("code",[t._v("@app/views/layouts")]),t._v("路径下， "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("模块"),a("OutboundLink")],1),t._v("中使用的布局应存储在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("module directory"),a("OutboundLink")],1),t._v("模块目录 下的"),a("code",[t._v("views/layouts")]),t._v("路径下， 可配置"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Module::$layoutPath"),a("OutboundLink")],1),t._v("来自定义应用或模块的布局默认路径。")]),t._v(" "),a("p",[t._v("如下示例为一个布局大致内容，注意作为示例，简化了很多代码， 在实际中，你可能想添加更多内容，如头部标签，主菜单等。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php\nuse yii\\helpers\\Html;\n\n/**\n * @var \\yii\\web\\View $this\n * @var string $content 字符串\n */\n?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $this->beginPage() ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::csrfMetaTags() ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::encode($this->title) ?>")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $this->head() ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $this->beginBody() ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("header")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("My Company"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("header")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $content ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("footer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&copy;"}},[t._v("&copy;")]),t._v(" 2014 by My Company"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("footer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $this->endBody() ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php $this->endPage() ?>")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br")])]),a("p",[t._v("如上所示，布局生成每个页面通用的HTML标签，在"),a("code",[t._v("<body>")]),t._v("标签中，打印"),a("code",[t._v("$content")]),t._v("变量， "),a("code",[t._v("$content")]),t._v("变量代表当"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Controller::render()"),a("OutboundLink")],1),t._v(" 控制器渲染方法调用时传递到布局的内容视图渲染结果。")]),t._v(" "),a("p",[t._v("大多数视图应调用上述代码中的如下方法， 这些方法触发关于渲染过程的事件， 这样其他地方注册的脚本和标签会添加到这些方法调用的地方。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginPage()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginPage()"),a("OutboundLink")],1),t._v(": 该方法应在布局的开始处调用， 它触发表明页面开始的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEGIN_PAGE-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEGIN_PAGE"),a("OutboundLink")],1),t._v(" 事件。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#endPage()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("endPage()"),a("OutboundLink")],1),t._v(": 该方法应在布局的结尾处调用， 它触发表明页面结尾的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_END_PAGE-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_END_PAGE"),a("OutboundLink")],1),t._v(" 事件。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#head()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("head()"),a("OutboundLink")],1),t._v(": 该方法应在HTML页面的"),a("code",[t._v("<head>")]),t._v("标签中调用， 它生成一个占位符，在页面渲染结束时会被注册的头部HTML代码 （如，link标签, meta标签）替换。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#beginBody()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginBody()"),a("OutboundLink")],1),t._v(": 该方法应在"),a("code",[t._v("<body>")]),t._v("标签的开始处调用， 它触发 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_BEGIN_BODY-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEGIN_BODY"),a("OutboundLink")],1),t._v(" 事件并生成一个占位符， 会被注册的HTML代码（如JavaScript）在页面主体开始处替换。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#endBody()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("endBody()"),a("OutboundLink")],1),t._v(": 该方法应在"),a("code",[t._v("<body>")]),t._v("标签的结尾处调用， 它触发 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_END_BODY-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_END_BODY"),a("OutboundLink")],1),t._v(" 事件并生成一个占位符， 会被注册的HTML代码（如JavaScript）在页面主体结尾处替换。")])]),t._v(" "),a("h3",{attrs:{id:"布局中访问数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局中访问数据"}},[t._v("#")]),t._v(" 布局中访问数据")]),t._v(" "),a("p",[t._v("在布局中可访问两个预定义变量："),a("code",[t._v("$this")]),t._v(" 和 "),a("code",[t._v("$content")]),t._v("， 前者对应和普通视图类似的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("view"),a("OutboundLink")],1),t._v(" 视图组件 后者包含调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),a("OutboundLink")],1),t._v("方法渲染内容视图的结果。")]),t._v(" "),a("p",[t._v("如果想在布局中访问其他数据，必须使用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#accessing-data-in-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图中访问数据"),a("OutboundLink")],1),t._v("一节介绍的拉取方式， 如果想从内容视图中传递数据到布局， 可使用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#sharing-data-among-views",target:"_blank",rel:"noopener noreferrer"}},[t._v("视图间共享数据"),a("OutboundLink")],1),t._v("一节中的方法。")]),t._v(" "),a("h3",{attrs:{id:"使用布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用布局"}},[t._v("#")]),t._v(" 使用布局")]),t._v(" "),a("p",[t._v("如"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#rendering-in-controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制器中渲染"),a("OutboundLink")],1),t._v("一节描述， 当控制器调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#render()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("render()"),a("OutboundLink")],1),t._v(" 方法渲染视图时，会同时使用布局到渲染结果中，默认会使用"),a("code",[t._v("@app/views/layouts/main.php")]),t._v("布局文件。")]),t._v(" "),a("p",[t._v("可配置"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-application#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Application::$layout"),a("OutboundLink")],1),t._v(" 或 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Controller::$layout"),a("OutboundLink")],1),t._v(" 使用其他布局文件， 前者管理所有控制器的布局，后者覆盖前者来控制单个控制器布局。 例如，如下代码使 "),a("code",[t._v("post")]),t._v(" 控制器渲染视图时使用 "),a("code",[t._v("@app/views/layouts/post.php")]),t._v(" 作为布局文件， 假如 "),a("code",[t._v("layout")]),t._v(" 属性没改变， 控制器默认使用 "),a("code",[t._v("@app/views/layouts/main.php")]),t._v(" 作为布局文件。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("controllers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("PostController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$layout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'post'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("对于模块中的控制器，可配置模块的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1),t._v(" 属性指定布局文件应用到模块的所有控制器。")]),t._v(" "),a("p",[t._v("由于"),a("code",[t._v("layout")]),t._v(" 可在不同层级（控制器、模块，应用）配置， 在幕后Yii使用两步来决定控制器实际使用的布局。")]),t._v(" "),a("p",[t._v("第一步，它决定布局的值和上下文模块：")]),t._v(" "),a("ul",[a("li",[t._v("如果控制器的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\Controller::$layout"),a("OutboundLink")],1),t._v(" 属性不为空null，使用它作为布局的值， 控制器的 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$module-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("module"),a("OutboundLink")],1),t._v("模块 作为上下文模块。")]),t._v(" "),a("li",[t._v("如果 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-controller#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1),t._v(" 为空，从控制器的祖先模块（包括应用） 开始找 第一个"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1),t._v(" 属性不为空的模块，使用该模块作为上下文模块， 并将它的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layout-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout"),a("OutboundLink")],1),t._v(" 的值作为布局的值， 如果都没有找到，表示不使用布局。")])]),t._v(" "),a("p",[t._v("第二步，它决定第一步中布局的值和上下文模块对应到实际的布局文件， 布局的值可为：")]),t._v(" "),a("ul",[a("li",[t._v("路径别名 (如 "),a("code",[t._v("@app/views/layouts/main")]),t._v(").")]),t._v(" "),a("li",[t._v("绝对路径 (如 "),a("code",[t._v("/main")]),t._v("): 布局的值以斜杠开始， 在应用的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout path"),a("OutboundLink")],1),t._v(" 布局路径 中查找实际的布局文件，布局路径默认为 "),a("code",[t._v("@app/views/layouts")]),t._v("。")]),t._v(" "),a("li",[t._v("相对路径 (如 "),a("code",[t._v("main")]),t._v("): 在上下文模块的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$layoutPath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("layout path"),a("OutboundLink")],1),t._v("布局路径中查找实际的布局文件， 布局路径默认为"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-module#$basePath-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("module directory"),a("OutboundLink")],1),t._v(" 模块目录下的"),a("code",[t._v("views/layouts")]),t._v(" 目录。")]),t._v(" "),a("li",[t._v("布尔值 "),a("code",[t._v("false")]),t._v(": 不使用布局。")])]),t._v(" "),a("p",[t._v("布局的值没有包含文件扩展名，默认使用 "),a("code",[t._v(".php")]),t._v("作为扩展名。")]),t._v(" "),a("h3",{attrs:{id:"嵌套布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#嵌套布局"}},[t._v("#")]),t._v(" 嵌套布局")]),t._v(" "),a("p",[t._v("有时候你想嵌套一个布局到另一个，例如，在Web站点不同地方，想使用不同的布局， 同时这些布局共享相同的生成全局HTML5页面结构的基本布局，可以在子布局中调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginContent()"),a("OutboundLink")],1),t._v(" 和"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#endContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("endContent()"),a("OutboundLink")],1),t._v(" 方法，如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'@app/views/layouts/base.php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n\n...child layout content here...\n\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("endContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("如上所示，子布局内容应在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginContent()"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#endContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("endContent()"),a("OutboundLink")],1),t._v(" 方法之间，传给 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginContent()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginContent()"),a("OutboundLink")],1),t._v(" 的参数指定父布局，父布局可为布局文件或别名。")]),t._v(" "),a("p",[t._v("使用以上方式可多层嵌套布局。")]),t._v(" "),a("h3",{attrs:{id:"使用数据块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用数据块"}},[t._v("#")]),t._v(" 使用数据块")]),t._v(" "),a("p",[t._v("数据块可以在一个地方指定视图内容在另一个地方显示，通常和布局一起使用， 例如，可在内容视图中定义数据块在布局中显示它。")]),t._v(" "),a("p",[t._v("调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginBlock()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("beginBlock()"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#endBlock()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("endBlock()"),a("OutboundLink")],1),t._v(" 来定义数据块， 使用 "),a("code",[t._v("$view->blocks[$blockID]")]),t._v(" 访问该数据块， 其中 "),a("code",[t._v("$blockID")]),t._v(" 为定义数据块时指定的唯一标识ID。")]),t._v(" "),a("p",[t._v("如下实例显示如何在内容视图中使用数据块让布局使用。")]),t._v(" "),a("p",[t._v("首先，在内容视图中定一个或多个数据块：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[t._v("...\n\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'block1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n\n...content of block1...\n\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("endBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n\n...\n\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'block3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n\n...content of block3...\n\n"),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("endBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("然后，在布局视图中，数据块可用的话会渲染数据块， 如果数据未定义则显示一些默认内容。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("...\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php if (isset($this->blocks['block1'])): ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $this->blocks['block1'] ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php else: ?>")]),t._v("\n    ... default content for block1 ...\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php endif; ?>")]),t._v("\n\n...\n\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php if (isset($this->blocks['block2'])): ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $this->blocks['block2'] ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php else: ?>")]),t._v("\n    ... default content for block2 ...\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php endif; ?>")]),t._v("\n\n...\n\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php if (isset($this->blocks['block3'])): ?>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= $this->blocks['block3'] ?>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php else: ?>")]),t._v("\n    ... default content for block3 ...\n"),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?php endif; ?>")]),t._v("\n...\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("h2",{attrs:{id:"使用视图组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用视图组件"}},[t._v("#")]),t._v(" 使用视图组件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("View components"),a("OutboundLink")],1),t._v("视图组件提供许多视图相关特性， 可创建"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\View"),a("OutboundLink")],1),t._v("或它的子类实例来获取视图组件，大多数情况下主要使用 "),a("code",[t._v("view")]),t._v(" 应用组件， 可在"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications#application-configurations",target:"_blank",rel:"noopener noreferrer"}},[t._v("应用配置"),a("OutboundLink")],1),t._v("中配置该组件， 如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'components'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'view'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'app\\components\\View'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("视图组件提供如下实用的视图相关特性，每项详情会在独立章节中介绍：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-theming",target:"_blank",rel:"noopener noreferrer"}},[t._v("主题"),a("OutboundLink")],1),t._v(": 允许为你的Web站点开发和修改主题；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/caching-fragment",target:"_blank",rel:"noopener noreferrer"}},[t._v("片段缓存"),a("OutboundLink")],1),t._v(": 允许你在Web页面中缓存片段；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/output-client-scripts",target:"_blank",rel:"noopener noreferrer"}},[t._v("客户脚本处理"),a("OutboundLink")],1),t._v(": 支持CSS 和 JavaScript 注册和渲染；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-assets",target:"_blank",rel:"noopener noreferrer"}},[t._v("资源包处理"),a("OutboundLink")],1),t._v(": 支持 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-assets",target:"_blank",rel:"noopener noreferrer"}},[t._v("资源包"),a("OutboundLink")],1),t._v("的注册和渲染；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-template-engines",target:"_blank",rel:"noopener noreferrer"}},[t._v("模板引擎"),a("OutboundLink")],1),t._v(": 允许你使用其他模板引擎，如 "),a("a",{attrs:{href:"https://twig.symfony.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Twig"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://www.smarty.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Smarty"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("p",[t._v("开发Web页面时，也可能频繁使用以下实用的小特性。")]),t._v(" "),a("h3",{attrs:{id:"设置页面标题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置页面标题"}},[t._v("#")]),t._v(" 设置页面标题")]),t._v(" "),a("p",[t._v("每个Web页面应有一个标题，正常情况下标题的标签显示在 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局"),a("OutboundLink")],1),t._v("中， 但是实际上标题大多由内容视图而不是布局来决定，为解决这个问题， "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View"),a("OutboundLink")],1),t._v(" 提供 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#$title-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("title"),a("OutboundLink")],1),t._v(" 标题属性可让标题信息从内容视图传递到布局中。")]),t._v(" "),a("p",[t._v("为利用这个特性，在每个内容视图中设置页面标题，如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'My page title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("然后在视图中，确保在 "),a("code",[t._v("<head>")]),t._v(" 段中有如下代码：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v("<?= Html::encode($this->title) ?>")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"注册meta元标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册meta元标签"}},[t._v("#")]),t._v(" 注册Meta元标签")]),t._v(" "),a("p",[t._v("Web页面通常需要生成各种元标签提供给不同的浏览器， 如"),a("code",[t._v("<head>")]),t._v("中的页面标题，元标签通常在布局中生成。")]),t._v(" "),a("p",[t._v("如果想在内容视图中生成元标签，可在内容视图中调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::registerMetaTag()"),a("OutboundLink")],1),t._v("方法， 如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMetaTag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'name'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'keywords'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'content'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yii, framework, php'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v('以上代码会在视图组件中注册一个 "keywords" 元标签， 在布局渲染后会渲染该注册的元标签， 然后，如下HTML代码会插入到布局中调用'),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#head()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::head()"),a("OutboundLink")],1),t._v("方法处：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("meta name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"keywords"')]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[t._v('"yii, framework, php"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("注意如果多次调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::registerMetaTag()"),a("OutboundLink")],1),t._v(" 方法， 它会注册多个元标签，注册时不会检查是否重复。")]),t._v(" "),a("p",[t._v('为确保每种元标签只有一个，可在调用方法时指定键作为第二个参数， 例如，如下代码注册两次 "description" 元标签，但是只会渲染第二个。')]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("$this->registerMetaTag(['name' => 'description', 'content' => 'This is my cool website made with Yii!'], 'description');\n$this->registerMetaTag(['name' => 'description', 'content' => 'This website is about funny raccoons.'], 'description');\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"注册链接标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册链接标签"}},[t._v("#")]),t._v(" 注册链接标签")]),t._v(" "),a("p",[t._v("和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#adding-meta-tags",target:"_blank",rel:"noopener noreferrer"}},[t._v("Meta标签"),a("OutboundLink")],1),t._v(" 类似，链接标签有时很实用，如自定义网站图标，指定Rss订阅，或授权OpenID到其他服务器。 可以和元标签相似的方式调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerLinkTag()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::registerLinkTag()"),a("OutboundLink")],1),t._v("， 例如，在内容视图中注册链接标签如下所示：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerLinkTag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Live News for Yii'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rel'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'alternate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'type'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'application/rss+xml'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'href'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'https://www.yiiframework.com/rss.xml/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("上述代码会转换成")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Live News for Yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("alternate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("application/rss+xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.yiiframework.com/rss.xml/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("和 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerMetaTag()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("registerMetaTags()"),a("OutboundLink")],1),t._v(" 类似， 调用"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#registerLinkTag()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("registerLinkTag()"),a("OutboundLink")],1),t._v(" 指定键来避免生成重复链接标签。")]),t._v(" "),a("h2",{attrs:{id:"视图事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图事件"}},[t._v("#")]),t._v(" 视图事件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view",target:"_blank",rel:"noopener noreferrer"}},[t._v("View components"),a("OutboundLink")],1),t._v(" 视图组件会在视图渲染过程中触发几个事件， 可以在内容发送给终端用户前，响应这些事件来添加内容到视图中或调整渲染结果。")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEFORE_RENDER-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEFORE_RENDER"),a("OutboundLink")],1),t._v(": 在控制器渲染文件开始时触发， 该事件可设置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-viewevent#$isValid-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ViewEvent::$isValid"),a("OutboundLink")],1),t._v(" 为 false 取消视图渲染。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_AFTER_RENDER-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_AFTER_RENDER"),a("OutboundLink")],1),t._v(": 在布局中调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#afterRender()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\View::afterRender()"),a("OutboundLink")],1),t._v(" 时触发， 该事件可获取"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-viewevent#$output-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\ViewEvent::$output"),a("OutboundLink")],1),t._v("的渲染结果， 可修改该属性来修改渲染结果。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_BEGIN_PAGE-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEGIN_PAGE"),a("OutboundLink")],1),t._v(": 在布局调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#beginPage()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\View::beginPage()"),a("OutboundLink")],1),t._v(" 时触发；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#EVENT_END_PAGE-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_END_PAGE"),a("OutboundLink")],1),t._v(": 在布局调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-base-view#endPage()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\base\\View::endPage()"),a("OutboundLink")],1),t._v(" 是触发；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_BEGIN_BODY-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_BEGIN_BODY"),a("OutboundLink")],1),t._v(": 在布局调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#beginBody()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::beginBody()"),a("OutboundLink")],1),t._v(" 时触发；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#EVENT_END_BODY-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("EVENT_END_BODY"),a("OutboundLink")],1),t._v(": 在布局调用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-view#endBody()-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\View::endBody()"),a("OutboundLink")],1),t._v(" 时触发。")])]),t._v(" "),a("p",[t._v("例如，如下代码将当前日期添加到页面结尾处：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Yii")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("view")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("View")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EVENT_END_BODY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'Y-m-d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"渲染静态页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#渲染静态页面"}},[t._v("#")]),t._v(" 渲染静态页面")]),t._v(" "),a("p",[t._v("静态页面指的是大部分内容为静态的不需要控制器传递 动态数据的Web页面。")]),t._v(" "),a("p",[t._v("可将HTML代码放置在视图中，在控制器中使用以下代码输出静态页面：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("actionAbout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'about'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("如果Web站点包含很多静态页面，多次重复相似的代码显得很繁琐， 为解决这个问题，可以使用一个在控制器中称为 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\ViewAction"),a("OutboundLink")],1),t._v(" 的"),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-controllers#standalone-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("独立动作"),a("OutboundLink")],1),t._v("。 例如：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("controllers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("yii"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[t._v("SiteController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("actions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'page'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'class'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'yii\\web\\ViewAction'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("现在如果你在"),a("code",[t._v("@app/views/site/pages")]),t._v("目录下创建名为 "),a("code",[t._v("about")]),t._v(" 的视图， 可通过如下url显示该视图：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://localhost/index.php?r=site/page&view=about\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v("GET")]),t._v(" 中 "),a("code",[t._v("view")]),t._v(" 参数告知 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\ViewAction"),a("OutboundLink")],1),t._v(" 动作请求哪个视图，然后操作在 "),a("code",[t._v("@app/views/site/pages")]),t._v("目录下寻找该视图，可配置 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/api/2.0/yii-web-viewaction#$viewPrefix-detail",target:"_blank",rel:"noopener noreferrer"}},[t._v("yii\\web\\ViewAction::$viewPrefix"),a("OutboundLink")],1),t._v(" 修改搜索视图的目录。")]),t._v(" "),a("h2",{attrs:{id:"最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最佳实践"}},[t._v("#")]),t._v(" 最佳实践")]),t._v(" "),a("p",[t._v("视图负责将模型的数据展示用户想要的格式，总之，视图")]),t._v(" "),a("ul",[a("li",[t._v("应主要包含展示代码，如HTML, 和简单的PHP代码来控制、格式化和渲染数据；")]),t._v(" "),a("li",[t._v("不应包含执行数据查询代码，这种代码放在模型中；")]),t._v(" "),a("li",[t._v("应避免直接访问请求数据，如 "),a("code",[t._v("$_GET")]),t._v(", "),a("code",[t._v("$_POST")]),t._v("，这种应在控制器中执行， 如果需要请求数据，应由控制器推送到视图。")]),t._v(" "),a("li",[t._v("可读取模型属性，但不应修改它们。")])]),t._v(" "),a("p",[t._v("为使模型更易于维护，避免创建太复杂或包含太多冗余代码的视图， 可遵循以下方法达到这个目标：")]),t._v(" "),a("ul",[a("li",[t._v("使用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-views#layouts",target:"_blank",rel:"noopener noreferrer"}},[t._v("布局"),a("OutboundLink")],1),t._v(" 来展示公共代码（如，页面头部、尾部）；")]),t._v(" "),a("li",[t._v("将复杂的视图分成几个小视图，可使用上面描述的渲染方法将这些 小视图渲染并组装成大视图；")]),t._v(" "),a("li",[t._v("创建并使用 "),a("a",{attrs:{href:"https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-widgets",target:"_blank",rel:"noopener noreferrer"}},[t._v("小部件"),a("OutboundLink")],1),t._v(" 作为视图的数据块；")]),t._v(" "),a("li",[t._v("创建并使用助手类在视图中转换和格式化数据。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);